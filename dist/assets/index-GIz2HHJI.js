const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-tFT50byu.js","assets/cd-directive-binder.service-DGbLY5eG.js","assets/index-BEx0eJtE.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hi(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(r){var n=Object.getOwnPropertyDescriptor(o,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return o[r]}})}),t}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vt;(function(o){(function(e){var t=typeof globalThis=="object"?globalThis:typeof rt=="object"?rt:typeof self=="object"?self:typeof this=="object"?this:c(),r=n(o);typeof t.Reflect<"u"&&(r=n(t.Reflect,r)),e(r,t),typeof t.Reflect>"u"&&(t.Reflect=o);function n(d,g){return function(h,E){Object.defineProperty(d,h,{configurable:!0,writable:!0,value:E}),g&&g(h,E)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(e,t){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",d={__proto__:[]}instanceof Array,g=!c&&!d,h={create:c?function(){return yt(Object.create(null))}:d?function(){return yt({__proto__:null})}:function(){return yt({})},has:g?function(a,u){return r.call(a,u)}:function(a,u){return u in a},get:g?function(a,u){return r.call(a,u)?a[u]:void 0}:function(a,u){return a[u]}},E=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Gr(),U=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:zr(),x=typeof WeakMap=="function"?WeakMap:Wr(),z=n?Symbol.for("@reflect-metadata:registry"):void 0,B=xr(),Q=Nr(B);function Y(a,u,f,v){if(T(f)){if(!D(a))throw new TypeError;if(!ae(u))throw new TypeError;return ee(a,u)}else{if(!D(a))throw new TypeError;if(!y(u))throw new TypeError;if(!y(v)&&!T(v)&&!l(v))throw new TypeError;return l(v)&&(v=void 0),f=O(f),ye(a,u,f,v)}}e("decorate",Y);function W(a,u){function f(v,_){if(!y(v))throw new TypeError;if(!T(_)&&!_e(_))throw new TypeError;he(a,u,v,_)}return f}e("metadata",W);function K(a,u,f,v){if(!y(f))throw new TypeError;return T(v)||(v=O(v)),he(a,u,f,v)}e("defineMetadata",K);function Ee(a,u,f){if(!y(u))throw new TypeError;return T(f)||(f=O(f)),le(a,u,f)}e("hasMetadata",Ee);function fe(a,u,f){if(!y(u))throw new TypeError;return T(f)||(f=O(f)),ue(a,u,f)}e("hasOwnMetadata",fe);function Re(a,u,f){if(!y(u))throw new TypeError;return T(f)||(f=O(f)),re(a,u,f)}e("getMetadata",Re);function te(a,u,f){if(!y(u))throw new TypeError;return T(f)||(f=O(f)),Te(a,u,f)}e("getOwnMetadata",te);function ce(a,u){if(!y(a))throw new TypeError;return T(u)||(u=O(u)),me(a,u)}e("getMetadataKeys",ce);function ie(a,u){if(!y(a))throw new TypeError;return T(u)||(u=O(u)),Z(a,u)}e("getOwnMetadataKeys",ie);function pe(a,u,f){if(!y(u))throw new TypeError;if(T(f)||(f=O(f)),!y(u))throw new TypeError;T(f)||(f=O(f));var v=Be(u,f,!1);return T(v)?!1:v.OrdinaryDeleteMetadata(a,u,f)}e("deleteMetadata",pe);function ee(a,u){for(var f=a.length-1;f>=0;--f){var v=a[f],_=v(u);if(!T(_)&&!l(_)){if(!ae(_))throw new TypeError;u=_}}return u}function ye(a,u,f,v){for(var _=a.length-1;_>=0;--_){var N=a[_],H=N(u,f,v);if(!T(H)&&!l(H)){if(!y(H))throw new TypeError;v=H}}return v}function le(a,u,f){var v=ue(a,u,f);if(v)return!0;var _=He(u);return l(_)?!1:le(a,_,f)}function ue(a,u,f){var v=Be(u,f,!1);return T(v)?!1:k(v.OrdinaryHasOwnMetadata(a,u,f))}function re(a,u,f){var v=ue(a,u,f);if(v)return Te(a,u,f);var _=He(u);if(!l(_))return re(a,_,f)}function Te(a,u,f){var v=Be(u,f,!1);if(!T(v))return v.OrdinaryGetOwnMetadata(a,u,f)}function he(a,u,f,v){var _=Be(f,v,!0);_.OrdinaryDefineOwnMetadata(a,u,f,v)}function me(a,u){var f=Z(a,u),v=He(a);if(v===null)return f;var _=me(v,u);if(_.length<=0)return f;if(f.length<=0)return _;for(var N=new U,H=[],$=0,b=f;$<b.length;$++){var S=b[$],w=N.has(S);w||(N.add(S),H.push(S))}for(var A=0,j=_;A<j.length;A++){var S=j[A],w=N.has(S);w||(N.add(S),H.push(S))}return H}function Z(a,u){var f=Be(a,u,!1);return f?f.OrdinaryOwnMetadataKeys(a,u):[]}function ge(a){if(a===null)return 1;switch(typeof a){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return a===null?1:6;default:return 6}}function T(a){return a===void 0}function l(a){return a===null}function p(a){return typeof a=="symbol"}function y(a){return typeof a=="object"?a!==null:typeof a=="function"}function P(a,u){switch(ge(a)){case 0:return a;case 1:return a;case 2:return a;case 3:return a;case 4:return a;case 5:return a}var f="string",v=ve(a,i);if(v!==void 0){var _=v.call(a,f);if(y(_))throw new TypeError;return _}return L(a)}function L(a,u){var f,v,_;{var N=a.toString;if(q(N)){var v=N.call(a);if(!y(v))return v}var f=a.valueOf;if(q(f)){var v=f.call(a);if(!y(v))return v}}throw new TypeError}function k(a){return!!a}function C(a){return""+a}function O(a){var u=P(a);return p(u)?u:C(u)}function D(a){return Array.isArray?Array.isArray(a):a instanceof Object?a instanceof Array:Object.prototype.toString.call(a)==="[object Array]"}function q(a){return typeof a=="function"}function ae(a){return typeof a=="function"}function _e(a){switch(ge(a)){case 3:return!0;case 4:return!0;default:return!1}}function se(a,u){return a===u||a!==a&&u!==u}function ve(a,u){var f=a[u];if(f!=null){if(!q(f))throw new TypeError;return f}}function ze(a){var u=ve(a,s);if(!q(u))throw new TypeError;var f=u.call(a);if(!y(f))throw new TypeError;return f}function We(a){return a.value}function m(a){var u=a.next();return u.done?!1:u}function qe(a){var u=a.return;u&&u.call(a)}function He(a){var u=Object.getPrototypeOf(a);if(typeof a!="function"||a===E||u!==E)return u;var f=a.prototype,v=f&&Object.getPrototypeOf(f);if(v==null||v===Object.prototype)return u;var _=v.constructor;return typeof _!="function"||_===a?u:_}function Ur(){var a;!T(z)&&typeof t.Reflect<"u"&&!(z in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(a=Vr(t.Reflect));var u,f,v,_=new x,N={registerProvider:H,getProvider:b,setProvider:w};return N;function H(A){if(!Object.isExtensible(N))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case a===A:break;case T(u):u=A;break;case u===A:break;case T(f):f=A;break;case f===A:break;default:v===void 0&&(v=new U),v.add(A);break}}function $(A,j){if(!T(u)){if(u.isProviderFor(A,j))return u;if(!T(f)){if(f.isProviderFor(A,j))return u;if(!T(v))for(var F=ze(v);;){var V=m(F);if(!V)return;var ne=We(V);if(ne.isProviderFor(A,j))return qe(F),ne}}}if(!T(a)&&a.isProviderFor(A,j))return a}function b(A,j){var F=_.get(A),V;return T(F)||(V=F.get(j)),T(V)&&(V=$(A,j),T(V)||(T(F)&&(F=new R,_.set(A,F)),F.set(j,V))),V}function S(A){if(T(A))throw new TypeError;return u===A||f===A||!T(v)&&v.has(A)}function w(A,j,F){if(!S(F))throw new Error("Metadata provider not registered.");var V=b(A,j);if(V!==F){if(!T(V))return!1;var ne=_.get(A);T(ne)&&(ne=new R,_.set(A,ne)),ne.set(j,F)}return!0}}function xr(){var a;return!T(z)&&y(t.Reflect)&&Object.isExtensible(t.Reflect)&&(a=t.Reflect[z]),T(a)&&(a=Ur()),!T(z)&&y(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,z,{enumerable:!1,configurable:!1,writable:!1,value:a}),a}function Nr(a){var u=new x,f={isProviderFor:function(S,w){var A=u.get(S);return T(A)?!1:A.has(w)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:_,OrdinaryGetOwnMetadata:N,OrdinaryOwnMetadataKeys:$,OrdinaryDeleteMetadata:b};return B.registerProvider(f),f;function v(S,w,A){var j=u.get(S),F=!1;if(T(j)){if(!A)return;j=new R,u.set(S,j),F=!0}var V=j.get(w);if(T(V)){if(!A)return;if(V=new R,j.set(w,V),!a.setProvider(S,w,f))throw j.delete(w),F&&u.delete(S),new Error("Wrong provider for target.")}return V}function _(S,w,A){var j=v(w,A,!1);return T(j)?!1:k(j.has(S))}function N(S,w,A){var j=v(w,A,!1);if(!T(j))return j.get(S)}function H(S,w,A,j){var F=v(A,j,!0);F.set(S,w)}function $(S,w){var A=[],j=v(S,w,!1);if(T(j))return A;for(var F=j.keys(),V=ze(F),ne=0;;){var Nt=m(V);if(!Nt)return A.length=ne,A;var qr=We(Nt);try{A[ne]=qr}catch(Hr){try{qe(V)}finally{throw Hr}}ne++}}function b(S,w,A){var j=v(w,A,!1);if(T(j)||!j.delete(S))return!1;if(j.size===0){var F=u.get(w);T(F)||(F.delete(A),F.size===0&&u.delete(F))}return!0}}function Vr(a){var u=a.defineMetadata,f=a.hasOwnMetadata,v=a.getOwnMetadata,_=a.getOwnMetadataKeys,N=a.deleteMetadata,H=new x,$={isProviderFor:function(b,S){var w=H.get(b);return!T(w)&&w.has(S)?!0:_(b,S).length?(T(w)&&(w=new U,H.set(b,w)),w.add(S),!0):!1},OrdinaryDefineOwnMetadata:u,OrdinaryHasOwnMetadata:f,OrdinaryGetOwnMetadata:v,OrdinaryOwnMetadataKeys:_,OrdinaryDeleteMetadata:N};return $}function Be(a,u,f){var v=B.getProvider(a,u);if(!T(v))return v;if(f){if(B.setProvider(a,u,Q))return Q;throw new Error("Illegal state.")}}function Gr(){var a={},u=[],f=function(){function $(b,S,w){this._index=0,this._keys=b,this._values=S,this._selector=w}return $.prototype["@@iterator"]=function(){return this},$.prototype[s]=function(){return this},$.prototype.next=function(){var b=this._index;if(b>=0&&b<this._keys.length){var S=this._selector(this._keys[b],this._values[b]);return b+1>=this._keys.length?(this._index=-1,this._keys=u,this._values=u):this._index++,{value:S,done:!1}}return{value:void 0,done:!0}},$.prototype.throw=function(b){throw this._index>=0&&(this._index=-1,this._keys=u,this._values=u),b},$.prototype.return=function(b){return this._index>=0&&(this._index=-1,this._keys=u,this._values=u),{value:b,done:!0}},$}(),v=function(){function $(){this._keys=[],this._values=[],this._cacheKey=a,this._cacheIndex=-2}return Object.defineProperty($.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),$.prototype.has=function(b){return this._find(b,!1)>=0},$.prototype.get=function(b){var S=this._find(b,!1);return S>=0?this._values[S]:void 0},$.prototype.set=function(b,S){var w=this._find(b,!0);return this._values[w]=S,this},$.prototype.delete=function(b){var S=this._find(b,!1);if(S>=0){for(var w=this._keys.length,A=S+1;A<w;A++)this._keys[A-1]=this._keys[A],this._values[A-1]=this._values[A];return this._keys.length--,this._values.length--,se(b,this._cacheKey)&&(this._cacheKey=a,this._cacheIndex=-2),!0}return!1},$.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=a,this._cacheIndex=-2},$.prototype.keys=function(){return new f(this._keys,this._values,_)},$.prototype.values=function(){return new f(this._keys,this._values,N)},$.prototype.entries=function(){return new f(this._keys,this._values,H)},$.prototype["@@iterator"]=function(){return this.entries()},$.prototype[s]=function(){return this.entries()},$.prototype._find=function(b,S){if(!se(this._cacheKey,b)){this._cacheIndex=-1;for(var w=0;w<this._keys.length;w++)if(se(this._keys[w],b)){this._cacheIndex=w;break}}return this._cacheIndex<0&&S&&(this._cacheIndex=this._keys.length,this._keys.push(b),this._values.push(void 0)),this._cacheIndex},$}();return v;function _($,b){return $}function N($,b){return b}function H($,b){return[$,b]}}function zr(){var a=function(){function u(){this._map=new R}return Object.defineProperty(u.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),u.prototype.has=function(f){return this._map.has(f)},u.prototype.add=function(f){return this._map.set(f,f),this},u.prototype.delete=function(f){return this._map.delete(f)},u.prototype.clear=function(){this._map.clear()},u.prototype.keys=function(){return this._map.keys()},u.prototype.values=function(){return this._map.keys()},u.prototype.entries=function(){return this._map.entries()},u.prototype["@@iterator"]=function(){return this.keys()},u.prototype[s]=function(){return this.keys()},u}();return a}function Wr(){var a=16,u=h.create(),f=v();return function(){function b(){this._key=v()}return b.prototype.has=function(S){var w=_(S,!1);return w!==void 0?h.has(w,this._key):!1},b.prototype.get=function(S){var w=_(S,!1);return w!==void 0?h.get(w,this._key):void 0},b.prototype.set=function(S,w){var A=_(S,!0);return A[this._key]=w,this},b.prototype.delete=function(S){var w=_(S,!1);return w!==void 0?delete w[this._key]:!1},b.prototype.clear=function(){this._key=v()},b}();function v(){var b;do b="@@WeakMap@@"+$();while(h.has(u,b));return u[b]=!0,b}function _(b,S){if(!r.call(b,f)){if(!S)return;Object.defineProperty(b,f,{value:h.create()})}return b[f]}function N(b,S){for(var w=0;w<S;++w)b[w]=Math.random()*255|0;return b}function H(b){if(typeof Uint8Array=="function"){var S=new Uint8Array(b);return typeof crypto<"u"?crypto.getRandomValues(S):typeof msCrypto<"u"?msCrypto.getRandomValues(S):N(S,b),S}return N(new Array(b),b)}function $(){var b=H(a);b[6]=b[6]&79|64,b[8]=b[8]&191|128;for(var S="",w=0;w<a;++w){var A=b[w];(w===4||w===6||w===8)&&(S+="-"),A<16&&(S+="0"),S+=A.toString(16).toLowerCase()}return S}}function yt(a){return a.__=void 0,delete a.__,a}})})(Vt||(Vt={}));/*!
* metismenujs - v1.4.0
* MetisMenu: Collapsible menu plugin with Vanilla-JS
* https://github.com/onokumus/metismenujs#readme
*
* Made by Osman Nuri Okumus <onokumus@gmail.com> (https://github.com/onokumus)
* Under MIT License
*/const Jr={parentTrigger:"li",subMenu:"ul",toggle:!0,triggerElement:"a"},Je={ACTIVE:"mm-active",COLLAPSE:"mm-collapse",COLLAPSED:"mm-collapsed",COLLAPSING:"mm-collapsing",METIS:"metismenu",SHOW:"mm-show"};class nt{constructor(e,t){this.element=nt.isElement(e)?e:document.querySelector(e),this.config=Object.assign(Object.assign({},Jr),t),this.disposed=!1,this.triggerArr=[],this.boundEventHandler=this.clickEvent.bind(this),this.init()}static attach(e,t){return new nt(e,t)}init(){const{METIS:e,ACTIVE:t,COLLAPSE:r}=Je;this.element.classList.add(e);const n=[...this.element.querySelectorAll(this.config.subMenu)];n.length!==0&&n.forEach(i=>{i.classList.add(r);const s=i.closest(this.config.parentTrigger);s!=null&&s.classList.contains(t)?this.show(i):this.hide(i);const c=s==null?void 0:s.querySelector(this.config.triggerElement);(c==null?void 0:c.getAttribute("aria-disabled"))!=="true"&&(c==null||c.setAttribute("aria-expanded","false"),c==null||c.addEventListener("click",this.boundEventHandler),this.triggerArr.push(c))})}clickEvent(e){if(!this.disposed){const t=e==null?void 0:e.currentTarget;t&&t.tagName==="A"&&e.preventDefault();const r=t.closest(this.config.parentTrigger),n=r==null?void 0:r.querySelector(this.config.subMenu);this.toggle(n)}}update(){this.disposed=!1,this.init()}dispose(){this.triggerArr.forEach(e=>{e.removeEventListener("click",this.boundEventHandler)}),this.disposed=!0}on(e,t,r){return this.element.addEventListener(e,t,r),this}off(e,t,r){return this.element.removeEventListener(e,t,r),this}emit(e,t,r=!1){const n=new CustomEvent(e,{bubbles:r,detail:t});this.element.dispatchEvent(n)}toggle(e){const t=e.closest(this.config.parentTrigger);t!=null&&t.classList.contains(Je.ACTIVE)?this.hide(e):this.show(e)}show(e){var t;const r=e,{ACTIVE:n,COLLAPSE:i,COLLAPSED:s,COLLAPSING:c,SHOW:d}=Je;if(this.isTransitioning||r.classList.contains(c))return;const g=()=>{r.classList.remove(c),r.style.height="",r.removeEventListener("transitionend",g),this.setTransitioning(!1),this.emit("shown.metisMenu",{shownElement:r})},h=r.closest(this.config.parentTrigger);h==null||h.classList.add(n);const E=h==null?void 0:h.querySelector(this.config.triggerElement);E==null||E.setAttribute("aria-expanded","true"),E==null||E.classList.remove(s),r.style.height="0px",r.classList.remove(i),r.classList.remove(d),r.classList.add(c);const R=[].slice.call((t=h==null?void 0:h.parentNode)===null||t===void 0?void 0:t.children).filter(U=>U!==h);this.config.toggle&&R.length>0&&R.forEach(U=>{const x=U.querySelector(this.config.subMenu);x&&this.hide(x)}),this.setTransitioning(!0),r.classList.add(i),r.classList.add(d),r.style.height=`${r.scrollHeight}px`,this.emit("show.metisMenu",{showElement:r}),r.addEventListener("transitionend",g)}hide(e){const{ACTIVE:t,COLLAPSE:r,COLLAPSED:n,COLLAPSING:i,SHOW:s}=Je,c=e;if(this.isTransitioning||!c.classList.contains(s))return;this.emit("hide.metisMenu",{hideElement:c});const d=c.closest(this.config.parentTrigger);d==null||d.classList.remove(t);const g=()=>{c.classList.remove(i),c.classList.add(r),c.style.height="",c.removeEventListener("transitionend",g),this.setTransitioning(!1),this.emit("hidden.metisMenu",{hiddenElement:c})};c.style.height=`${c.getBoundingClientRect().height}px`,c.style.height=`${c.offsetHeight}px`,c.classList.add(i),c.classList.remove(r),c.classList.remove(s),this.setTransitioning(!0),c.addEventListener("transitionend",g),c.style.height="0px";const h=d==null?void 0:d.querySelector(this.config.triggerElement);h==null||h.setAttribute("aria-expanded","false"),h==null||h.classList.add(n)}setTransitioning(e){this.isTransitioning=e}static isElement(e){return!!e.classList}}function Gt(o){return new Promise((e,t)=>{if(document.querySelector(`link[href="${o}"]`))return e();const r=document.createElement("link");r.rel="stylesheet",r.href=o,r.onload=()=>e(),r.onerror=()=>t(new Error(`Failed to load CSS: ${o}`)),document.head.appendChild(r)})}function Yr(o){return new Promise((e,t)=>{if(document.querySelector(`script[src="${o}"]`))return e();const r=document.createElement("script");r.src=o,r.async=!0,r.onload=()=>e(),r.onerror=()=>t(new Error(`Failed to load script: ${o}`)),document.head.appendChild(r)})}class Qr{constructor(){this.instance=null}async initialize(e,t){await Gt("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.css"),await Yr("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.js"),await Gt(`/themes/${t}/menu-systems/metismenu.css`);const r=document.getElementById(e);if(!r)return;const n=r.querySelector("ul.cd-menu-root");if(!n)return;if(this.transformForMetisMenu(n),!document.getElementById("menu")){console.error("[MetisMenuAdapter] FATAL: Failed to find element with ID 'menu' after transformation. MetisMenu will not bind.");return}this.instance=new nt("#menu")}destroy(){}transformForMetisMenu(e){e.classList.remove("cd-menu-root"),e.classList.add("metismenu"),e.setAttribute("id","menu"),e.querySelectorAll(".cd-menu-item").forEach(t=>{const r=t.querySelector(".cd-menu-link"),n=t.querySelector(".cd-menu-label"),i=t.getAttribute("data-route")||"#",s=t.getAttribute("data-icon"),c=t.querySelector("ul");let d=null;if(s)try{const g=atob(s);d=JSON.parse(g)}catch(g){console.warn("Failed to decode or parse icon metadata",g)}if(r&&n){const g=r.querySelector(".cd-menu-toggle-icon");if(g&&g.remove(),r.innerHTML="",r.href=c?"#":`/${i}`,d){const E=this.createIconElement(d);E&&(E.classList.add("menu-icon"),r.appendChild(E))}const h=document.createElement("span");if(h.classList.add("cd-menu-label"),h.textContent=n.textContent||"",r.appendChild(h),c){r.classList.add("has-arrow"),r.setAttribute("aria-expanded","false");const E=document.createElement("i");E.classList.add("menu-arrow","fa-solid","fa-chevron-right"),r.appendChild(E)}}t.classList.remove("cd-menu-item")}),e.querySelectorAll("ul.cd-submenu").forEach(t=>{t.classList.remove("cd-submenu")})}createIconElement(e){if(!e.iconType)return null;const t=this.getCurrentThemeMenu(),r=(t==null?void 0:t.iconSize)??14,n=(t==null?void 0:t.iconColor)??"#444";switch(e.iconType){case"fontawesome":{const i=document.createElement("i");return i.className=e.icon,i.style.color=n,i.style.fontSize=`${r}px`,i}case"svg":{const i=document.createElement("span");i.innerHTML=e.icon;const s=i.firstElementChild;return s&&(s.style.color=n,s.style.width=`${r}px`,s.style.height=`${r}px`),s}case"string":{const i=document.createElement("span");return i.textContent=e.icon,i.style.color=n,i.style.fontSize=`${r}px`,i}default:return null}}getCurrentThemeMenu(){var e,t;try{const r=localStorage.getItem("cd-theme"),n=r?JSON.parse(r):null;return(t=(e=n==null?void 0:n.layout)==null?void 0:e.sidebar)==null?void 0:t.menu}catch{return}}}class $e{constructor(){this.cache={}}static getInstance(){return console.log("[ControllerCacheService][getInstance] start..."),$e.instance||($e.instance=new $e),$e.instance}async getOrInitializeController(e,t){if(console.log("[ControllerCacheService][getOrInitializeController] start..."),this.cache[e])return console.log(`[ControllerCacheService] Using cached controller: ${e}`),this.cache[e];if(console.log(`[ControllerCacheService] Creating new instance for: ${e}`),!t||typeof t!="object")return console.error(`[ControllerCacheService] Invalid controllerDef for '${e}'.`,t),null;let r;try{r=Object.create(t)}catch(n){return console.error(`[ControllerCacheService] Failed to create instance for '${e}'.`,n),null}for(const n of Object.keys(t)){const i=Object.getOwnPropertyDescriptor(t,n);i&&i.value!==void 0&&typeof i.value!="function"&&(r[n]=i.value)}try{typeof r.__init=="function"&&r.__init(),typeof r.__setup=="function"&&await r.__setup()}catch(n){console.error(`[ControllerCacheService] Initialization failed for '${e}'.`,n)}return this.cache[e]=r,console.log(`[ControllerCacheService] Cached instance for ${e}`),r}forceReinit(e){console.log(`[ControllerCacheService] Force reinit for: ${e}`);const t=this.cache[e];t&&typeof t.__init=="function"&&t.__init()}}var Lt={},fr={},pr=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,t);if(c.value!==n||c.enumerable!==!0)return!1}return!0},Zr=pr,dt=function(){return Zr()&&!!Symbol.toStringTag},yr=Object,Xr=Error,Kr=EvalError,en=RangeError,tn=ReferenceError,hr=SyntaxError,Ue=TypeError,rn=URIError,nn=Math.abs,on=Math.floor,an=Math.max,sn=Math.min,cn=Math.pow,ln=Math.round,un=Number.isNaN||function(e){return e!==e},dn=un,fn=function(e){return dn(e)||e===0?e:e<0?-1:1},pn=Object.getOwnPropertyDescriptor,Qe=pn;if(Qe)try{Qe([],"length")}catch{Qe=null}var De=Qe,Ze=Object.defineProperty||!1;if(Ze)try{Ze({},"a",{value:1})}catch{Ze=!1}var ft=Ze,ht,zt;function yn(){if(zt)return ht;zt=1;var o=typeof Symbol<"u"&&Symbol,e=pr;return ht=function(){return typeof o!="function"||typeof Symbol!="function"||typeof o("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ht}var mr=typeof Reflect<"u"&&Reflect.getPrototypeOf||null,hn=yr,gr=hn.getPrototypeOf||null,mn="Function.prototype.bind called on incompatible ",gn=Object.prototype.toString,vn=Math.max,bn="[object Function]",Wt=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},Sn=function(e,t){for(var r=[],n=t,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},wn=function(o,e){for(var t="",r=0;r<o.length;r+=1)t+=o[r],r+1<o.length&&(t+=e);return t},An=function(e){var t=this;if(typeof t!="function"||gn.apply(t)!==bn)throw new TypeError(mn+t);for(var r=Sn(arguments,1),n,i=function(){if(this instanceof n){var h=t.apply(this,Wt(r,arguments));return Object(h)===h?h:this}return t.apply(e,Wt(r,arguments))},s=vn(0,t.length-r.length),c=[],d=0;d<s;d++)c[d]="$"+d;if(n=Function("binder","return function ("+wn(c,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var g=function(){};g.prototype=t.prototype,n.prototype=new g,g.prototype=null}return n},Mn=An,xe=Function.prototype.bind||Mn,kt=Function.prototype.call,Dt=Function.prototype.apply,En=typeof Reflect<"u"&&Reflect&&Reflect.apply,Tn=xe,_n=Dt,On=kt,Pn=En,vr=Pn||Tn.call(On,_n),Cn=xe,$n=Ue,In=kt,jn=vr,Rt=function(e){if(e.length<1||typeof e[0]!="function")throw new $n("a function is required");return jn(Cn,In,e)},Ln=Rt,qt=De,br;try{br=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var mt=!!br&&qt&&qt(Object.prototype,"__proto__"),Sr=Object,Ht=Sr.getPrototypeOf,kn=mt&&typeof mt.get=="function"?Ln([mt.get]):typeof Ht=="function"?function(e){return Ht(e==null?e:Sr(e))}:!1,Jt=mr,Yt=gr,Qt=kn,Bt=Jt?function(e){return Jt(e)}:Yt?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Yt(e)}:Qt?function(e){return Qt(e)}:null,Dn=Function.prototype.call,Rn=Object.prototype.hasOwnProperty,Bn=xe,wr=Bn.call(Dn,Rn),I,Fn=yr,Un=Xr,xn=Kr,Nn=en,Vn=tn,ke=hr,je=Ue,Gn=rn,zn=nn,Wn=on,qn=an,Hn=sn,Jn=cn,Yn=ln,Qn=fn,Ar=Function,gt=function(o){try{return Ar('"use strict"; return ('+o+").constructor;")()}catch{}},Fe=De,Zn=ft,vt=function(){throw new je},Xn=Fe?function(){try{return arguments.callee,vt}catch{try{return Fe(arguments,"callee").get}catch{return vt}}}():vt,Oe=yn()(),J=Bt,Kn=gr,eo=mr,Mr=Dt,Ne=kt,Ce={},to=typeof Uint8Array>"u"||!J?I:J(Uint8Array),Me={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":Oe&&J?J([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":Ce,"%AsyncGenerator%":Ce,"%AsyncGeneratorFunction%":Ce,"%AsyncIteratorPrototype%":Ce,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Un,"%eval%":eval,"%EvalError%":xn,"%Float16Array%":typeof Float16Array>"u"?I:Float16Array,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":Ar,"%GeneratorFunction%":Ce,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Oe&&J?J(J([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Oe||!J?I:J(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Fn,"%Object.getOwnPropertyDescriptor%":Fe,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":Nn,"%ReferenceError%":Vn,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Oe||!J?I:J(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Oe&&J?J(""[Symbol.iterator]()):I,"%Symbol%":Oe?Symbol:I,"%SyntaxError%":ke,"%ThrowTypeError%":Xn,"%TypedArray%":to,"%TypeError%":je,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":Gn,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet,"%Function.prototype.call%":Ne,"%Function.prototype.apply%":Mr,"%Object.defineProperty%":Zn,"%Object.getPrototypeOf%":Kn,"%Math.abs%":zn,"%Math.floor%":Wn,"%Math.max%":qn,"%Math.min%":Hn,"%Math.pow%":Jn,"%Math.round%":Yn,"%Math.sign%":Qn,"%Reflect.getPrototypeOf%":eo};if(J)try{null.error}catch(o){var ro=J(J(o));Me["%Error.prototype%"]=ro}var no=function o(e){var t;if(e==="%AsyncFunction%")t=gt("async function () {}");else if(e==="%GeneratorFunction%")t=gt("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=gt("async function* () {}");else if(e==="%AsyncGenerator%"){var r=o("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=o("%AsyncGenerator%");n&&J&&(t=J(n.prototype))}return Me[e]=t,t},Zt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ve=xe,ot=wr,oo=Ve.call(Ne,Array.prototype.concat),io=Ve.call(Mr,Array.prototype.splice),Xt=Ve.call(Ne,String.prototype.replace),it=Ve.call(Ne,String.prototype.slice),ao=Ve.call(Ne,RegExp.prototype.exec),so=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,co=/\\(\\)?/g,lo=function(e){var t=it(e,0,1),r=it(e,-1);if(t==="%"&&r!=="%")throw new ke("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new ke("invalid intrinsic syntax, expected opening `%`");var n=[];return Xt(e,so,function(i,s,c,d){n[n.length]=c?Xt(d,co,"$1"):s||i}),n},uo=function(e,t){var r=e,n;if(ot(Zt,r)&&(n=Zt[r],r="%"+n[0]+"%"),ot(Me,r)){var i=Me[r];if(i===Ce&&(i=no(r)),typeof i>"u"&&!t)throw new je("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new ke("intrinsic "+e+" does not exist!")},Er=function(e,t){if(typeof e!="string"||e.length===0)throw new je("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new je('"allowMissing" argument must be a boolean');if(ao(/^%?[^%]*%?$/,e)===null)throw new ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=lo(e),n=r.length>0?r[0]:"",i=uo("%"+n+"%",t),s=i.name,c=i.value,d=!1,g=i.alias;g&&(n=g[0],io(r,oo([0,1],g)));for(var h=1,E=!0;h<r.length;h+=1){var R=r[h],U=it(R,0,1),x=it(R,-1);if((U==='"'||U==="'"||U==="`"||x==='"'||x==="'"||x==="`")&&U!==x)throw new ke("property names with quotes must have matching quotes");if((R==="constructor"||!E)&&(d=!0),n+="."+R,s="%"+n+"%",ot(Me,s))c=Me[s];else if(c!=null){if(!(R in c)){if(!t)throw new je("base intrinsic for "+e+" exists, but the property is not available.");return}if(Fe&&h+1>=r.length){var z=Fe(c,R);E=!!z,E&&"get"in z&&!("originalValue"in z.get)?c=z.get:c=c[R]}else E=ot(c,R),c=c[R];E&&!d&&(Me[s]=c)}}return c},Tr=Er,_r=Rt,fo=_r([Tr("%String.prototype.indexOf%")]),Ge=function(e,t){var r=Tr(e,!!t);return typeof r=="function"&&fo(e,".prototype.")>-1?_r([r]):r},po=dt(),yo=Ge,Et=yo("Object.prototype.toString"),pt=function(e){return po&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Et(e)==="[object Arguments]"},Or=function(e){return pt(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&Et(e)!=="[object Array]"&&"callee"in e&&Et(e.callee)==="[object Function]"},ho=function(){return pt(arguments)}();pt.isLegacyArguments=Or;var mo=ho?pt:Or,Kt=Ge,go=dt(),vo=wr,bo=De,Tt;if(go){var So=Kt("RegExp.prototype.exec"),er={},bt=function(){throw er},tr={toString:bt,valueOf:bt};typeof Symbol.toPrimitive=="symbol"&&(tr[Symbol.toPrimitive]=bt),Tt=function(e){if(!e||typeof e!="object")return!1;var t=bo(e,"lastIndex"),r=t&&vo(t,"value");if(!r)return!1;try{So(e,tr)}catch(n){return n===er}}}else{var wo=Kt("Object.prototype.toString"),Ao="[object RegExp]";Tt=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:wo(e)===Ao}}var Mo=Tt,Eo=Ge,To=Mo,_o=Eo("RegExp.prototype.exec"),Oo=Ue,Po=function(e){if(!To(e))throw new Oo("`regex` must be a RegExp");return function(r){return _o(e,r)!==null}},St,rr;function Co(){if(rr)return St;rr=1;const o=(function*(){}).constructor;return St=()=>o,St}var Pr=Ge,$o=Po,Io=$o(/^\s*(?:function)?\*/),jo=dt(),nr=Bt,Lo=Pr("Object.prototype.toString"),ko=Pr("Function.prototype.toString"),Do=Co(),Ro=function(e){if(typeof e!="function")return!1;if(Io(ko(e)))return!0;if(!jo){var t=Lo(e);return t==="[object GeneratorFunction]"}if(!nr)return!1;var r=Do();return r&&nr(e)===r.prototype},Cr=Function.prototype.toString,Ie=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,_t,Xe;if(typeof Ie=="function"&&typeof Object.defineProperty=="function")try{_t=Object.defineProperty({},"length",{get:function(){throw Xe}}),Xe={},Ie(function(){throw 42},null,_t)}catch(o){o!==Xe&&(Ie=null)}else Ie=null;var Bo=/^\s*class\b/,Ot=function(e){try{var t=Cr.call(e);return Bo.test(t)}catch{return!1}},wt=function(e){try{return Ot(e)?!1:(Cr.call(e),!0)}catch{return!1}},Ke=Object.prototype.toString,Fo="[object Object]",Uo="[object Function]",xo="[object GeneratorFunction]",No="[object HTMLAllCollection]",Vo="[object HTML document.all class]",Go="[object HTMLCollection]",zo=typeof Symbol=="function"&&!!Symbol.toStringTag,Wo=!(0 in[,]),Pt=function(){return!1};if(typeof document=="object"){var qo=document.all;Ke.call(qo)===Ke.call(document.all)&&(Pt=function(e){if((Wo||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Ke.call(e);return(t===No||t===Vo||t===Go||t===Fo)&&e("")==null}catch{}return!1})}var Ho=Ie?function(e){if(Pt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Ie(e,null,_t)}catch(t){if(t!==Xe)return!1}return!Ot(e)&&wt(e)}:function(e){if(Pt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(zo)return wt(e);if(Ot(e))return!1;var t=Ke.call(e);return t!==Uo&&t!==xo&&!/^\[object HTML/.test(t)?!1:wt(e)},Jo=Ho,Yo=Object.prototype.toString,$r=Object.prototype.hasOwnProperty,Qo=function(e,t,r){for(var n=0,i=e.length;n<i;n++)$r.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))},Zo=function(e,t,r){for(var n=0,i=e.length;n<i;n++)r==null?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},Xo=function(e,t,r){for(var n in e)$r.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))};function Ko(o){return Yo.call(o)==="[object Array]"}var ei=function(e,t,r){if(!Jo(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),Ko(e)?Qo(e,t,n):typeof e=="string"?Zo(e,t,n):Xo(e,t,n)},ti=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],At=ti,ri=typeof globalThis>"u"?rt:globalThis,ni=function(){for(var e=[],t=0;t<At.length;t++)typeof ri[At[t]]=="function"&&(e[e.length]=At[t]);return e},Ir={exports:{}},or=ft,oi=hr,Pe=Ue,ir=De,ii=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Pe("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Pe("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Pe("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Pe("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Pe("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Pe("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!ir&&ir(e,t);if(or)or(e,t,{configurable:s===null&&d?d.configurable:!s,enumerable:n===null&&d?d.enumerable:!n,value:r,writable:i===null&&d?d.writable:!i});else if(c||!n&&!i&&!s)e[t]=r;else throw new oi("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ct=ft,jr=function(){return!!Ct};jr.hasArrayLengthDefineBug=function(){if(!Ct)return null;try{return Ct([],"length",{value:1}).length!==1}catch{return!0}};var ai=jr,si=Er,ar=ii,ci=ai(),sr=De,cr=Ue,li=si("%Math.floor%"),ui=function(e,t){if(typeof e!="function")throw new cr("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||li(t)!==t)throw new cr("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,i=!0;if("length"in e&&sr){var s=sr(e,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(i=!1)}return(n||i||!r)&&(ci?ar(e,"length",t,!0,!0):ar(e,"length",t)),e},di=xe,fi=Dt,pi=vr,yi=function(){return pi(di,fi,arguments)};(function(o){var e=ui,t=ft,r=Rt,n=yi;o.exports=function(s){var c=r(arguments),d=s.length-(arguments.length-1);return e(c,1+(d>0?d:0),!0)},t?t(o.exports,"apply",{value:n}):o.exports.apply=n})(Ir);var hi=Ir.exports,at=ei,mi=ni,lr=hi,Ft=Ge,et=De,Ye=Bt,gi=Ft("Object.prototype.toString"),Lr=dt(),ur=typeof globalThis>"u"?rt:globalThis,$t=mi(),Ut=Ft("String.prototype.slice"),vi=Ft("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},st={__proto__:null};Lr&&et&&Ye?at($t,function(o){var e=new ur[o];if(Symbol.toStringTag in e&&Ye){var t=Ye(e),r=et(t,Symbol.toStringTag);if(!r&&t){var n=Ye(t);r=et(n,Symbol.toStringTag)}st["$"+o]=lr(r.get)}}):at($t,function(o){var e=new ur[o],t=e.slice||e.set;t&&(st["$"+o]=lr(t))});var bi=function(e){var t=!1;return at(st,function(r,n){if(!t)try{"$"+r(e)===n&&(t=Ut(n,1))}catch{}}),t},Si=function(e){var t=!1;return at(st,function(r,n){if(!t)try{r(e),t=Ut(n,1)}catch{}}),t},kr=function(e){if(!e||typeof e!="object")return!1;if(!Lr){var t=Ut(gi(e),8,-1);return vi($t,t)>-1?t:t!=="Object"?!1:Si(e)}return et?bi(e):null},wi=kr,Ai=function(e){return!!wi(e)};(function(o){var e=mo,t=Ro,r=kr,n=Ai;function i(m){return m.call.bind(m)}var s=typeof BigInt<"u",c=typeof Symbol<"u",d=i(Object.prototype.toString),g=i(Number.prototype.valueOf),h=i(String.prototype.valueOf),E=i(Boolean.prototype.valueOf);if(s)var R=i(BigInt.prototype.valueOf);if(c)var U=i(Symbol.prototype.valueOf);function x(m,qe){if(typeof m!="object")return!1;try{return qe(m),!0}catch{return!1}}o.isArgumentsObject=e,o.isGeneratorFunction=t,o.isTypedArray=n;function z(m){return typeof Promise<"u"&&m instanceof Promise||m!==null&&typeof m=="object"&&typeof m.then=="function"&&typeof m.catch=="function"}o.isPromise=z;function B(m){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(m):n(m)||l(m)}o.isArrayBufferView=B;function Q(m){return r(m)==="Uint8Array"}o.isUint8Array=Q;function Y(m){return r(m)==="Uint8ClampedArray"}o.isUint8ClampedArray=Y;function W(m){return r(m)==="Uint16Array"}o.isUint16Array=W;function K(m){return r(m)==="Uint32Array"}o.isUint32Array=K;function Ee(m){return r(m)==="Int8Array"}o.isInt8Array=Ee;function fe(m){return r(m)==="Int16Array"}o.isInt16Array=fe;function Re(m){return r(m)==="Int32Array"}o.isInt32Array=Re;function te(m){return r(m)==="Float32Array"}o.isFloat32Array=te;function ce(m){return r(m)==="Float64Array"}o.isFloat64Array=ce;function ie(m){return r(m)==="BigInt64Array"}o.isBigInt64Array=ie;function pe(m){return r(m)==="BigUint64Array"}o.isBigUint64Array=pe;function ee(m){return d(m)==="[object Map]"}ee.working=typeof Map<"u"&&ee(new Map);function ye(m){return typeof Map>"u"?!1:ee.working?ee(m):m instanceof Map}o.isMap=ye;function le(m){return d(m)==="[object Set]"}le.working=typeof Set<"u"&&le(new Set);function ue(m){return typeof Set>"u"?!1:le.working?le(m):m instanceof Set}o.isSet=ue;function re(m){return d(m)==="[object WeakMap]"}re.working=typeof WeakMap<"u"&&re(new WeakMap);function Te(m){return typeof WeakMap>"u"?!1:re.working?re(m):m instanceof WeakMap}o.isWeakMap=Te;function he(m){return d(m)==="[object WeakSet]"}he.working=typeof WeakSet<"u"&&he(new WeakSet);function me(m){return he(m)}o.isWeakSet=me;function Z(m){return d(m)==="[object ArrayBuffer]"}Z.working=typeof ArrayBuffer<"u"&&Z(new ArrayBuffer);function ge(m){return typeof ArrayBuffer>"u"?!1:Z.working?Z(m):m instanceof ArrayBuffer}o.isArrayBuffer=ge;function T(m){return d(m)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function l(m){return typeof DataView>"u"?!1:T.working?T(m):m instanceof DataView}o.isDataView=l;var p=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function y(m){return d(m)==="[object SharedArrayBuffer]"}function P(m){return typeof p>"u"?!1:(typeof y.working>"u"&&(y.working=y(new p)),y.working?y(m):m instanceof p)}o.isSharedArrayBuffer=P;function L(m){return d(m)==="[object AsyncFunction]"}o.isAsyncFunction=L;function k(m){return d(m)==="[object Map Iterator]"}o.isMapIterator=k;function C(m){return d(m)==="[object Set Iterator]"}o.isSetIterator=C;function O(m){return d(m)==="[object Generator]"}o.isGeneratorObject=O;function D(m){return d(m)==="[object WebAssembly.Module]"}o.isWebAssemblyCompiledModule=D;function q(m){return x(m,g)}o.isNumberObject=q;function ae(m){return x(m,h)}o.isStringObject=ae;function _e(m){return x(m,E)}o.isBooleanObject=_e;function se(m){return s&&x(m,R)}o.isBigIntObject=se;function ve(m){return c&&x(m,U)}o.isSymbolObject=ve;function ze(m){return q(m)||ae(m)||_e(m)||se(m)||ve(m)}o.isBoxedPrimitive=ze;function We(m){return typeof Uint8Array<"u"&&(ge(m)||P(m))}o.isAnyArrayBuffer=We,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(m){Object.defineProperty(o,m,{enumerable:!1,value:function(){throw new Error(m+" is not supported in userland")}})})})(fr);var Mi=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},It={exports:{}};typeof Object.create=="function"?It.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:It.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Ei=It.exports;(function(o){var e={},t=Object.getOwnPropertyDescriptors||function(p){for(var y=Object.keys(p),P={},L=0;L<y.length;L++)P[y[L]]=Object.getOwnPropertyDescriptor(p,y[L]);return P},r=/%[sdj%]/g;o.format=function(l){if(!fe(l)){for(var p=[],y=0;y<arguments.length;y++)p.push(c(arguments[y]));return p.join(" ")}for(var y=1,P=arguments,L=P.length,k=String(l).replace(r,function(O){if(O==="%%")return"%";if(y>=L)return O;switch(O){case"%s":return String(P[y++]);case"%d":return Number(P[y++]);case"%j":try{return JSON.stringify(P[y++])}catch{return"[Circular]"}default:return O}}),C=P[y];y<L;C=P[++y])W(C)||!ie(C)?k+=" "+C:k+=" "+c(C);return k},o.deprecate=function(l,p){if(typeof process<"u"&&process.noDeprecation===!0)return l;if(typeof process>"u")return function(){return o.deprecate(l,p).apply(this,arguments)};var y=!1;function P(){if(!y){if(process.throwDeprecation)throw new Error(p);process.traceDeprecation?console.trace(p):console.error(p),y=!0}return l.apply(this,arguments)}return P};var n={},i=/^$/;if(e.NODE_DEBUG){var s=e.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}o.debuglog=function(l){if(l=l.toUpperCase(),!n[l])if(i.test(l)){var p=process.pid;n[l]=function(){var y=o.format.apply(o,arguments);console.error("%s %d: %s",l,p,y)}}else n[l]=function(){};return n[l]};function c(l,p){var y={seen:[],stylize:g};return arguments.length>=3&&(y.depth=arguments[2]),arguments.length>=4&&(y.colors=arguments[3]),Y(p)?y.showHidden=p:p&&o._extend(y,p),te(y.showHidden)&&(y.showHidden=!1),te(y.depth)&&(y.depth=2),te(y.colors)&&(y.colors=!1),te(y.customInspect)&&(y.customInspect=!0),y.colors&&(y.stylize=d),E(y,l,y.depth)}o.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function d(l,p){var y=c.styles[p];return y?"\x1B["+c.colors[y][0]+"m"+l+"\x1B["+c.colors[y][1]+"m":l}function g(l,p){return l}function h(l){var p={};return l.forEach(function(y,P){p[y]=!0}),p}function E(l,p,y){if(l.customInspect&&p&&ye(p.inspect)&&p.inspect!==o.inspect&&!(p.constructor&&p.constructor.prototype===p)){var P=p.inspect(y,l);return fe(P)||(P=E(l,P,y)),P}var L=R(l,p);if(L)return L;var k=Object.keys(p),C=h(k);if(l.showHidden&&(k=Object.getOwnPropertyNames(p)),ee(p)&&(k.indexOf("message")>=0||k.indexOf("description")>=0))return U(p);if(k.length===0){if(ye(p)){var O=p.name?": "+p.name:"";return l.stylize("[Function"+O+"]","special")}if(ce(p))return l.stylize(RegExp.prototype.toString.call(p),"regexp");if(pe(p))return l.stylize(Date.prototype.toString.call(p),"date");if(ee(p))return U(p)}var D="",q=!1,ae=["{","}"];if(Q(p)&&(q=!0,ae=["[","]"]),ye(p)){var _e=p.name?": "+p.name:"";D=" [Function"+_e+"]"}if(ce(p)&&(D=" "+RegExp.prototype.toString.call(p)),pe(p)&&(D=" "+Date.prototype.toUTCString.call(p)),ee(p)&&(D=" "+U(p)),k.length===0&&(!q||p.length==0))return ae[0]+D+ae[1];if(y<0)return ce(p)?l.stylize(RegExp.prototype.toString.call(p),"regexp"):l.stylize("[Object]","special");l.seen.push(p);var se;return q?se=x(l,p,y,C,k):se=k.map(function(ve){return z(l,p,y,C,ve,q)}),l.seen.pop(),B(se,D,ae)}function R(l,p){if(te(p))return l.stylize("undefined","undefined");if(fe(p)){var y="'"+JSON.stringify(p).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return l.stylize(y,"string")}if(Ee(p))return l.stylize(""+p,"number");if(Y(p))return l.stylize(""+p,"boolean");if(W(p))return l.stylize("null","null")}function U(l){return"["+Error.prototype.toString.call(l)+"]"}function x(l,p,y,P,L){for(var k=[],C=0,O=p.length;C<O;++C)me(p,String(C))?k.push(z(l,p,y,P,String(C),!0)):k.push("");return L.forEach(function(D){D.match(/^\d+$/)||k.push(z(l,p,y,P,D,!0))}),k}function z(l,p,y,P,L,k){var C,O,D;if(D=Object.getOwnPropertyDescriptor(p,L)||{value:p[L]},D.get?D.set?O=l.stylize("[Getter/Setter]","special"):O=l.stylize("[Getter]","special"):D.set&&(O=l.stylize("[Setter]","special")),me(P,L)||(C="["+L+"]"),O||(l.seen.indexOf(D.value)<0?(W(y)?O=E(l,D.value,null):O=E(l,D.value,y-1),O.indexOf(`
`)>-1&&(k?O=O.split(`
`).map(function(q){return"  "+q}).join(`
`).slice(2):O=`
`+O.split(`
`).map(function(q){return"   "+q}).join(`
`))):O=l.stylize("[Circular]","special")),te(C)){if(k&&L.match(/^\d+$/))return O;C=JSON.stringify(""+L),C.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(C=C.slice(1,-1),C=l.stylize(C,"name")):(C=C.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),C=l.stylize(C,"string"))}return C+": "+O}function B(l,p,y){var P=l.reduce(function(L,k){return k.indexOf(`
`)>=0,L+k.replace(/\u001b\[\d\d?m/g,"").length+1},0);return P>60?y[0]+(p===""?"":p+`
 `)+" "+l.join(`,
  `)+" "+y[1]:y[0]+p+" "+l.join(", ")+" "+y[1]}o.types=fr;function Q(l){return Array.isArray(l)}o.isArray=Q;function Y(l){return typeof l=="boolean"}o.isBoolean=Y;function W(l){return l===null}o.isNull=W;function K(l){return l==null}o.isNullOrUndefined=K;function Ee(l){return typeof l=="number"}o.isNumber=Ee;function fe(l){return typeof l=="string"}o.isString=fe;function Re(l){return typeof l=="symbol"}o.isSymbol=Re;function te(l){return l===void 0}o.isUndefined=te;function ce(l){return ie(l)&&ue(l)==="[object RegExp]"}o.isRegExp=ce,o.types.isRegExp=ce;function ie(l){return typeof l=="object"&&l!==null}o.isObject=ie;function pe(l){return ie(l)&&ue(l)==="[object Date]"}o.isDate=pe,o.types.isDate=pe;function ee(l){return ie(l)&&(ue(l)==="[object Error]"||l instanceof Error)}o.isError=ee,o.types.isNativeError=ee;function ye(l){return typeof l=="function"}o.isFunction=ye;function le(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||typeof l>"u"}o.isPrimitive=le,o.isBuffer=Mi;function ue(l){return Object.prototype.toString.call(l)}function re(l){return l<10?"0"+l.toString(10):l.toString(10)}var Te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function he(){var l=new Date,p=[re(l.getHours()),re(l.getMinutes()),re(l.getSeconds())].join(":");return[l.getDate(),Te[l.getMonth()],p].join(" ")}o.log=function(){console.log("%s - %s",he(),o.format.apply(o,arguments))},o.inherits=Ei,o._extend=function(l,p){if(!p||!ie(p))return l;for(var y=Object.keys(p),P=y.length;P--;)l[y[P]]=p[y[P]];return l};function me(l,p){return Object.prototype.hasOwnProperty.call(l,p)}var Z=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;o.promisify=function(p){if(typeof p!="function")throw new TypeError('The "original" argument must be of type Function');if(Z&&p[Z]){var y=p[Z];if(typeof y!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(y,Z,{value:y,enumerable:!1,writable:!1,configurable:!0}),y}function y(){for(var P,L,k=new Promise(function(D,q){P=D,L=q}),C=[],O=0;O<arguments.length;O++)C.push(arguments[O]);C.push(function(D,q){D?L(D):P(q)});try{p.apply(this,C)}catch(D){L(D)}return k}return Object.setPrototypeOf(y,Object.getPrototypeOf(p)),Z&&Object.defineProperty(y,Z,{value:y,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(y,t(p))},o.promisify.custom=Z;function ge(l,p){if(!l){var y=new Error("Promise was rejected with a falsy value");y.reason=l,l=y}return p(l)}function T(l){if(typeof l!="function")throw new TypeError('The "original" argument must be of type Function');function p(){for(var y=[],P=0;P<arguments.length;P++)y.push(arguments[P]);var L=y.pop();if(typeof L!="function")throw new TypeError("The last argument must be of type Function");var k=this,C=function(){return L.apply(k,arguments)};l.apply(this,y).then(function(O){process.nextTick(C.bind(null,null,O))},function(O){process.nextTick(ge.bind(null,O,C))})}return Object.setPrototypeOf(p,Object.getPrototypeOf(l)),Object.defineProperties(p,t(l)),p}o.callbackify=T})(Lt);class Ti{constructor(){this.currentAdapter=null,this._activeController=null,this.activeController=null}renderMenuWithSystem(e,t,r="cd-sidebar"){var s,c,d,g;console.debug("Starting renderMenuWithSystem()"),console.debug("renderMenuWithSystem()/01"),this.renderPlainMenu(e,r);const n=((d=(c=(s=t==null?void 0:t.layout)==null?void 0:s.sidebar)==null?void 0:c.menu)==null?void 0:d.menuSystem)||"plain",i=this.menuAdapterFactory(n);console.debug("renderMenuWithSystem()/adapter:",JSON.stringify(i)),(g=this.currentAdapter)!=null&&g.destroy&&(console.debug("renderMenuWithSystem()/02"),this.currentAdapter.destroy()),i&&(console.debug("renderMenuWithSystem()/03"),i.initialize(r,t.id),this.currentAdapter=i),console.debug("renderMenuWithSystem()/04")}renderPlainMenu(e,t="sidebar",r){const n=document.getElementById(t);n&&(console.log("MenuService::renderPlainMenu()/menu:",this.renderMenuHtml(e)),n.innerHTML=`<ul class="cd-menu-root">${this.renderMenuHtml(e)}</ul>`,this.attachClickHandlers(n,e,r))}attachClickHandlers(e,t,r){e.querySelectorAll(".cd-menu-link").forEach(i=>{i.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const c=i.getAttribute("data-id");if(!c)return;const d=this.findMenuItemById(t,c);d&&this.onMenuClick(d,r)})})}findMenuItemById(e,t){for(const r of e){if(r.menuId===t)return r;if(r.children){const n=this.findMenuItemById(r.children,t);if(n)return n}}return null}walkMenu(e,t,r,n,i){var s;for(const c of e){const d=r[n++];d&&d.addEventListener("click",g=>{g.stopPropagation(),this.onMenuClick(c,i)}),(s=c.children)!=null&&s.length&&this.walkMenu(c.children,d,r,n,i)}}onMenuClick(e,t){var r;if(console.debug(`Menu clicked  ID: ${e.menuId}, Label: ${e.label}`),console.debug("MenuService:onMenuClick()/item:",Lt.inspect(e,{depth:2})),e.itemType==="action"&&e.action){console.debug(`[MenuService] Executing action for '${e.label}'`),e.action();return}if(e.itemType==="route"&&e.route&&e.controller){console.debug(`[MenuService] Loading route content for '${e.label}'`),this.loadResource({cdToken:t,item:e});return}if(e.itemType==="template"&&e.template&&e.controller){console.debug(`[MenuService] Loading template for '${e.label}'`),this.loadResource({cdToken:t,item:e});return}if(e.children&&e.children.length>0){console.debug(`[MenuService] Toggling menu node expansion for '${e.label}'`);const n=(r=document.querySelector(`[data-id="${e.menuId}"]`))==null?void 0:r.closest("li.cd-menu-item");if(n){n.classList.toggle("expanded");const i=n.querySelector(".cd-submenu");i&&i.classList.toggle("open")}return}console.warn(`[MenuService] Unhandled menu item type '${e.itemType}' for label '${e.label}'`)}async loadResource(e={}){console.log("MenuService::loadResource()/start..."),console.log("[MenuService][loadResource] options:",e);const{cdToken:t,item:r}=e;if(!r){console.error("MenuService.loadResource() called without a valid MenuItem.");return}const n=$e.getInstance(),i=document.getElementById("cd-main-content");let s;if(this.activeController&&typeof this.activeController.__deactivate=="function"&&(console.log("MenuService::loadResource()/01: Executing __deactivate() on active controller"),await this.activeController.__deactivate()),console.log("MenuService::loadResource()/02: Retrieving controller via cache service"),s=await n.getOrInitializeController(r.route||`${r.moduleId}-${r.label}`,r.controller),!s){console.error(`[MenuService] Failed to initialize controller for route: ${r.route}`);return}let c=0;for(;(!s.uiSystemLoader||!s.svCdAdmin)&&c<10;)console.warn(`[MenuService] Waiting for controller services to initialize... attempt ${c+1}`),await new Promise(d=>setTimeout(d,20)),c++;if(i){console.log("MenuService::loadResource()/03: Injecting template into DOM");let d="";typeof r.template=="function"?d=r.template.call(s):typeof s.__template=="function"?d=s.__template.call(s):d=r.template||"",i.innerHTML=d}typeof s.__activate=="function"&&(console.log("MenuService::loadResource()/04: Executing __activate()"),await s.__activate()),typeof s.__afterInit=="function"&&(console.log("MenuService::loadResource()/05: Executing __afterInit()"),await s.__afterInit()),this.activeController=s,console.log("MenuService::loadResource()/end")}getActiveController(){return this._activeController}setActiveController(e){this._activeController=e}renderMenuHtml(e){return e.map((t,r)=>{const n=t.children&&t.children.length>0,i=t.icon?btoa(JSON.stringify(t.icon)):"",s=t.itemType||"route",c=t.route||"",d=t.menuId||`auto-${r}-${Math.random().toString(36).slice(2,8)}`;return t.menuId=d,`
        <li
          id="menu-item-${d}"
          class="cd-menu-item"
          data-id="${d}"
          data-type="${s}"
          data-route="${c}"
          ${i?`data-icon="${i}"`:""}
          tabindex="0"
          role="button"
        >
          <a href="#" class="cd-menu-link" data-id="${d}">
            <span class="cd-menu-label">${t.label}</span>
            ${n?'<span class="cd-menu-toggle-icon fa fa-chevron-right"></span>':""}
          </a>
          ${n?`<ul class="cd-submenu">${this.renderMenuHtml(t.children)}</ul>`:""}
        </li>
      `}).join("")}menuAdapterFactory(e){switch(e){case"metismenu":return new Qr;case"plain":default:return null}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}assignMenuIds(e,t=""){return e.map(r=>{const n=r.label||r.route||"item",i=`menu-item-${t?t+"-":""}${this.toKebabCase(n)}`,s={...r,menuId:i};return r.children&&r.children.length>0&&(s.children=this.assignMenuIds(r.children,this.toKebabCase(n))),s})}prepareMenu(e){const t=this.assignMenuIds(e);return this.ensureItemTypes(t)}ensureItemTypes(e){return e.map(t=>{let r="route";t.itemType?r=t.itemType:t.action?r="action":t.template?r="template":t.route&&(r="route");const n={...t,itemType:r};return t.children&&t.children.length>0&&(n.children=this.ensureItemTypes(t.children)),n})}}class _i{constructor(e={}){this.context=e.context||"Shell",this.level=e.level||"debug",this.silent=e.silent||!1}shouldLog(e){const t={debug:0,info:1,warn:2,error:3};return t[e]>=t[this.level]}log(e,t,...r){if(this.silent||!this.shouldLog(e))return;const n=`[${this.context.toUpperCase()}] [${e.toUpperCase()}]`;switch(e){case"debug":console.debug(n,t,...r);break;case"info":console.info(n,t,...r);break;case"warn":console.warn(n,t,...r);break;case"error":console.error(n,t,...r);break}}debug(e,...t){this.log("debug",e,...t)}info(e,...t){this.log("info",e,...t)}warn(e,...t){this.log("warn",e,...t)}error(e,...t){this.log("error",e,...t)}setContext(e){this.context=e}setLevel(e){this.level=e}silence(){this.silent=!0}unsilence(){this.silent=!1}}const be=class be{async loadThemeConfig(e="default"){console.debug(`ThemeService::loadThemeConfig(${e})`);const t=await fetch(`/themes/${e}/theme.json`);if(!t.ok)throw new Error(`Failed to load theme config: ${t.statusText}`);const r=await t.json();return be.setActiveTheme(r),r}static setActiveTheme(e){be.currentTheme=e,e!=null&&e.colors&&Object.entries(e.colors).forEach(([t,r])=>{const n=String(r);document.documentElement.style.setProperty(`--cd-${t}-color`,n)})}static get layout(){var e;return((e=be.currentTheme)==null?void 0:e.layout)||{}}static get activeTheme(){return be.currentTheme}};be.currentTheme=null;let jt=be;const Oi="modulepreload",Pi=function(o){return"/"+o},dr={},G=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(t.map(d=>{if(d=Pi(d),d in dr)return;dr[d]=!0;const g=d.endsWith(".css"),h=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":Oi,g||(E.as="script"),E.crossOrigin="",E.href=d,c&&E.setAttribute("nonce",c),document.head.appendChild(E),g)return new Promise((R,U)=>{E.addEventListener("load",R),E.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};let Ci,tt,Dr;const $i=async()=>{if(typeof window>"u")try{const[o,e,t]=await Promise.all([G(()=>import("./__vite-browser-external_fs-DU1_jvsO.js"),[]),G(()=>import("./__vite-browser-external_path-SE2pKm0_.js"),[]),G(()=>import("./url-6qT75ND-.js").then(r=>r.u),[])]);Ci=o,tt=e,Dr=t}catch(o){console.error("[ModuleService] Failed to load Node.js modules:",o)}},X=class X{constructor(){this.modules={},console.debug("[ModuleService][constructor]: starting"),this.isViteMode?(console.debug("[ModuleService] Running under Vite (browser)."),this.modules=Object.assign({"/src/CdShell/app/cd-ai/view/index.js":()=>G(()=>Promise.resolve().then(()=>Bi),void 0),"/src/CdShell/app/cd-geo/view/index.js":()=>G(()=>import("./index-DIGhDJk_.js"),[]),"/src/CdShell/app/coops/view/index.js":()=>G(()=>import("./index-YhLg4ZnN.js"),[]),"/src/CdShell/app/ui-adaptor-port/view/index.js":()=>G(()=>Promise.resolve().then(()=>Fi),void 0),"/src/CdShell/sys/base/view/index.js":()=>G(()=>Promise.resolve().then(()=>Ui),void 0),"/src/CdShell/sys/cd-admin/view/index.js":()=>G(()=>import("./index-tFT50byu.js"),__vite__mapDeps([0,1])),"/src/CdShell/sys/cd-comm/view/index.js":()=>G(()=>import("./index-AeKJsxml.js"),[]),"/src/CdShell/sys/cd-guig/view/index.js":()=>G(()=>Promise.resolve().then(()=>xi),void 0),"/src/CdShell/sys/cd-push/view/index.js":()=>G(()=>import("./index-DMjNbz6u.js"),[]),"/src/CdShell/sys/cd-scheduler/view/index.js":()=>G(()=>Promise.resolve().then(()=>Ni),void 0),"/src/CdShell/sys/cd-store/view/index.js":()=>G(()=>Promise.resolve().then(()=>Vi),void 0),"/src/CdShell/sys/cd-user/view/index.js":()=>G(()=>import("./index-BEx0eJtE.js"),__vite__mapDeps([2,1])),"/src/CdShell/sys/dev-descriptor/view/index.js":()=>G(()=>Promise.resolve().then(()=>Gi),void 0),"/src/CdShell/sys/dev-sync/view/index.js":()=>G(()=>import("./index-Cfy3-rsD.js"),[]),"/src/CdShell/sys/moduleman/view/index.js":()=>G(()=>Promise.resolve().then(()=>zi),void 0),"/src/CdShell/sys/theme/view/index.js":()=>G(()=>Promise.resolve().then(()=>Wi),void 0),"/src/CdShell/sys/utils/view/index.js":()=>G(()=>Promise.resolve().then(()=>qi),void 0)})):console.debug("[ModuleService] Running under Node (non-Vite).")}static getInstance(){return X.instance||(X.instance=new X),X.instance}get isBrowser(){return typeof window<"u"}get isViteMode(){return this.isBrowser}get baseDir(){return this.isViteMode?"/src/CdShell":tt==null?void 0:tt.resolve(process.cwd(),"dist-ts/CdShell")}static async ensureInitialized(){this.initPromise||(this.initPromise=$i()),await this.initPromise}static async preloadModulesSequentially(){const e=X.getInstance();for(const t of this.preloadModules)try{console.debug(`[Preload] Loading ${t.moduleId}`);const n=(await e.loadModule(t.ctx,t.moduleId)).controllers.find(i=>i.name===t.component);if(n!=null&&n.instance&&typeof n.instance.__setup=="function"){const i=n.instance;console.debug(`[Preload] Setting up ${t.component}`),await i.__setup()}else console.warn(`[Preload] Controller component '${t.component}' not found in module ${t.moduleId}.`);console.debug(`[Preload] Completed ${t.component}`)}catch(r){console.error(`[Preload] Failed ${t.moduleId}: ${r}`)}}async loadModule(e,t){await X.ensureInitialized(),X.hasPreloaded||(X.hasPreloaded=!0,await X.preloadModulesSequentially()),console.debug("ModuleService::loadModule()/01:");const r=this.isViteMode,n=this.baseDir,i=r?`src/CdShell/${e}/${t}/view/index.js`:`${n}/${e}/${t}/view/index.js`;if(console.debug("[ModuleService] expectedPathFragment:",i),r){console.debug("[ModuleService] 1");const d=Object.keys(this.modules).find(g=>g.replace(/^\.?\//,"")===i);if(!d)throw console.error("[ModuleService] Available module keys:",Object.keys(this.modules)),new Error(`[ModuleService] Module not found for ctx=${e}, moduleId=${t}`);try{console.debug("[ModuleService][loadModule] pathKey:",d);const g=this.modules[d],E=(await g()).module;if(!E)throw new Error(`Missing 'module' export in: ${d}`);console.debug("[ModuleService][loadModule] moduleInfo:",E),console.debug("[ModuleService][loadModule] moduleInfo.controllers:",E.controllers);const R=E.controllers.find(x=>x.default===!0);return E.isDefault&&R||console.debug(`[ModuleService] Loaded module metadata passively: ${t}. Setup skipped.`),console.log(`[ModuleService] Loaded '${t}' (Vite mode) at ${new Date().toLocaleString()}`),E}catch(g){throw console.error("[ModuleService] Browser import failed:",g),g}}const c=`${n.replace(/\\/g,"/").replace(/\/+$/,"")}/${e}/${t}/view/index.js`;console.debug("[ModuleService] Importing (Node):",c);try{const g=await import(Dr.pathToFileURL(c).href);return console.log(`[ModuleService] Loaded '${t}' (Node mode) at ${new Date().toLocaleString()}`),g.module}catch(d){throw console.error("[ModuleService] Node import failed:",d),d}}async getAllowedModules(){const e=[],t=await this.loadModule("sys","cd-user");t&&(t.isDefault=!0,e.push(t));const r=await this.loadModule("sys","cd-admin");return r&&(r.isDefault=!1,e.push(r)),e}};X.initPromise=null,X.hasPreloaded=!1,X.preloadModules=[{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentService"},{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentClientService"}];let ct=X;class Ii{findControllerInfoByRoute(e,t){const r=t.split("/"),n=r[r.length-1];return console.log("[ControllerService][findControllerInfoByRoute] controllerName:",n),console.log("[ControllerService][findControllerInfoByRoute] mod:",Lt.inspect(e,{depth:2})),e.controllers.find(i=>i.name===n)}}class Ae{constructor(e){this.configService=e,this.cache=new Map}static getInstance(e){if(!Ae.instance){if(!e)throw new Error("SysCacheService must be initialized with ConfigService on first instantiation.");Ae.instance=new Ae(e)}return Ae.instance}setLoaders(e,t){this._uiSystemLoader=e,this._uiThemeLoader=t}async loadAndCacheAll(){if(!this._uiSystemLoader||!this._uiThemeLoader)throw new Error("SysCacheService: loaders must be set before load.");if(this.cache.size>0)return;console.log("[SysCacheService] 01: Starting Eager Load");const t=(await this.configService.loadConfig()).uiConfig;this.cache.set("uiConfig",t);const r=await this._uiSystemLoader.fetchAvailableSystems(t);console.log("[SysCacheService] uiSystemsData:",r);const n=r.map(h=>({id:h.id,name:h.name,version:h.version,description:h.description,cssUrl:h.cssUrl,jsUrl:h.jsUrl,assetPath:h.assetPath,stylesheets:h.stylesheets||[],scripts:h.scripts||[],themesAvailable:h.themesAvailable||[],themeActive:h.themeActive||null,conceptMappings:h.conceptMappings||{},directiveMap:h.directiveMap||{},tokenMap:h.tokenMap||{},containers:h.containers||[],components:h.components||[],renderRules:h.renderRules||{},metadata:h.metadata||{},extensions:h.extensions||{},author:h.author,license:h.license,repository:h.repository,displayName:h.displayName||h.name})),i=n.map(h=>({id:h.id,name:h.name,displayName:h.displayName,themesAvailable:h.themesAvailable}));console.log("[SysCacheService] Normalized Systems:",i);const s=await this._uiThemeLoader.fetchAvailableThemes(t),c=(s.themes||[]).map(h=>({id:h.id,name:h.name})),d=(s.variants||[]).map(h=>({id:h.id,name:h.name})),g=s.descriptors||[];this.cache.set("uiSystems",i),this.cache.set("uiSystemDescriptors",n),this.cache.set("themes",c),this.cache.set("formVariants",d),this.cache.set("themeDescriptors",g),this.cache.set("uiConfigNormalized",s.uiConfig||t),console.log(`[SysCacheService] Load complete. Systems: ${i.length}, Themes: ${c.length}`)}getUiSystems(){return this.cache.get("uiSystems")||[]}getUiSystemDescriptors(){return this.cache.get("uiSystemDescriptors")||[]}getThemes(){return this.cache.get("themes")||[]}getFormVariants(){return this.cache.get("formVariants")||[]}getThemeDescriptors(){return this.cache.get("themeDescriptors")||[]}getConfig(){return this.cache.get("uiConfigNormalized")||{}}get(e){return this.cache.get(e)}get uiSystemLoader(){return this._uiSystemLoader}get uiThemeLoader(){return this._uiThemeLoader}async ensureReady(){this.cache.size===0&&await this.loadAndCacheAll()}}function M(o,e={}){console.log(`%c[CSS-DIAG] ${o}`,"background:#222;color:#0f0;padding:2px 4px;border-radius:3px",e)}function ji(){const o=document.getElementById("cd-sidebar");if(!o)return;const e=window.getComputedStyle(o);console.warn("%c[SIDEBAR-DIAG] Sidebar State:","background:#440;color:#fff;padding:3px"),console.log("display:",e.display),console.log("position:",e.position),console.log("width:",e.width),console.log("flex-direction:",e.flexDirection),console.log("css file winning:",o)}const xt=class xt{static register(e,t){console.log("[UiSystemAdapterRegistry] register:",e,t),this.registry.set(e,t)}static get(e){return this.registry.get(e)||null}static list(){return Array.from(this.registry.keys())}};xt.registry=new Map;let de=xt;const Li=Object.freeze(Object.defineProperty({__proto__:null,UiSystemAdapterRegistry:de},Symbol.toStringTag,{value:"Module"}));class ki{async activate(e){console.log(`[${this.constructor.name}] activate() descriptor.id =`,e==null?void 0:e.id),console.log(`[${this.constructor.name}] activate() descriptor.version =`,e==null?void 0:e.version)}async deactivate(){document.documentElement.removeAttribute("data-bs-theme")}async applyTheme(e){try{if(!e)return;let t;typeof e=="string"?t=e==="dark"?"dark":"light":typeof e=="object"&&(t=e.mode||(e.id==="dark"?"dark":"light")),document.documentElement.setAttribute("data-bs-theme",t==="dark"?"dark":"light"),console.log("[Bootstrap502Adapter] applied bs-theme:",t)}catch(t){console.warn("[Bootstrap502Adapter] applyTheme error",t)}}}de.register("bootstrap-502",new ki);class Rr{constructor(){this.descriptor=null,this.observer=null,this.appliedSet=new WeakSet,console.log("%c[Bootstrap538AdapterService] constructor()","color:#6cf")}async activate(e){M("[Bootstrap538Adapter] activate() START",{id:e==null?void 0:e.id}),this.descriptor=e||null,e!=null&&e.conceptMappings?console.log("%c[Bootstrap538Adapter] Loaded conceptMappings:","color:#0ff",e.conceptMappings):console.warn("%c[Bootstrap538Adapter] descriptor.conceptMappings missing!","color:orange"),M("[Bootstrap538Adapter] Initial mapAll() pass"),this.mapAll(),this.observeMutations(),M("[Bootstrap538Adapter] activate() COMPLETE",{active:e==null?void 0:e.id})}async deactivate(){M("[Bootstrap538Adapter] deactivate() START");try{document.documentElement.removeAttribute("data-bs-theme"),console.log("[Bootstrap538Adapter] removed data-bs-theme")}catch{}if(this.observer){try{this.observer.disconnect(),console.log("[Bootstrap538Adapter] MutationObserver disconnected")}catch{}this.observer=null}this.descriptor=null,this.appliedSet=new WeakSet,M("[Bootstrap538Adapter] deactivate() COMPLETE")}async applyTheme(e){M("[Bootstrap538Adapter] applyTheme()",{themeDescriptorOrId:e});try{if(!e){console.warn("[Bootstrap538Adapter] applyTheme ignored (null theme)");return}let t;typeof e=="string"?t=e==="dark"?"dark":"light":typeof e=="object"&&(t=e.mode||(e.id==="dark"?"dark":"light")),document.documentElement.setAttribute("data-bs-theme",t==="dark"?"dark":"light"),M("[Bootstrap538Adapter] applied Bootstrap theme",{mode:t})}catch(t){console.warn("[Bootstrap538Adapter] applyTheme error",t)}}getMapping(e){console.log("[Bootstrap538Adapter] getMapping() this.descriptor:",this.descriptor);const t=this.descriptor&&this.descriptor.conceptMappings&&this.descriptor.conceptMappings[e]||void 0;return console.log(`%c[Bootstrap538Adapter] getMapping('${e}') =`,"color:#9f9",t),t}applyMappingToElement(e,t){if(t){if(this.appliedSet.has(e)){t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n));return}console.log("%c[Bootstrap538Adapter] Applying mapping to element:","color:#7ff;",{tag:e.tagName,mapping:t}),t.class&&t.class.split(/\s+/).forEach(r=>{r&&e.classList.add(r)}),t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n)),this.appliedSet.add(e)}}mapButtons(){const e=this.getMapping("button");if(!e)return;const r=document.querySelectorAll("button[cdButton], button.cd-button");M("[Bootstrap538Adapter] mapButtons()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapInputs(){const e=this.getMapping("input");if(!e)return;const r=document.querySelectorAll("input[cdFormControl], textarea[cdFormControl], select[cdFormControl]");M("[Bootstrap538Adapter] mapInputs()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapFormGroups(){const e=this.getMapping("formGroup");if(!e)return;const r=document.querySelectorAll(".cd-form-field");M("[Bootstrap538Adapter] mapFormGroups()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapOtherConcepts(){const e=this.descriptor&&this.descriptor.conceptMappings||{},t=Object.keys(e).filter(r=>!["button","input","formGroup"].includes(r));M("[Bootstrap538Adapter] mapOtherConcepts()",{concepts:t}),t.forEach(r=>{const n=e[r],i=`[data-cd-${r}], .cd-${r}`;document.querySelectorAll(i).forEach(c=>this.applyMappingToElement(c,n))})}mapAll(){console.log("%c[Bootstrap538Adapter] mapAll()  START","background:#444;color:#aaf;padding:2px");try{this.mapButtons(),this.mapInputs(),this.mapFormGroups(),this.mapOtherConcepts()}catch(e){console.warn("[Bootstrap538Adapter] mapAll error",e)}console.log("%c[Bootstrap538Adapter] mapAll()  END","background:#444;color:#aaf;padding:2px")}observeMutations(){if(!this.observer){M("[Bootstrap538Adapter] MutationObserver ATTACH"),this.observer=new MutationObserver(e=>{console.log("%c[Bootstrap538Adapter] Mutation detected  scheduling mapAll()","color:#ffa;"),"requestIdleCallback"in window?window.requestIdleCallback(()=>this.mapAll()):setTimeout(()=>this.mapAll(),16)});try{this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1})}catch(e){console.warn("[Bootstrap538Adapter] observer failed to attach",e),this.observer=null}}}}de.register("bootstrap-538",new Rr);class Br{constructor(){this.descriptor=null,this.observer=null,this.appliedSet=new WeakSet,this.mdcInitQueued=!1,this.mdcInstances=new Set,console.log("%c[MaterialDesignAdapter] constructor()","color:#8cf")}async activate(e){M("[MaterialDesignAdapter] activate() START",{id:e==null?void 0:e.id}),this.descriptor=e||null,e!=null&&e.conceptMappings?console.log("%c[MaterialDesignAdapter] Loaded conceptMappings:","color:#0ff",e.conceptMappings):console.warn("[MaterialDesignAdapter] descriptor.conceptMappings missing!"),this.mapAll(),this.observeMutations(),M("[MaterialDesignAdapter] activate() COMPLETE",{active:e==null?void 0:e.id})}async deactivate(){M("[MaterialDesignAdapter] deactivate() START");try{document.documentElement.removeAttribute("data-md-theme")}catch{}if(this.observer){try{this.observer.disconnect()}catch{}this.observer=null}this.descriptor=null,this.appliedSet=new WeakSet;try{this.mdcInstances.forEach(e=>{var t;try{(t=e.destroy)==null||t.call(e)}catch{}}),this.mdcInstances.clear()}catch{}M("[MaterialDesignAdapter] deactivate() COMPLETE")}async applyTheme(e){M("[MaterialDesignAdapter] applyTheme()",{themeDescriptorOrId:e});try{if(!e){console.warn("[MaterialDesignAdapter] applyTheme ignored (null theme)");return}let t;typeof e=="string"?t=e==="dark"?"dark":"light":typeof e=="object"&&(t=e.mode||(e.id==="dark"?"dark":"light")),document.documentElement.setAttribute("data-md-theme",t==="dark"?"dark":"light"),M("[MaterialDesignAdapter] applied Material theme",{mode:t})}catch(t){console.warn("[MaterialDesignAdapter] applyTheme error",t)}}getMapping(e){const t=this.descriptor&&this.descriptor.conceptMappings&&this.descriptor.conceptMappings[e]||void 0;return console.log(`%c[MaterialDesignAdapter] getMapping('${e}') =`,"color:#9f9",t),t}applyMappingToElement(e,t){if(t){if(this.appliedSet.has(e)){t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n));return}console.log("%c[MaterialDesignAdapter] Applying mapping to element:","color:#7ff;",{tag:e.tagName,mapping:t}),t.class&&t.class.split(/\s+/).forEach(r=>r&&e.classList.add(r)),t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n)),this.appliedSet.add(e)}}prepareMdcDom(e){var g;if(!e)return null;if(e.dataset.mdTransformed==="1")return e.querySelector(".mdc-text-field, .cd-md-text-field")||null;const t=e.querySelector("input, textarea, select"),r=e.querySelector("label");if(!t)return console.warn("[prepareMdcDom] no input/textarea/select inside field  skipping",{field:e}),null;const n=(((g=r==null?void 0:r.textContent)==null?void 0:g.trim())||t.getAttribute("placeholder")||t.name||"").trim();try{"placeholder"in t&&(t.placeholder="")}catch{}t.id||(t.id=`mdc-${Math.random().toString(36).slice(2,8)}`);const i=document.createElement("label");i.className="mdc-text-field mdc-text-field--filled cd-md-text-field";const s=document.createElement("span");s.className="mdc-text-field__ripple";const c=document.createElement("span");c.className="mdc-floating-label",c.setAttribute("for",t.id),c.textContent=n||"",t.classList.add("mdc-text-field__input");const d=document.createElement("span");d.className="mdc-line-ripple",i.appendChild(s),i.appendChild(c),i.appendChild(t),i.appendChild(d);try{e.replaceWith(i),i.dataset.mdTransformed="1"}catch(h){return console.warn("[prepareMdcDom] replaceWith failed",h,{field:e,wrapper:i}),null}return i}attachCssFallback(e){try{const t=e.querySelector("input, textarea, select");if(!t)return;t.value&&t.value.length>0&&e.classList.add("mdc-text-field--focused"),t.__cd_md_handlers_attached||(t.addEventListener("focus",()=>e.classList.add("mdc-text-field--focused")),t.addEventListener("blur",()=>{(!t.value||t.value.length===0)&&e.classList.remove("mdc-text-field--focused")}),t.__cd_md_handlers_attached=!0)}catch(t){console.warn("[attachCssFallback] error",t)}}initMdcTextField(e){if(e)try{const t=window.mdc;if(!t||!t.textField||!t.textField.MDCTextField){this.attachCssFallback(e);return}if(e.__cd_mdc_initialized)return;try{const r=new t.textField.MDCTextField(e);this.mdcInstances.add(r),e.__cd_mdc_initialized=!0,console.debug("[MaterialDesignAdapter] MDCTextField constructed",{wrapper:e,inst:r})}catch(r){console.warn("[MaterialDesignAdapter] MDCTextField construction failed  falling back to CSS handlers",r),e.__cd_mdc_initialized=!1,this.attachCssFallback(e)}}catch(t){console.error("[MaterialDesignAdapter] initMdcTextField fatal",t),this.attachCssFallback(e)}}scheduleMdcInit(){this.mdcInitQueued||(this.mdcInitQueued=!0,setTimeout(()=>{this.mdcInitQueued=!1,document.querySelectorAll(".cd-md-text-field").forEach(e=>{e.__cd_mdc_initialized||this.initMdcTextField(e)})},25))}mapButtons(){const e=this.getMapping("button");if(!e)return;const r=document.querySelectorAll("button[cdButton], button.cd-button");M("[MaterialDesignAdapter] mapButtons()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapInputs(){const e=this.getMapping("input");if(!e)return;const t=Array.from(document.querySelectorAll(".cd-form-field"));M("[MaterialDesignAdapter] mapInputs()",{candidates:t.length}),t.forEach((r,n)=>{try{console.debug(`[MaterialDesignAdapter] mapInputs: FIELD #${n}`,{field:r});const i=this.prepareMdcDom(r);if(!i){console.debug("[MaterialDesignAdapter] mapInputs: prepareMdcDom returned null (skipping)");return}e.attrs&&Object.entries(e.attrs).forEach(([s,c])=>i.setAttribute(s,c)),this.appliedSet.add(i),this.initMdcTextField(i),this.scheduleMdcInit(),console.debug("[MaterialDesignAdapter] mapInputs: transformed wrapper",{wrapper:i})}catch(i){console.warn("[MaterialDesignAdapter] mapInputs error",i)}})}mapFormGroups(){const e=this.getMapping("formGroup");if(!e)return;const r=document.querySelectorAll(".cd-form-field");M("[MaterialDesignAdapter] mapFormGroups()",{count:r.length}),r.forEach(n=>{this.applyMappingToElement(n,e);try{this.prepareMdcDom(n)}catch{}})}mapOtherConcepts(){const e=this.descriptor&&this.descriptor.conceptMappings||{},t=Object.keys(e).filter(r=>!["button","input","formGroup"].includes(r));M("[MaterialDesignAdapter] mapOtherConcepts()",{concepts:t}),t.forEach(r=>{const n=e[r],i=`[data-cd-${r}], .cd-${r}`;document.querySelectorAll(i).forEach(c=>{this.applyMappingToElement(c,n);try{this.prepareMdcDom(c)}catch{}})})}mapAll(){console.log("%c[MaterialDesignAdapter] mapAll()  START","background:#223;color:#9cf;padding:2px");try{this.mapButtons(),this.mapInputs(),this.mapFormGroups(),this.mapOtherConcepts(),this.scheduleMdcInit()}catch(e){console.warn("[MaterialDesignAdapter] mapAll error",e)}console.log("%c[MaterialDesignAdapter] mapAll()  END","background:#223;color:#9cf;padding:2px")}observeMutations(){if(!this.observer){M("[MaterialDesignAdapter] MutationObserver ATTACH"),this.observer=new MutationObserver(e=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>this.mapAll()):setTimeout(()=>this.mapAll(),24)});try{this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1})}catch(e){console.warn("[MaterialDesignAdapter] observer failed to attach",e),this.observer=null}}}}de.register("material-design",new Br);class Di{async activate(e){console.log(`[${this.constructor.name}] activate() descriptor.id =`,e==null?void 0:e.id),console.log(`[${this.constructor.name}] activate() descriptor.version =`,e==null?void 0:e.version)}async deactivate(){document.documentElement.removeAttribute("data-md-theme")}async applyTheme(e){if(!e)return;const t=typeof e=="string"?e:e.mode;t==="dark"?(document.documentElement.classList.add("md-dark"),document.documentElement.classList.remove("md-light")):(document.documentElement.classList.remove("md-dark"),document.documentElement.classList.add("md-light")),console.log("[MaterialAdapter] applyTheme:",t)}}de.register("plain",new Di);new Rr,new Br;const Mt={id:"bootstrap-538",version:"5.3.8",themeActive:"light"},Se=class Se{constructor(e){this.activeSystem=null,this.sysCache=e}static getInstance(e){if(!Se.instance){if(!e)throw new Error("UiSystemLoaderService.getInstance requires SysCacheService on first call.");Se.instance=new Se(e)}return Se.instance}async fetchAvailableSystems(e){const t=e.uiSystemBasePath||"/public/assets/ui-systems/",r=de.list();console.log("[UiSystemLoaderService] Registered UI Systems:",r);const n=[];for(const i of r){const s=`${t}${i}/descriptor.json`;try{console.log(`[UiSystemLoaderService] Loading descriptor: ${s}`);const c=await fetch(s);if(!c.ok)throw new Error(`HTTP ${c.status}`);const d=await c.json(),g=`${t}${i}/`;n.push({...d,id:i,cssUrl:d.cssUrl?g+d.cssUrl:void 0,jsUrl:d.jsUrl?g+d.jsUrl:void 0,stylesheets:(d.stylesheets||[]).map(h=>g+h),scripts:(d.scripts||[]).map(h=>g+h),themesAvailable:d.themesAvailable||[],themeActive:d.themeActive||null,conceptMappings:d.conceptMappings||{},directiveMap:d.directiveMap||{}})}catch(c){console.warn(`[UiSystemLoaderService] Failed to load ${s}`,c);const d=`${t}${i}/`;n.push({id:i,name:i,version:"unknown",cssUrl:`${d}${i}.min.css`,jsUrl:`${d}${i}.min.js`,stylesheets:[],scripts:[],conceptMappings:{},themesAvailable:[],themeActive:null})}}return n}list(){return this.sysCache.get("uiSystems")||[]}getSystemById(e){return(this.sysCache.get("uiSystems")||[]).find(r=>r.id===e)}async activate(e){var d;if(M("[UiSystemLoaderService.activate] START",{id:e}),await this.sysCache.ensureReady(),!e){const g=(d=this.detectUiSystem)==null?void 0:d.call(this);g!=null&&g.id&&(e=g.id)}const t=this.getFullDescriptor(e);console.log("[UiSystemLoaderService.activate] descriptorFromCache:",t);const r={id:e,cssUrl:`/assets/ui-systems/${e}/${e}.min.css`,jsUrl:`/assets/ui-systems/${e}/${e}.min.js`,assetPath:`/assets/ui-systems/${e}`,stylesheets:[],scripts:[],conceptMappings:{},directiveMap:{},metadata:{},extensions:{}},n=t||r;this.activeSystem=n;try{window.CdActiveUiDescriptor=n,window.CD_ACTIVE_UISYSTEM=e,window.CdShellActiveUiSystem=e}catch(g){console.warn("[UiSystemLoaderService.activate] Could not set global descriptor",g)}document.querySelectorAll("link[data-cd-uisystem], script[data-cd-uisystem]").forEach(g=>g.remove()),M("[UiSystemLoaderService.activate] REMOVED OLD SYSTEM ASSETS",{});const i=n.cssUrl||`${n.assetPath||`/assets/ui-systems/${e}`}/bootstrap.min.css`,s=n.jsUrl||`${n.assetPath||`/assets/ui-systems/${e}`}/${e}.min.js`,c=`${n.assetPath||`/assets/ui-systems/${e}`}/bridge.css`;M("[UiSystemLoaderService.activate] RESOLVED PATHS",{cssPath:i,jsPath:s,bridgeCssPath:c});try{await this.loadCSS(i,e),M("[UiSystemLoaderService.activate] CSS LOADED",{cssPath:i})}catch(g){M("[UiSystemLoaderService.activate] CSS LOAD FAILED",{cssPath:i,err:g})}try{await this.loadCSS(c,`${e}-bridge`),M("[UiSystemLoaderService.activate] BRIDGE CSS LOADED",{bridgeCssPath:c})}catch(g){console.log(`[UiSystemLoaderService.activate] bridge.css not found for ${e} (optional)`),M("[UiSystemLoaderService.activate] BRIDGE CSS LOAD FAILED",{bridgeCssPath:c,err:g})}try{await this.loadScript(s,e),M("[UiSystemLoaderService.activate] SCRIPT LOADED",{jsPath:s})}catch(g){console.warn("[UiSystemLoaderService.activate] script load failed",g),M("[UiSystemLoaderService.activate] SCRIPT LOAD FAILED",{jsPath:s,err:g})}try{const{UiSystemAdapterRegistry:g}=await G(async()=>{const{UiSystemAdapterRegistry:E}=await Promise.resolve().then(()=>Li);return{UiSystemAdapterRegistry:E}},[]),h=g.get(e);h&&typeof h.activate=="function"?(await h.activate(n),M("[UiSystemLoaderService.activate] ADAPTER ACTIVATED",{id:e})):console.log(`[UiSystemLoaderService.activate] No in-app adapter registered for ${e} (skipping)`)}catch(g){console.warn("[UiSystemLoaderService.activate] adapter activation failed",g)}M("[UiSystemLoaderService.activate] COMPLETE",{activeSystem:e})}async applyTheme(e,t){M("[UiSystemLoaderService.applyTheme] start",{systemId:e,themeId:t});const r=de.get(e);if(console.log("[UiSystemLoaderService.applyTheme] adapter received:",r),!r){console.warn("[UiSystemLoaderService.applyTheme] no adapter for",e);return}const n=this.sysCache.get("themeDescriptors")||[];console.log("[UiSystemLoaderService][applyTheme] descriptors:",n);const i=n.find(s=>s.id===t);console.log("[UiSystemLoaderService][applyTheme] descriptors:",i),await r.applyTheme(i||t),M("[UiSystemLoaderService.applyTheme] done",{systemId:e,themeId:t})}async loadCSS(e,t){return M("[UiSystemLoaderService.loadCSS] REQUEST",{path:e,id:t}),new Promise((r,n)=>{try{const i=document.head||document.getElementsByTagName("head")[0];if(!i)return n(new Error("document.head missing"));const s=document.createElement("link");s.rel="stylesheet",s.href=e,s.setAttribute("data-cd-uisystem",t),s.setAttribute("data-cd-origin","ui-system"),s.onload=()=>{const c=s.href;M("[UiSystemLoaderService.loadCSS] LOADED",{path:e,id:t,resolved:c,order:Array.from(i.querySelectorAll("link")).map(d=>d.href)}),r(c)},s.onerror=c=>{M("[UiSystemLoaderService.loadCSS] ERROR",{path:e,id:t,ev:c}),n(new Error(`Failed to load CSS: ${e}`))},i.insertAdjacentElement("beforeend",s)}catch(i){M("[UiSystemLoaderService.loadCSS] EXCEPTION",{path:e,id:t,err:i}),n(i)}})}async loadScript(e,t){return new Promise((r,n)=>{try{const i=document.createElement("script");i.src=e,i.async=!0,i.setAttribute("data-cd-uisystem",t),i.setAttribute("data-cd-origin","ui-system"),i.onload=()=>r(),i.onerror=c=>n(c);const s=document.body||document.getElementsByTagName("body")[0];if(!s)return n(new Error("document.body missing"));s.appendChild(i)}catch(i){n(i)}})}getActive(){return console.log("[UiSystemLoaderService][getActive] start."),this.activeSystem}detectFromRuntime(){return window.CdShellActiveUiSystem||window.CD_ACTIVE_UISYSTEM||null}detectFromMeta(){const e=document.querySelector('meta[name="cd-uiform"]');return(e==null?void 0:e.content)||null}detectUiSystem(){const e=this.detectFromRuntime();if(e)return{...Mt,id:e};const t=this.detectFromMeta();return t?{...Mt,id:t}:Mt}getFullDescriptor(e){return(this.sysCache.get("uiSystemDescriptors")||[]).find(r=>r.id===e)}};Se.instance=null;let lt=Se;const we=class we{constructor(){this.config=null,this.CONFIG_PATH="/shell.config.json"}static getInstance(){return we.instance||(we.instance=new we),we.instance}async loadConfig(){if(this.config)return this.config;try{const e=await fetch(this.CONFIG_PATH);if(!e.ok)throw new Error(`Failed to load config ${e.status}`);return this.config=await e.json(),console.log("[ConfigService] loaded config:",this.config),this.config}catch(e){return console.error("[ConfigService] loadConfig error:",e),this.config={appName:"Corpdesk",fallbackTitle:"Corpdesk",appVersion:"0.0.0",appDescription:"",themeConfig:{currentThemePath:"/themes/default/theme.json",accessibleThemes:["default","dark"]},defaultModulePath:"sys/cd-user",logLevel:"debug",uiConfig:{defaultUiSystemId:"bootstrap-538",defaultThemeId:"default",defaultFormVariant:"standard",uiSystemBasePath:"/public/assets/ui-systems/"}},this.config}}getUiConfig(){if(!this.config)throw new Error("ConfigService: config not loaded; call loadConfig()");return this.config.uiConfig}};we.instance=null;let Le=we;const oe=class oe{constructor(e){this.configService=Le.getInstance(),this.sysCache=e}static getInstance(e){if(!oe.instance){if(!e)throw new Error("UiThemeLoaderService.getInstance requires SysCacheService on first call.");oe.instance=new oe(e)}return oe.instance}async fetchAvailableThemes(e){var s,c;console.log("[UiThemeLoaderService][fetchAvailableThemes] start",e);const t=e&&e.accessibleThemes||((c=(s=this.configService.config)==null?void 0:s.themeConfig)==null?void 0:c.accessibleThemes)||["default","dark"],r=[];for(const d of t){const g=`/themes/${d}/theme.json`;try{const h=await fetch(g);if(!h.ok){console.warn(`[UiThemeLoaderService] theme descriptor not found: ${g}`);continue}const E=await h.json();r.push(E)}catch(h){console.warn(`[UiThemeLoaderService] error fetching theme descriptor ${g}`,h)}}return{themes:r.map(d=>({id:d.id,name:d.name})),variants:[{id:"standard",name:"Standard"},{id:"compact",name:"Compact"},{id:"floating",name:"Floating"}],descriptors:r,uiConfig:e}}async loadThemeById(e){M("[UiThemeLoaderService.loadThemeById] start",{themeId:e}),document.querySelectorAll("link[data-cd-theme]").forEach(n=>n.remove());const t=this.getThemeDescriptor(e);if(!t){M("[UiThemeLoaderService.loadThemeById] descriptor not found",{themeId:e});const n=`/themes/${e}/theme.css`;await this.injectStyle(n,e,"theme");return}const r=t.css||t.cssPath||`/themes/${e}/theme.css`;await this.injectStyle(r,e,"theme"),M("[UiThemeLoaderService.loadThemeById] loaded",{themeId:e,cssPath:r})}getThemeDescriptor(e){return(this.sysCache.get("themeDescriptors")||[]).find(r=>r.id===e)}async loadFormVariant(e="standard"){document.querySelectorAll("link[data-cd-form]").forEach(r=>r.remove());const t=`/themes/common/forms/variants/cd-form-${e}.css`;await this.injectStyle(t,e,"form")}async injectStyle(e,t,r="theme"){return new Promise((n,i)=>{try{const s=document.head||document.getElementsByTagName("head")[0];if(!s)return i(new Error("document.head missing"));const c=document.createElement("link");c.rel="stylesheet",c.href=e,r==="theme"?c.setAttribute("data-cd-theme",t):c.setAttribute("data-cd-form",t),c.onload=()=>n(),c.onerror=d=>i(new Error(`failed to load ${e}`)),s.insertAdjacentElement("beforeend",c)}catch(s){i(s)}})}getActiveThemeId(){return console.log("[UiThemeLoaderService][getActiveThemeId] start."),localStorage.getItem(oe.ACTIVE_THEME_KEY)||""}getActiveFormVariantId(){return localStorage.getItem(oe.ACTIVE_FORM_VARIANT_KEY)||"standard"}};oe.ACTIVE_THEME_KEY="cd-active-theme-id",oe.ACTIVE_FORM_VARIANT_KEY="cd-active-form-variant",oe.instance=null;let ut=oe;class Ri{constructor(){this.logger=new _i,this.svConfig=new Le,this.svSysCache=new Ae(this.svConfig)}async init(){this.logger.debug("[Main] init(): starting"),typeof window>"u"?(this.logger.debug("[Main] Running in Node  awaiting ensureInitialized()"),await ct.ensureInitialized()):this.logger.debug("[Main] Running in browser  skipping ensureInitialized()"),this.svConfig=new Le,this.svSysCache=new Ae(this.svConfig),this.svModule=new ct,this.svMenu=new Ti,this.svController=new Ii,this.svTheme=new jt;const e=await this.loadShellConfig();e.logLevel&&this.logger.setLevel(e.logLevel),this.logger.debug("[Main] init(): completed")}async run(){var x,z;this.logger.setLevel("debug"),this.logger.debug("starting bootstrapShell()"),M("Main.run() started");const e=await this.loadShellConfig();e.logLevel&&this.logger.setLevel(e.logLevel),this.svUiSystemLoader=lt.getInstance(this.svSysCache),this.svUiThemeLoader=ut.getInstance(this.svSysCache),this.svSysCache.setLoaders(this.svUiSystemLoader,this.svUiThemeLoader),await this.svSysCache.loadAndCacheAll(),M("Cache loaded"),await this.applyStartupUiSettings(),M("UI-System + Theme applied");const t=await this.svTheme.loadThemeConfig();M("ThemeConfig loaded",t),document.title=e.appName||e.fallbackTitle||"Corpdesk";const r=document.getElementById("cd-logo");r&&t.logo&&(r.src=t.logo);const n=await this.svModule.getAllowedModules(),i=n.find(B=>B.isDefault),s=(x=i==null?void 0:i.controllers.find(B=>B.default))==null?void 0:x.name;M("Modules Loaded",{allowedModules:n});const c=n.flatMap(B=>{const Q=Y=>Y.map(W=>{if(W.itemType==="route"&&W.route){const K=this.svController.findControllerInfoByRoute(B,W.route);K&&(W.controller=K.instance,W.template=typeof K.template=="function"?K.template:()=>K.template,W.moduleId=B.moduleId,B.isDefault&&K.name===s&&(W.moduleDefault=!0))}return W.children&&(W.children=Q(W.children)),W});return Q(B.menu||[])}),d=this.svMenu.prepareMenu(c);M("Menu prepared",d);try{const Q=await(await fetch(e.themeConfig.currentThemePath)).json();this.svMenu.renderMenuWithSystem(d,Q);const Y=document.getElementById("cd-sidebar");Y&&(!Y.innerHTML||Y.innerHTML.trim()==="")&&this.svMenu.renderPlainMenu(d,"cd-sidebar"),M("Sidebar rendered"),ji()}catch(B){console.error("[Main] Failed rendering menu",B)}try{const B=d.find(Y=>Y.label===(i==null?void 0:i.moduleId)),Q=(z=B==null?void 0:B.children)==null?void 0:z.find(Y=>Y.moduleDefault);Q&&await this.svMenu.loadResource({item:Q}),M("Default controller loaded")}catch(B){console.warn("[Main] auto-load default view failed",B)}const g=document.getElementById("cd-burger"),h=document.getElementById("cd-sidebar"),E=document.getElementById("cd-overlay"),R=()=>window.matchMedia("(max-width: 900px)").matches,U=()=>{R()||(h.classList.remove("open"),E.classList.add("hidden"),g.classList.remove("open"))};g&&h&&E&&(g.addEventListener("click",()=>{g.classList.toggle("open"),h.classList.toggle("open"),E.classList.toggle("hidden")}),E.addEventListener("click",()=>{g.classList.remove("open"),h.classList.remove("open"),E.classList.add("hidden")}),window.addEventListener("resize",U),U()),this.logger.debug("bootstrapShell(): run() complete"),M("Main.run() complete")}async applyStartupUiSettings(){Le.getInstance(),await this.svSysCache.ensureReady();const e=this.svSysCache.get("uiConfig");if(!e){console.warn("[Main.applyStartupUiSettings] uiConfig missing");return}const t=e.defaultUiSystemId,r=e.defaultThemeId;M("[MAIN.applyStartupUiSettings] start",{systemId:t,themeId:r});const n=lt.getInstance(this.svSysCache),i=ut.getInstance(this.svSysCache);try{await n.activate(t),M("[MAIN.applyStartupUiSettings] ui-system activated",{systemId:t})}catch(s){console.warn("[MAIN.applyStartupUiSettings] activate failed",s),M("[MAIN.applyStartupUiSettings] activate failed",{err:s})}try{await n.loadCSS("/themes/common/base.css","shell-base"),await n.loadCSS("/assets/css/index.css","shell-index"),M("[MAIN.applyStartupUiSettings] shell CSS loaded",{})}catch(s){console.warn("[MAIN.applyStartupUiSettings] shell CSS load failed",s)}try{await i.loadThemeById(r),M("[MAIN.applyStartupUiSettings] theme css injected",{themeId:r})}catch(s){console.warn("[MAIN.applyStartupUiSettings] theme load failed",s)}try{await n.applyTheme(t,r),M("[MAIN.applyStartupUiSettings] system applyTheme complete",{})}catch(s){console.warn("[MAIN.applyStartupUiSettings] applyTheme failed",s)}M("[MAIN.applyStartupUiSettings] done",{})}async loadShellConfig(){const e=await fetch("/shell.config.json");if(!e.ok)throw new Error(`Failed to load shell config: ${e.statusText}`);return await e.json()}}console.log("start 1");const Fr=new Ri;Fr.init();Fr.run().catch(o=>{console.error("[BOOTSTRAP ERROR]",o)});const Bi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Fi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ui=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),xi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ni=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Vi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Gi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),zi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Wi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),qi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Ae as S,lt as U,Er as a,Ge as b,rt as c,Hi as g,Ue as t,Lt as u};
