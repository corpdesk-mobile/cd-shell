const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ByO75k8h.js","assets/cd-directive-binder.service-DGbLY5eG.js","assets/index-BEx0eJtE.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qi(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(o).forEach(function(r){var n=Object.getOwnPropertyDescriptor(o,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return o[r]}})}),t}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vt;(function(o){(function(e){var t=typeof globalThis=="object"?globalThis:typeof rt=="object"?rt:typeof self=="object"?self:typeof this=="object"?this:c(),r=n(o);typeof t.Reflect<"u"&&(r=n(t.Reflect,r)),e(r,t),typeof t.Reflect>"u"&&(t.Reflect=o);function n(f,g){return function(m,E){Object.defineProperty(f,m,{configurable:!0,writable:!0,value:E}),g&&g(m,E)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(e,t){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",f={__proto__:[]}instanceof Array,g=!c&&!f,m={create:c?function(){return yt(Object.create(null))}:f?function(){return yt({__proto__:null})}:function(){return yt({})},has:g?function(a,u){return r.call(a,u)}:function(a,u){return u in a},get:g?function(a,u){return r.call(a,u)?a[u]:void 0}:function(a,u){return a[u]}},E=Object.getPrototypeOf(Function),B=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Vr(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:zr(),N=typeof WeakMap=="function"?WeakMap:Gr(),G=n?Symbol.for("@reflect-metadata:registry"):void 0,U=Dr(),Z=Nr(U);function Y(a,u,d,v){if(M(d)){if(!k(a))throw new TypeError;if(!ae(u))throw new TypeError;return ee(a,u)}else{if(!k(a))throw new TypeError;if(!y(u))throw new TypeError;if(!y(v)&&!M(v)&&!l(v))throw new TypeError;return l(v)&&(v=void 0),d=_(d),ye(a,u,d,v)}}e("decorate",Y);function W(a,u){function d(v,T){if(!y(v))throw new TypeError;if(!M(T)&&!Oe(T))throw new TypeError;he(a,u,v,T)}return d}e("metadata",W);function K(a,u,d,v){if(!y(d))throw new TypeError;return M(v)||(v=_(v)),he(a,u,d,v)}e("defineMetadata",K);function Me(a,u,d){if(!y(u))throw new TypeError;return M(d)||(d=_(d)),le(a,u,d)}e("hasMetadata",Me);function de(a,u,d){if(!y(u))throw new TypeError;return M(d)||(d=_(d)),ue(a,u,d)}e("hasOwnMetadata",de);function Be(a,u,d){if(!y(u))throw new TypeError;return M(d)||(d=_(d)),re(a,u,d)}e("getMetadata",Be);function te(a,u,d){if(!y(u))throw new TypeError;return M(d)||(d=_(d)),Te(a,u,d)}e("getOwnMetadata",te);function ce(a,u){if(!y(a))throw new TypeError;return M(u)||(u=_(u)),me(a,u)}e("getMetadataKeys",ce);function ie(a,u){if(!y(a))throw new TypeError;return M(u)||(u=_(u)),Q(a,u)}e("getOwnMetadataKeys",ie);function pe(a,u,d){if(!y(u))throw new TypeError;if(M(d)||(d=_(d)),!y(u))throw new TypeError;M(d)||(d=_(d));var v=Ue(u,d,!1);return M(v)?!1:v.OrdinaryDeleteMetadata(a,u,d)}e("deleteMetadata",pe);function ee(a,u){for(var d=a.length-1;d>=0;--d){var v=a[d],T=v(u);if(!M(T)&&!l(T)){if(!ae(T))throw new TypeError;u=T}}return u}function ye(a,u,d,v){for(var T=a.length-1;T>=0;--T){var x=a[T],q=x(u,d,v);if(!M(q)&&!l(q)){if(!y(q))throw new TypeError;v=q}}return v}function le(a,u,d){var v=ue(a,u,d);if(v)return!0;var T=qe(u);return l(T)?!1:le(a,T,d)}function ue(a,u,d){var v=Ue(u,d,!1);return M(v)?!1:R(v.OrdinaryHasOwnMetadata(a,u,d))}function re(a,u,d){var v=ue(a,u,d);if(v)return Te(a,u,d);var T=qe(u);if(!l(T))return re(a,T,d)}function Te(a,u,d){var v=Ue(u,d,!1);if(!M(v))return v.OrdinaryGetOwnMetadata(a,u,d)}function he(a,u,d,v){var T=Ue(d,v,!0);T.OrdinaryDefineOwnMetadata(a,u,d,v)}function me(a,u){var d=Q(a,u),v=qe(a);if(v===null)return d;var T=me(v,u);if(T.length<=0)return d;if(d.length<=0)return T;for(var x=new D,q=[],$=0,b=d;$<b.length;$++){var S=b[$],w=x.has(S);w||(x.add(S),q.push(S))}for(var A=0,I=T;A<I.length;A++){var S=I[A],w=x.has(S);w||(x.add(S),q.push(S))}return q}function Q(a,u){var d=Ue(a,u,!1);return d?d.OrdinaryOwnMetadataKeys(a,u):[]}function ge(a){if(a===null)return 1;switch(typeof a){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return a===null?1:6;default:return 6}}function M(a){return a===void 0}function l(a){return a===null}function p(a){return typeof a=="symbol"}function y(a){return typeof a=="object"?a!==null:typeof a=="function"}function P(a,u){switch(ge(a)){case 0:return a;case 1:return a;case 2:return a;case 3:return a;case 4:return a;case 5:return a}var d="string",v=ve(a,i);if(v!==void 0){var T=v.call(a,d);if(y(T))throw new TypeError;return T}return L(a)}function L(a,u){var d,v,T;{var x=a.toString;if(H(x)){var v=x.call(a);if(!y(v))return v}var d=a.valueOf;if(H(d)){var v=d.call(a);if(!y(v))return v}}throw new TypeError}function R(a){return!!a}function C(a){return""+a}function _(a){var u=P(a);return p(u)?u:C(u)}function k(a){return Array.isArray?Array.isArray(a):a instanceof Object?a instanceof Array:Object.prototype.toString.call(a)==="[object Array]"}function H(a){return typeof a=="function"}function ae(a){return typeof a=="function"}function Oe(a){switch(ge(a)){case 3:return!0;case 4:return!0;default:return!1}}function se(a,u){return a===u||a!==a&&u!==u}function ve(a,u){var d=a[u];if(d!=null){if(!H(d))throw new TypeError;return d}}function Ge(a){var u=ve(a,s);if(!H(u))throw new TypeError;var d=u.call(a);if(!y(d))throw new TypeError;return d}function We(a){return a.value}function h(a){var u=a.next();return u.done?!1:u}function He(a){var u=a.return;u&&u.call(a)}function qe(a){var u=Object.getPrototypeOf(a);if(typeof a!="function"||a===E||u!==E)return u;var d=a.prototype,v=d&&Object.getPrototypeOf(d);if(v==null||v===Object.prototype)return u;var T=v.constructor;return typeof T!="function"||T===a?u:T}function Fr(){var a;!M(G)&&typeof t.Reflect<"u"&&!(G in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(a=xr(t.Reflect));var u,d,v,T=new N,x={registerProvider:q,getProvider:b,setProvider:w};return x;function q(A){if(!Object.isExtensible(x))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case a===A:break;case M(u):u=A;break;case u===A:break;case M(d):d=A;break;case d===A:break;default:v===void 0&&(v=new D),v.add(A);break}}function $(A,I){if(!M(u)){if(u.isProviderFor(A,I))return u;if(!M(d)){if(d.isProviderFor(A,I))return u;if(!M(v))for(var F=Ge(v);;){var V=h(F);if(!V)return;var ne=We(V);if(ne.isProviderFor(A,I))return He(F),ne}}}if(!M(a)&&a.isProviderFor(A,I))return a}function b(A,I){var F=T.get(A),V;return M(F)||(V=F.get(I)),M(V)&&(V=$(A,I),M(V)||(M(F)&&(F=new B,T.set(A,F)),F.set(I,V))),V}function S(A){if(M(A))throw new TypeError;return u===A||d===A||!M(v)&&v.has(A)}function w(A,I,F){if(!S(F))throw new Error("Metadata provider not registered.");var V=b(A,I);if(V!==F){if(!M(V))return!1;var ne=T.get(A);M(ne)&&(ne=new B,T.set(A,ne)),ne.set(I,F)}return!0}}function Dr(){var a;return!M(G)&&y(t.Reflect)&&Object.isExtensible(t.Reflect)&&(a=t.Reflect[G]),M(a)&&(a=Fr()),!M(G)&&y(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,G,{enumerable:!1,configurable:!1,writable:!1,value:a}),a}function Nr(a){var u=new N,d={isProviderFor:function(S,w){var A=u.get(S);return M(A)?!1:A.has(w)},OrdinaryDefineOwnMetadata:q,OrdinaryHasOwnMetadata:T,OrdinaryGetOwnMetadata:x,OrdinaryOwnMetadataKeys:$,OrdinaryDeleteMetadata:b};return U.registerProvider(d),d;function v(S,w,A){var I=u.get(S),F=!1;if(M(I)){if(!A)return;I=new B,u.set(S,I),F=!0}var V=I.get(w);if(M(V)){if(!A)return;if(V=new B,I.set(w,V),!a.setProvider(S,w,d))throw I.delete(w),F&&u.delete(S),new Error("Wrong provider for target.")}return V}function T(S,w,A){var I=v(w,A,!1);return M(I)?!1:R(I.has(S))}function x(S,w,A){var I=v(w,A,!1);if(!M(I))return I.get(S)}function q(S,w,A,I){var F=v(A,I,!0);F.set(S,w)}function $(S,w){var A=[],I=v(S,w,!1);if(M(I))return A;for(var F=I.keys(),V=Ge(F),ne=0;;){var xt=h(V);if(!xt)return A.length=ne,A;var Wr=We(xt);try{A[ne]=Wr}catch(Hr){try{He(V)}finally{throw Hr}}ne++}}function b(S,w,A){var I=v(w,A,!1);if(M(I)||!I.delete(S))return!1;if(I.size===0){var F=u.get(w);M(F)||(F.delete(A),F.size===0&&u.delete(F))}return!0}}function xr(a){var u=a.defineMetadata,d=a.hasOwnMetadata,v=a.getOwnMetadata,T=a.getOwnMetadataKeys,x=a.deleteMetadata,q=new N,$={isProviderFor:function(b,S){var w=q.get(b);return!M(w)&&w.has(S)?!0:T(b,S).length?(M(w)&&(w=new D,q.set(b,w)),w.add(S),!0):!1},OrdinaryDefineOwnMetadata:u,OrdinaryHasOwnMetadata:d,OrdinaryGetOwnMetadata:v,OrdinaryOwnMetadataKeys:T,OrdinaryDeleteMetadata:x};return $}function Ue(a,u,d){var v=U.getProvider(a,u);if(!M(v))return v;if(d){if(U.setProvider(a,u,Z))return Z;throw new Error("Illegal state.")}}function Vr(){var a={},u=[],d=function(){function $(b,S,w){this._index=0,this._keys=b,this._values=S,this._selector=w}return $.prototype["@@iterator"]=function(){return this},$.prototype[s]=function(){return this},$.prototype.next=function(){var b=this._index;if(b>=0&&b<this._keys.length){var S=this._selector(this._keys[b],this._values[b]);return b+1>=this._keys.length?(this._index=-1,this._keys=u,this._values=u):this._index++,{value:S,done:!1}}return{value:void 0,done:!0}},$.prototype.throw=function(b){throw this._index>=0&&(this._index=-1,this._keys=u,this._values=u),b},$.prototype.return=function(b){return this._index>=0&&(this._index=-1,this._keys=u,this._values=u),{value:b,done:!0}},$}(),v=function(){function $(){this._keys=[],this._values=[],this._cacheKey=a,this._cacheIndex=-2}return Object.defineProperty($.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),$.prototype.has=function(b){return this._find(b,!1)>=0},$.prototype.get=function(b){var S=this._find(b,!1);return S>=0?this._values[S]:void 0},$.prototype.set=function(b,S){var w=this._find(b,!0);return this._values[w]=S,this},$.prototype.delete=function(b){var S=this._find(b,!1);if(S>=0){for(var w=this._keys.length,A=S+1;A<w;A++)this._keys[A-1]=this._keys[A],this._values[A-1]=this._values[A];return this._keys.length--,this._values.length--,se(b,this._cacheKey)&&(this._cacheKey=a,this._cacheIndex=-2),!0}return!1},$.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=a,this._cacheIndex=-2},$.prototype.keys=function(){return new d(this._keys,this._values,T)},$.prototype.values=function(){return new d(this._keys,this._values,x)},$.prototype.entries=function(){return new d(this._keys,this._values,q)},$.prototype["@@iterator"]=function(){return this.entries()},$.prototype[s]=function(){return this.entries()},$.prototype._find=function(b,S){if(!se(this._cacheKey,b)){this._cacheIndex=-1;for(var w=0;w<this._keys.length;w++)if(se(this._keys[w],b)){this._cacheIndex=w;break}}return this._cacheIndex<0&&S&&(this._cacheIndex=this._keys.length,this._keys.push(b),this._values.push(void 0)),this._cacheIndex},$}();return v;function T($,b){return $}function x($,b){return b}function q($,b){return[$,b]}}function zr(){var a=function(){function u(){this._map=new B}return Object.defineProperty(u.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),u.prototype.has=function(d){return this._map.has(d)},u.prototype.add=function(d){return this._map.set(d,d),this},u.prototype.delete=function(d){return this._map.delete(d)},u.prototype.clear=function(){this._map.clear()},u.prototype.keys=function(){return this._map.keys()},u.prototype.values=function(){return this._map.keys()},u.prototype.entries=function(){return this._map.entries()},u.prototype["@@iterator"]=function(){return this.keys()},u.prototype[s]=function(){return this.keys()},u}();return a}function Gr(){var a=16,u=m.create(),d=v();return function(){function b(){this._key=v()}return b.prototype.has=function(S){var w=T(S,!1);return w!==void 0?m.has(w,this._key):!1},b.prototype.get=function(S){var w=T(S,!1);return w!==void 0?m.get(w,this._key):void 0},b.prototype.set=function(S,w){var A=T(S,!0);return A[this._key]=w,this},b.prototype.delete=function(S){var w=T(S,!1);return w!==void 0?delete w[this._key]:!1},b.prototype.clear=function(){this._key=v()},b}();function v(){var b;do b="@@WeakMap@@"+$();while(m.has(u,b));return u[b]=!0,b}function T(b,S){if(!r.call(b,d)){if(!S)return;Object.defineProperty(b,d,{value:m.create()})}return b[d]}function x(b,S){for(var w=0;w<S;++w)b[w]=Math.random()*255|0;return b}function q(b){if(typeof Uint8Array=="function"){var S=new Uint8Array(b);return typeof crypto<"u"?crypto.getRandomValues(S):typeof msCrypto<"u"?msCrypto.getRandomValues(S):x(S,b),S}return x(new Array(b),b)}function $(){var b=q(a);b[6]=b[6]&79|64,b[8]=b[8]&191|128;for(var S="",w=0;w<a;++w){var A=b[w];(w===4||w===6||w===8)&&(S+="-"),A<16&&(S+="0"),S+=A.toString(16).toLowerCase()}return S}}function yt(a){return a.__=void 0,delete a.__,a}})})(Vt||(Vt={}));/*!
* metismenujs - v1.4.0
* MetisMenu: Collapsible menu plugin with Vanilla-JS
* https://github.com/onokumus/metismenujs#readme
*
* Made by Osman Nuri Okumus <onokumus@gmail.com> (https://github.com/onokumus)
* Under MIT License
*/const qr={parentTrigger:"li",subMenu:"ul",toggle:!0,triggerElement:"a"},Je={ACTIVE:"mm-active",COLLAPSE:"mm-collapse",COLLAPSED:"mm-collapsed",COLLAPSING:"mm-collapsing",METIS:"metismenu",SHOW:"mm-show"};class nt{constructor(e,t){this.element=nt.isElement(e)?e:document.querySelector(e),this.config=Object.assign(Object.assign({},qr),t),this.disposed=!1,this.triggerArr=[],this.boundEventHandler=this.clickEvent.bind(this),this.init()}static attach(e,t){return new nt(e,t)}init(){const{METIS:e,ACTIVE:t,COLLAPSE:r}=Je;this.element.classList.add(e);const n=[...this.element.querySelectorAll(this.config.subMenu)];n.length!==0&&n.forEach(i=>{i.classList.add(r);const s=i.closest(this.config.parentTrigger);s!=null&&s.classList.contains(t)?this.show(i):this.hide(i);const c=s==null?void 0:s.querySelector(this.config.triggerElement);(c==null?void 0:c.getAttribute("aria-disabled"))!=="true"&&(c==null||c.setAttribute("aria-expanded","false"),c==null||c.addEventListener("click",this.boundEventHandler),this.triggerArr.push(c))})}clickEvent(e){if(!this.disposed){const t=e==null?void 0:e.currentTarget;t&&t.tagName==="A"&&e.preventDefault();const r=t.closest(this.config.parentTrigger),n=r==null?void 0:r.querySelector(this.config.subMenu);this.toggle(n)}}update(){this.disposed=!1,this.init()}dispose(){this.triggerArr.forEach(e=>{e.removeEventListener("click",this.boundEventHandler)}),this.disposed=!0}on(e,t,r){return this.element.addEventListener(e,t,r),this}off(e,t,r){return this.element.removeEventListener(e,t,r),this}emit(e,t,r=!1){const n=new CustomEvent(e,{bubbles:r,detail:t});this.element.dispatchEvent(n)}toggle(e){const t=e.closest(this.config.parentTrigger);t!=null&&t.classList.contains(Je.ACTIVE)?this.hide(e):this.show(e)}show(e){var t;const r=e,{ACTIVE:n,COLLAPSE:i,COLLAPSED:s,COLLAPSING:c,SHOW:f}=Je;if(this.isTransitioning||r.classList.contains(c))return;const g=()=>{r.classList.remove(c),r.style.height="",r.removeEventListener("transitionend",g),this.setTransitioning(!1),this.emit("shown.metisMenu",{shownElement:r})},m=r.closest(this.config.parentTrigger);m==null||m.classList.add(n);const E=m==null?void 0:m.querySelector(this.config.triggerElement);E==null||E.setAttribute("aria-expanded","true"),E==null||E.classList.remove(s),r.style.height="0px",r.classList.remove(i),r.classList.remove(f),r.classList.add(c);const B=[].slice.call((t=m==null?void 0:m.parentNode)===null||t===void 0?void 0:t.children).filter(D=>D!==m);this.config.toggle&&B.length>0&&B.forEach(D=>{const N=D.querySelector(this.config.subMenu);N&&this.hide(N)}),this.setTransitioning(!0),r.classList.add(i),r.classList.add(f),r.style.height=`${r.scrollHeight}px`,this.emit("show.metisMenu",{showElement:r}),r.addEventListener("transitionend",g)}hide(e){const{ACTIVE:t,COLLAPSE:r,COLLAPSED:n,COLLAPSING:i,SHOW:s}=Je,c=e;if(this.isTransitioning||!c.classList.contains(s))return;this.emit("hide.metisMenu",{hideElement:c});const f=c.closest(this.config.parentTrigger);f==null||f.classList.remove(t);const g=()=>{c.classList.remove(i),c.classList.add(r),c.style.height="",c.removeEventListener("transitionend",g),this.setTransitioning(!1),this.emit("hidden.metisMenu",{hiddenElement:c})};c.style.height=`${c.getBoundingClientRect().height}px`,c.style.height=`${c.offsetHeight}px`,c.classList.add(i),c.classList.remove(r),c.classList.remove(s),this.setTransitioning(!0),c.addEventListener("transitionend",g),c.style.height="0px";const m=f==null?void 0:f.querySelector(this.config.triggerElement);m==null||m.setAttribute("aria-expanded","false"),m==null||m.classList.add(n)}setTransitioning(e){this.isTransitioning=e}static isElement(e){return!!e.classList}}function zt(o){return new Promise((e,t)=>{if(document.querySelector(`link[href="${o}"]`))return e();const r=document.createElement("link");r.rel="stylesheet",r.href=o,r.onload=()=>e(),r.onerror=()=>t(new Error(`Failed to load CSS: ${o}`)),document.head.appendChild(r)})}function Jr(o){return new Promise((e,t)=>{if(document.querySelector(`script[src="${o}"]`))return e();const r=document.createElement("script");r.src=o,r.async=!0,r.onload=()=>e(),r.onerror=()=>t(new Error(`Failed to load script: ${o}`)),document.head.appendChild(r)})}class Yr{constructor(){this.instance=null}async initialize(e,t){await zt("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.css"),await Jr("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.js"),await zt(`/themes/${t}/menu-systems/metismenu.css`);const r=document.getElementById(e);if(!r)return;const n=r.querySelector("ul.cd-menu-root");if(!n)return;if(this.transformForMetisMenu(n),!document.getElementById("menu")){console.error("[MetisMenuAdapter] FATAL: Failed to find element with ID 'menu' after transformation. MetisMenu will not bind.");return}this.instance=new nt("#menu")}destroy(){}transformForMetisMenu(e){e.classList.remove("cd-menu-root"),e.classList.add("metismenu"),e.setAttribute("id","menu"),e.querySelectorAll(".cd-menu-item").forEach(t=>{const r=t.querySelector(".cd-menu-link"),n=t.querySelector(".cd-menu-label"),i=t.getAttribute("data-route")||"#",s=t.getAttribute("data-icon"),c=t.querySelector("ul");let f=null;if(s)try{const g=atob(s);f=JSON.parse(g)}catch(g){console.warn("Failed to decode or parse icon metadata",g)}if(r&&n){const g=r.querySelector(".cd-menu-toggle-icon");if(g&&g.remove(),r.innerHTML="",r.href=c?"#":`/${i}`,f){const E=this.createIconElement(f);E&&(E.classList.add("menu-icon"),r.appendChild(E))}const m=document.createElement("span");if(m.classList.add("cd-menu-label"),m.textContent=n.textContent||"",r.appendChild(m),c){r.classList.add("has-arrow"),r.setAttribute("aria-expanded","false");const E=document.createElement("i");E.classList.add("menu-arrow","fa-solid","fa-chevron-right"),r.appendChild(E)}}t.classList.remove("cd-menu-item")}),e.querySelectorAll("ul.cd-submenu").forEach(t=>{t.classList.remove("cd-submenu")})}createIconElement(e){if(!e.iconType)return null;const t=this.getCurrentThemeMenu(),r=(t==null?void 0:t.iconSize)??14,n=(t==null?void 0:t.iconColor)??"#444";switch(e.iconType){case"fontawesome":{const i=document.createElement("i");return i.className=e.icon,i.style.color=n,i.style.fontSize=`${r}px`,i}case"svg":{const i=document.createElement("span");i.innerHTML=e.icon;const s=i.firstElementChild;return s&&(s.style.color=n,s.style.width=`${r}px`,s.style.height=`${r}px`),s}case"string":{const i=document.createElement("span");return i.textContent=e.icon,i.style.color=n,i.style.fontSize=`${r}px`,i}default:return null}}getCurrentThemeMenu(){var e,t;try{const r=localStorage.getItem("cd-theme"),n=r?JSON.parse(r):null;return(t=(e=n==null?void 0:n.layout)==null?void 0:e.sidebar)==null?void 0:t.menu}catch{return}}}class $e{constructor(){this.cache={}}static getInstance(){return console.log("[ControllerCacheService][getInstance] start..."),$e.instance||($e.instance=new $e),$e.instance}async getOrInitializeController(e,t){if(console.log("[ControllerCacheService][getOrInitializeController] start..."),this.cache[e])return console.log(`[ControllerCacheService] Using cached controller: ${e}`),this.cache[e];if(console.log(`[ControllerCacheService] Creating new instance for: ${e}`),!t||typeof t!="object")return console.error(`[ControllerCacheService] Invalid controllerDef for '${e}'.`,t),null;let r;try{r=Object.create(t)}catch(n){return console.error(`[ControllerCacheService] Failed to create instance for '${e}'.`,n),null}for(const n of Object.keys(t)){const i=Object.getOwnPropertyDescriptor(t,n);i&&i.value!==void 0&&typeof i.value!="function"&&(r[n]=i.value)}try{typeof r.__init=="function"&&r.__init(),typeof r.__setup=="function"&&await r.__setup()}catch(n){console.error(`[ControllerCacheService] Initialization failed for '${e}'.`,n)}return this.cache[e]=r,console.log(`[ControllerCacheService] Cached instance for ${e}`),r}forceReinit(e){console.log(`[ControllerCacheService] Force reinit for: ${e}`);const t=this.cache[e];t&&typeof t.__init=="function"&&t.__init()}}var Lt={},dr={},pr=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,t);if(c.value!==n||c.enumerable!==!0)return!1}return!0},Zr=pr,ft=function(){return Zr()&&!!Symbol.toStringTag},yr=Object,Qr=Error,Xr=EvalError,Kr=RangeError,en=ReferenceError,hr=SyntaxError,De=TypeError,tn=URIError,rn=Math.abs,nn=Math.floor,on=Math.max,an=Math.min,sn=Math.pow,cn=Math.round,ln=Number.isNaN||function(e){return e!==e},un=ln,fn=function(e){return un(e)||e===0?e:e<0?-1:1},dn=Object.getOwnPropertyDescriptor,Ze=dn;if(Ze)try{Ze([],"length")}catch{Ze=null}var ke=Ze,Qe=Object.defineProperty||!1;if(Qe)try{Qe({},"a",{value:1})}catch{Qe=!1}var dt=Qe,ht,Gt;function pn(){if(Gt)return ht;Gt=1;var o=typeof Symbol<"u"&&Symbol,e=pr;return ht=function(){return typeof o!="function"||typeof Symbol!="function"||typeof o("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ht}var mr=typeof Reflect<"u"&&Reflect.getPrototypeOf||null,yn=yr,gr=yn.getPrototypeOf||null,hn="Function.prototype.bind called on incompatible ",mn=Object.prototype.toString,gn=Math.max,vn="[object Function]",Wt=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},bn=function(e,t){for(var r=[],n=t,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},Sn=function(o,e){for(var t="",r=0;r<o.length;r+=1)t+=o[r],r+1<o.length&&(t+=e);return t},wn=function(e){var t=this;if(typeof t!="function"||mn.apply(t)!==vn)throw new TypeError(hn+t);for(var r=bn(arguments,1),n,i=function(){if(this instanceof n){var m=t.apply(this,Wt(r,arguments));return Object(m)===m?m:this}return t.apply(e,Wt(r,arguments))},s=gn(0,t.length-r.length),c=[],f=0;f<s;f++)c[f]="$"+f;if(n=Function("binder","return function ("+Sn(c,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var g=function(){};g.prototype=t.prototype,n.prototype=new g,g.prototype=null}return n},An=wn,Ne=Function.prototype.bind||An,Rt=Function.prototype.call,kt=Function.prototype.apply,En=typeof Reflect<"u"&&Reflect&&Reflect.apply,Mn=Ne,Tn=kt,On=Rt,_n=En,vr=_n||Mn.call(On,Tn),Pn=Ne,Cn=De,$n=Rt,jn=vr,Bt=function(e){if(e.length<1||typeof e[0]!="function")throw new Cn("a function is required");return jn(Pn,$n,e)},In=Bt,Ht=ke,br;try{br=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var mt=!!br&&Ht&&Ht(Object.prototype,"__proto__"),Sr=Object,qt=Sr.getPrototypeOf,Ln=mt&&typeof mt.get=="function"?In([mt.get]):typeof qt=="function"?function(e){return qt(e==null?e:Sr(e))}:!1,Jt=mr,Yt=gr,Zt=Ln,Ut=Jt?function(e){return Jt(e)}:Yt?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Yt(e)}:Zt?function(e){return Zt(e)}:null,Rn=Function.prototype.call,kn=Object.prototype.hasOwnProperty,Bn=Ne,wr=Bn.call(Rn,kn),j,Un=yr,Fn=Qr,Dn=Xr,Nn=Kr,xn=en,Re=hr,Ie=De,Vn=tn,zn=rn,Gn=nn,Wn=on,Hn=an,qn=sn,Jn=cn,Yn=fn,Ar=Function,gt=function(o){try{return Ar('"use strict"; return ('+o+").constructor;")()}catch{}},Fe=ke,Zn=dt,vt=function(){throw new Ie},Qn=Fe?function(){try{return arguments.callee,vt}catch{try{return Fe(arguments,"callee").get}catch{return vt}}}():vt,_e=pn()(),J=Ut,Xn=gr,Kn=mr,Er=kt,xe=Rt,Ce={},eo=typeof Uint8Array>"u"||!J?j:J(Uint8Array),Ee={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?j:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?j:ArrayBuffer,"%ArrayIteratorPrototype%":_e&&J?J([][Symbol.iterator]()):j,"%AsyncFromSyncIteratorPrototype%":j,"%AsyncFunction%":Ce,"%AsyncGenerator%":Ce,"%AsyncGeneratorFunction%":Ce,"%AsyncIteratorPrototype%":Ce,"%Atomics%":typeof Atomics>"u"?j:Atomics,"%BigInt%":typeof BigInt>"u"?j:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?j:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?j:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?j:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Fn,"%eval%":eval,"%EvalError%":Dn,"%Float16Array%":typeof Float16Array>"u"?j:Float16Array,"%Float32Array%":typeof Float32Array>"u"?j:Float32Array,"%Float64Array%":typeof Float64Array>"u"?j:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?j:FinalizationRegistry,"%Function%":Ar,"%GeneratorFunction%":Ce,"%Int8Array%":typeof Int8Array>"u"?j:Int8Array,"%Int16Array%":typeof Int16Array>"u"?j:Int16Array,"%Int32Array%":typeof Int32Array>"u"?j:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_e&&J?J(J([][Symbol.iterator]())):j,"%JSON%":typeof JSON=="object"?JSON:j,"%Map%":typeof Map>"u"?j:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_e||!J?j:J(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Un,"%Object.getOwnPropertyDescriptor%":Fe,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?j:Promise,"%Proxy%":typeof Proxy>"u"?j:Proxy,"%RangeError%":Nn,"%ReferenceError%":xn,"%Reflect%":typeof Reflect>"u"?j:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?j:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_e||!J?j:J(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?j:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_e&&J?J(""[Symbol.iterator]()):j,"%Symbol%":_e?Symbol:j,"%SyntaxError%":Re,"%ThrowTypeError%":Qn,"%TypedArray%":eo,"%TypeError%":Ie,"%Uint8Array%":typeof Uint8Array>"u"?j:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?j:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?j:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?j:Uint32Array,"%URIError%":Vn,"%WeakMap%":typeof WeakMap>"u"?j:WeakMap,"%WeakRef%":typeof WeakRef>"u"?j:WeakRef,"%WeakSet%":typeof WeakSet>"u"?j:WeakSet,"%Function.prototype.call%":xe,"%Function.prototype.apply%":Er,"%Object.defineProperty%":Zn,"%Object.getPrototypeOf%":Xn,"%Math.abs%":zn,"%Math.floor%":Gn,"%Math.max%":Wn,"%Math.min%":Hn,"%Math.pow%":qn,"%Math.round%":Jn,"%Math.sign%":Yn,"%Reflect.getPrototypeOf%":Kn};if(J)try{null.error}catch(o){var to=J(J(o));Ee["%Error.prototype%"]=to}var ro=function o(e){var t;if(e==="%AsyncFunction%")t=gt("async function () {}");else if(e==="%GeneratorFunction%")t=gt("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=gt("async function* () {}");else if(e==="%AsyncGenerator%"){var r=o("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=o("%AsyncGenerator%");n&&J&&(t=J(n.prototype))}return Ee[e]=t,t},Qt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ve=Ne,ot=wr,no=Ve.call(xe,Array.prototype.concat),oo=Ve.call(Er,Array.prototype.splice),Xt=Ve.call(xe,String.prototype.replace),it=Ve.call(xe,String.prototype.slice),io=Ve.call(xe,RegExp.prototype.exec),ao=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,so=/\\(\\)?/g,co=function(e){var t=it(e,0,1),r=it(e,-1);if(t==="%"&&r!=="%")throw new Re("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new Re("invalid intrinsic syntax, expected opening `%`");var n=[];return Xt(e,ao,function(i,s,c,f){n[n.length]=c?Xt(f,so,"$1"):s||i}),n},lo=function(e,t){var r=e,n;if(ot(Qt,r)&&(n=Qt[r],r="%"+n[0]+"%"),ot(Ee,r)){var i=Ee[r];if(i===Ce&&(i=ro(r)),typeof i>"u"&&!t)throw new Ie("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new Re("intrinsic "+e+" does not exist!")},Mr=function(e,t){if(typeof e!="string"||e.length===0)throw new Ie("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ie('"allowMissing" argument must be a boolean');if(io(/^%?[^%]*%?$/,e)===null)throw new Re("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=co(e),n=r.length>0?r[0]:"",i=lo("%"+n+"%",t),s=i.name,c=i.value,f=!1,g=i.alias;g&&(n=g[0],oo(r,no([0,1],g)));for(var m=1,E=!0;m<r.length;m+=1){var B=r[m],D=it(B,0,1),N=it(B,-1);if((D==='"'||D==="'"||D==="`"||N==='"'||N==="'"||N==="`")&&D!==N)throw new Re("property names with quotes must have matching quotes");if((B==="constructor"||!E)&&(f=!0),n+="."+B,s="%"+n+"%",ot(Ee,s))c=Ee[s];else if(c!=null){if(!(B in c)){if(!t)throw new Ie("base intrinsic for "+e+" exists, but the property is not available.");return}if(Fe&&m+1>=r.length){var G=Fe(c,B);E=!!G,E&&"get"in G&&!("originalValue"in G.get)?c=G.get:c=c[B]}else E=ot(c,B),c=c[B];E&&!f&&(Ee[s]=c)}}return c},Tr=Mr,Or=Bt,uo=Or([Tr("%String.prototype.indexOf%")]),ze=function(e,t){var r=Tr(e,!!t);return typeof r=="function"&&uo(e,".prototype.")>-1?Or([r]):r},fo=ft(),po=ze,Mt=po("Object.prototype.toString"),pt=function(e){return fo&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Mt(e)==="[object Arguments]"},_r=function(e){return pt(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&Mt(e)!=="[object Array]"&&"callee"in e&&Mt(e.callee)==="[object Function]"},yo=function(){return pt(arguments)}();pt.isLegacyArguments=_r;var ho=yo?pt:_r,Kt=ze,mo=ft(),go=wr,vo=ke,Tt;if(mo){var bo=Kt("RegExp.prototype.exec"),er={},bt=function(){throw er},tr={toString:bt,valueOf:bt};typeof Symbol.toPrimitive=="symbol"&&(tr[Symbol.toPrimitive]=bt),Tt=function(e){if(!e||typeof e!="object")return!1;var t=vo(e,"lastIndex"),r=t&&go(t,"value");if(!r)return!1;try{bo(e,tr)}catch(n){return n===er}}}else{var So=Kt("Object.prototype.toString"),wo="[object RegExp]";Tt=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:So(e)===wo}}var Ao=Tt,Eo=ze,Mo=Ao,To=Eo("RegExp.prototype.exec"),Oo=De,_o=function(e){if(!Mo(e))throw new Oo("`regex` must be a RegExp");return function(r){return To(e,r)!==null}},St,rr;function Po(){if(rr)return St;rr=1;const o=(function*(){}).constructor;return St=()=>o,St}var Pr=ze,Co=_o,$o=Co(/^\s*(?:function)?\*/),jo=ft(),nr=Ut,Io=Pr("Object.prototype.toString"),Lo=Pr("Function.prototype.toString"),Ro=Po(),ko=function(e){if(typeof e!="function")return!1;if($o(Lo(e)))return!0;if(!jo){var t=Io(e);return t==="[object GeneratorFunction]"}if(!nr)return!1;var r=Ro();return r&&nr(e)===r.prototype},Cr=Function.prototype.toString,je=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Ot,Xe;if(typeof je=="function"&&typeof Object.defineProperty=="function")try{Ot=Object.defineProperty({},"length",{get:function(){throw Xe}}),Xe={},je(function(){throw 42},null,Ot)}catch(o){o!==Xe&&(je=null)}else je=null;var Bo=/^\s*class\b/,_t=function(e){try{var t=Cr.call(e);return Bo.test(t)}catch{return!1}},wt=function(e){try{return _t(e)?!1:(Cr.call(e),!0)}catch{return!1}},Ke=Object.prototype.toString,Uo="[object Object]",Fo="[object Function]",Do="[object GeneratorFunction]",No="[object HTMLAllCollection]",xo="[object HTML document.all class]",Vo="[object HTMLCollection]",zo=typeof Symbol=="function"&&!!Symbol.toStringTag,Go=!(0 in[,]),Pt=function(){return!1};if(typeof document=="object"){var Wo=document.all;Ke.call(Wo)===Ke.call(document.all)&&(Pt=function(e){if((Go||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Ke.call(e);return(t===No||t===xo||t===Vo||t===Uo)&&e("")==null}catch{}return!1})}var Ho=je?function(e){if(Pt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{je(e,null,Ot)}catch(t){if(t!==Xe)return!1}return!_t(e)&&wt(e)}:function(e){if(Pt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(zo)return wt(e);if(_t(e))return!1;var t=Ke.call(e);return t!==Fo&&t!==Do&&!/^\[object HTML/.test(t)?!1:wt(e)},qo=Ho,Jo=Object.prototype.toString,$r=Object.prototype.hasOwnProperty,Yo=function(e,t,r){for(var n=0,i=e.length;n<i;n++)$r.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))},Zo=function(e,t,r){for(var n=0,i=e.length;n<i;n++)r==null?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},Qo=function(e,t,r){for(var n in e)$r.call(e,n)&&(r==null?t(e[n],n,e):t.call(r,e[n],n,e))};function Xo(o){return Jo.call(o)==="[object Array]"}var Ko=function(e,t,r){if(!qo(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),Xo(e)?Yo(e,t,n):typeof e=="string"?Zo(e,t,n):Qo(e,t,n)},ei=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],At=ei,ti=typeof globalThis>"u"?rt:globalThis,ri=function(){for(var e=[],t=0;t<At.length;t++)typeof ti[At[t]]=="function"&&(e[e.length]=At[t]);return e},jr={exports:{}},or=dt,ni=hr,Pe=De,ir=ke,oi=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Pe("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Pe("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Pe("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Pe("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Pe("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Pe("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,f=!!ir&&ir(e,t);if(or)or(e,t,{configurable:s===null&&f?f.configurable:!s,enumerable:n===null&&f?f.enumerable:!n,value:r,writable:i===null&&f?f.writable:!i});else if(c||!n&&!i&&!s)e[t]=r;else throw new ni("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ct=dt,Ir=function(){return!!Ct};Ir.hasArrayLengthDefineBug=function(){if(!Ct)return null;try{return Ct([],"length",{value:1}).length!==1}catch{return!0}};var ii=Ir,ai=Mr,ar=oi,si=ii(),sr=ke,cr=De,ci=ai("%Math.floor%"),li=function(e,t){if(typeof e!="function")throw new cr("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||ci(t)!==t)throw new cr("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,i=!0;if("length"in e&&sr){var s=sr(e,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(i=!1)}return(n||i||!r)&&(si?ar(e,"length",t,!0,!0):ar(e,"length",t)),e},ui=Ne,fi=kt,di=vr,pi=function(){return di(ui,fi,arguments)};(function(o){var e=li,t=dt,r=Bt,n=pi;o.exports=function(s){var c=r(arguments),f=s.length-(arguments.length-1);return e(c,1+(f>0?f:0),!0)},t?t(o.exports,"apply",{value:n}):o.exports.apply=n})(jr);var yi=jr.exports,at=Ko,hi=ri,lr=yi,Ft=ze,et=ke,Ye=Ut,mi=Ft("Object.prototype.toString"),Lr=ft(),ur=typeof globalThis>"u"?rt:globalThis,$t=hi(),Dt=Ft("String.prototype.slice"),gi=Ft("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},st={__proto__:null};Lr&&et&&Ye?at($t,function(o){var e=new ur[o];if(Symbol.toStringTag in e&&Ye){var t=Ye(e),r=et(t,Symbol.toStringTag);if(!r&&t){var n=Ye(t);r=et(n,Symbol.toStringTag)}st["$"+o]=lr(r.get)}}):at($t,function(o){var e=new ur[o],t=e.slice||e.set;t&&(st["$"+o]=lr(t))});var vi=function(e){var t=!1;return at(st,function(r,n){if(!t)try{"$"+r(e)===n&&(t=Dt(n,1))}catch{}}),t},bi=function(e){var t=!1;return at(st,function(r,n){if(!t)try{r(e),t=Dt(n,1)}catch{}}),t},Rr=function(e){if(!e||typeof e!="object")return!1;if(!Lr){var t=Dt(mi(e),8,-1);return gi($t,t)>-1?t:t!=="Object"?!1:bi(e)}return et?vi(e):null},Si=Rr,wi=function(e){return!!Si(e)};(function(o){var e=ho,t=ko,r=Rr,n=wi;function i(h){return h.call.bind(h)}var s=typeof BigInt<"u",c=typeof Symbol<"u",f=i(Object.prototype.toString),g=i(Number.prototype.valueOf),m=i(String.prototype.valueOf),E=i(Boolean.prototype.valueOf);if(s)var B=i(BigInt.prototype.valueOf);if(c)var D=i(Symbol.prototype.valueOf);function N(h,He){if(typeof h!="object")return!1;try{return He(h),!0}catch{return!1}}o.isArgumentsObject=e,o.isGeneratorFunction=t,o.isTypedArray=n;function G(h){return typeof Promise<"u"&&h instanceof Promise||h!==null&&typeof h=="object"&&typeof h.then=="function"&&typeof h.catch=="function"}o.isPromise=G;function U(h){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(h):n(h)||l(h)}o.isArrayBufferView=U;function Z(h){return r(h)==="Uint8Array"}o.isUint8Array=Z;function Y(h){return r(h)==="Uint8ClampedArray"}o.isUint8ClampedArray=Y;function W(h){return r(h)==="Uint16Array"}o.isUint16Array=W;function K(h){return r(h)==="Uint32Array"}o.isUint32Array=K;function Me(h){return r(h)==="Int8Array"}o.isInt8Array=Me;function de(h){return r(h)==="Int16Array"}o.isInt16Array=de;function Be(h){return r(h)==="Int32Array"}o.isInt32Array=Be;function te(h){return r(h)==="Float32Array"}o.isFloat32Array=te;function ce(h){return r(h)==="Float64Array"}o.isFloat64Array=ce;function ie(h){return r(h)==="BigInt64Array"}o.isBigInt64Array=ie;function pe(h){return r(h)==="BigUint64Array"}o.isBigUint64Array=pe;function ee(h){return f(h)==="[object Map]"}ee.working=typeof Map<"u"&&ee(new Map);function ye(h){return typeof Map>"u"?!1:ee.working?ee(h):h instanceof Map}o.isMap=ye;function le(h){return f(h)==="[object Set]"}le.working=typeof Set<"u"&&le(new Set);function ue(h){return typeof Set>"u"?!1:le.working?le(h):h instanceof Set}o.isSet=ue;function re(h){return f(h)==="[object WeakMap]"}re.working=typeof WeakMap<"u"&&re(new WeakMap);function Te(h){return typeof WeakMap>"u"?!1:re.working?re(h):h instanceof WeakMap}o.isWeakMap=Te;function he(h){return f(h)==="[object WeakSet]"}he.working=typeof WeakSet<"u"&&he(new WeakSet);function me(h){return he(h)}o.isWeakSet=me;function Q(h){return f(h)==="[object ArrayBuffer]"}Q.working=typeof ArrayBuffer<"u"&&Q(new ArrayBuffer);function ge(h){return typeof ArrayBuffer>"u"?!1:Q.working?Q(h):h instanceof ArrayBuffer}o.isArrayBuffer=ge;function M(h){return f(h)==="[object DataView]"}M.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&M(new DataView(new ArrayBuffer(1),0,1));function l(h){return typeof DataView>"u"?!1:M.working?M(h):h instanceof DataView}o.isDataView=l;var p=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function y(h){return f(h)==="[object SharedArrayBuffer]"}function P(h){return typeof p>"u"?!1:(typeof y.working>"u"&&(y.working=y(new p)),y.working?y(h):h instanceof p)}o.isSharedArrayBuffer=P;function L(h){return f(h)==="[object AsyncFunction]"}o.isAsyncFunction=L;function R(h){return f(h)==="[object Map Iterator]"}o.isMapIterator=R;function C(h){return f(h)==="[object Set Iterator]"}o.isSetIterator=C;function _(h){return f(h)==="[object Generator]"}o.isGeneratorObject=_;function k(h){return f(h)==="[object WebAssembly.Module]"}o.isWebAssemblyCompiledModule=k;function H(h){return N(h,g)}o.isNumberObject=H;function ae(h){return N(h,m)}o.isStringObject=ae;function Oe(h){return N(h,E)}o.isBooleanObject=Oe;function se(h){return s&&N(h,B)}o.isBigIntObject=se;function ve(h){return c&&N(h,D)}o.isSymbolObject=ve;function Ge(h){return H(h)||ae(h)||Oe(h)||se(h)||ve(h)}o.isBoxedPrimitive=Ge;function We(h){return typeof Uint8Array<"u"&&(ge(h)||P(h))}o.isAnyArrayBuffer=We,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(h){Object.defineProperty(o,h,{enumerable:!1,value:function(){throw new Error(h+" is not supported in userland")}})})})(dr);var Ai=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},jt={exports:{}};typeof Object.create=="function"?jt.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:jt.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Ei=jt.exports;(function(o){var e={},t=Object.getOwnPropertyDescriptors||function(p){for(var y=Object.keys(p),P={},L=0;L<y.length;L++)P[y[L]]=Object.getOwnPropertyDescriptor(p,y[L]);return P},r=/%[sdj%]/g;o.format=function(l){if(!de(l)){for(var p=[],y=0;y<arguments.length;y++)p.push(c(arguments[y]));return p.join(" ")}for(var y=1,P=arguments,L=P.length,R=String(l).replace(r,function(_){if(_==="%%")return"%";if(y>=L)return _;switch(_){case"%s":return String(P[y++]);case"%d":return Number(P[y++]);case"%j":try{return JSON.stringify(P[y++])}catch{return"[Circular]"}default:return _}}),C=P[y];y<L;C=P[++y])W(C)||!ie(C)?R+=" "+C:R+=" "+c(C);return R},o.deprecate=function(l,p){if(typeof process<"u"&&process.noDeprecation===!0)return l;if(typeof process>"u")return function(){return o.deprecate(l,p).apply(this,arguments)};var y=!1;function P(){if(!y){if(process.throwDeprecation)throw new Error(p);process.traceDeprecation?console.trace(p):console.error(p),y=!0}return l.apply(this,arguments)}return P};var n={},i=/^$/;if(e.NODE_DEBUG){var s=e.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}o.debuglog=function(l){if(l=l.toUpperCase(),!n[l])if(i.test(l)){var p=process.pid;n[l]=function(){var y=o.format.apply(o,arguments);console.error("%s %d: %s",l,p,y)}}else n[l]=function(){};return n[l]};function c(l,p){var y={seen:[],stylize:g};return arguments.length>=3&&(y.depth=arguments[2]),arguments.length>=4&&(y.colors=arguments[3]),Y(p)?y.showHidden=p:p&&o._extend(y,p),te(y.showHidden)&&(y.showHidden=!1),te(y.depth)&&(y.depth=2),te(y.colors)&&(y.colors=!1),te(y.customInspect)&&(y.customInspect=!0),y.colors&&(y.stylize=f),E(y,l,y.depth)}o.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function f(l,p){var y=c.styles[p];return y?"\x1B["+c.colors[y][0]+"m"+l+"\x1B["+c.colors[y][1]+"m":l}function g(l,p){return l}function m(l){var p={};return l.forEach(function(y,P){p[y]=!0}),p}function E(l,p,y){if(l.customInspect&&p&&ye(p.inspect)&&p.inspect!==o.inspect&&!(p.constructor&&p.constructor.prototype===p)){var P=p.inspect(y,l);return de(P)||(P=E(l,P,y)),P}var L=B(l,p);if(L)return L;var R=Object.keys(p),C=m(R);if(l.showHidden&&(R=Object.getOwnPropertyNames(p)),ee(p)&&(R.indexOf("message")>=0||R.indexOf("description")>=0))return D(p);if(R.length===0){if(ye(p)){var _=p.name?": "+p.name:"";return l.stylize("[Function"+_+"]","special")}if(ce(p))return l.stylize(RegExp.prototype.toString.call(p),"regexp");if(pe(p))return l.stylize(Date.prototype.toString.call(p),"date");if(ee(p))return D(p)}var k="",H=!1,ae=["{","}"];if(Z(p)&&(H=!0,ae=["[","]"]),ye(p)){var Oe=p.name?": "+p.name:"";k=" [Function"+Oe+"]"}if(ce(p)&&(k=" "+RegExp.prototype.toString.call(p)),pe(p)&&(k=" "+Date.prototype.toUTCString.call(p)),ee(p)&&(k=" "+D(p)),R.length===0&&(!H||p.length==0))return ae[0]+k+ae[1];if(y<0)return ce(p)?l.stylize(RegExp.prototype.toString.call(p),"regexp"):l.stylize("[Object]","special");l.seen.push(p);var se;return H?se=N(l,p,y,C,R):se=R.map(function(ve){return G(l,p,y,C,ve,H)}),l.seen.pop(),U(se,k,ae)}function B(l,p){if(te(p))return l.stylize("undefined","undefined");if(de(p)){var y="'"+JSON.stringify(p).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return l.stylize(y,"string")}if(Me(p))return l.stylize(""+p,"number");if(Y(p))return l.stylize(""+p,"boolean");if(W(p))return l.stylize("null","null")}function D(l){return"["+Error.prototype.toString.call(l)+"]"}function N(l,p,y,P,L){for(var R=[],C=0,_=p.length;C<_;++C)me(p,String(C))?R.push(G(l,p,y,P,String(C),!0)):R.push("");return L.forEach(function(k){k.match(/^\d+$/)||R.push(G(l,p,y,P,k,!0))}),R}function G(l,p,y,P,L,R){var C,_,k;if(k=Object.getOwnPropertyDescriptor(p,L)||{value:p[L]},k.get?k.set?_=l.stylize("[Getter/Setter]","special"):_=l.stylize("[Getter]","special"):k.set&&(_=l.stylize("[Setter]","special")),me(P,L)||(C="["+L+"]"),_||(l.seen.indexOf(k.value)<0?(W(y)?_=E(l,k.value,null):_=E(l,k.value,y-1),_.indexOf(`
`)>-1&&(R?_=_.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):_=`
`+_.split(`
`).map(function(H){return"   "+H}).join(`
`))):_=l.stylize("[Circular]","special")),te(C)){if(R&&L.match(/^\d+$/))return _;C=JSON.stringify(""+L),C.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(C=C.slice(1,-1),C=l.stylize(C,"name")):(C=C.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),C=l.stylize(C,"string"))}return C+": "+_}function U(l,p,y){var P=l.reduce(function(L,R){return R.indexOf(`
`)>=0,L+R.replace(/\u001b\[\d\d?m/g,"").length+1},0);return P>60?y[0]+(p===""?"":p+`
 `)+" "+l.join(`,
  `)+" "+y[1]:y[0]+p+" "+l.join(", ")+" "+y[1]}o.types=dr;function Z(l){return Array.isArray(l)}o.isArray=Z;function Y(l){return typeof l=="boolean"}o.isBoolean=Y;function W(l){return l===null}o.isNull=W;function K(l){return l==null}o.isNullOrUndefined=K;function Me(l){return typeof l=="number"}o.isNumber=Me;function de(l){return typeof l=="string"}o.isString=de;function Be(l){return typeof l=="symbol"}o.isSymbol=Be;function te(l){return l===void 0}o.isUndefined=te;function ce(l){return ie(l)&&ue(l)==="[object RegExp]"}o.isRegExp=ce,o.types.isRegExp=ce;function ie(l){return typeof l=="object"&&l!==null}o.isObject=ie;function pe(l){return ie(l)&&ue(l)==="[object Date]"}o.isDate=pe,o.types.isDate=pe;function ee(l){return ie(l)&&(ue(l)==="[object Error]"||l instanceof Error)}o.isError=ee,o.types.isNativeError=ee;function ye(l){return typeof l=="function"}o.isFunction=ye;function le(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||typeof l>"u"}o.isPrimitive=le,o.isBuffer=Ai;function ue(l){return Object.prototype.toString.call(l)}function re(l){return l<10?"0"+l.toString(10):l.toString(10)}var Te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function he(){var l=new Date,p=[re(l.getHours()),re(l.getMinutes()),re(l.getSeconds())].join(":");return[l.getDate(),Te[l.getMonth()],p].join(" ")}o.log=function(){console.log("%s - %s",he(),o.format.apply(o,arguments))},o.inherits=Ei,o._extend=function(l,p){if(!p||!ie(p))return l;for(var y=Object.keys(p),P=y.length;P--;)l[y[P]]=p[y[P]];return l};function me(l,p){return Object.prototype.hasOwnProperty.call(l,p)}var Q=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;o.promisify=function(p){if(typeof p!="function")throw new TypeError('The "original" argument must be of type Function');if(Q&&p[Q]){var y=p[Q];if(typeof y!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(y,Q,{value:y,enumerable:!1,writable:!1,configurable:!0}),y}function y(){for(var P,L,R=new Promise(function(k,H){P=k,L=H}),C=[],_=0;_<arguments.length;_++)C.push(arguments[_]);C.push(function(k,H){k?L(k):P(H)});try{p.apply(this,C)}catch(k){L(k)}return R}return Object.setPrototypeOf(y,Object.getPrototypeOf(p)),Q&&Object.defineProperty(y,Q,{value:y,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(y,t(p))},o.promisify.custom=Q;function ge(l,p){if(!l){var y=new Error("Promise was rejected with a falsy value");y.reason=l,l=y}return p(l)}function M(l){if(typeof l!="function")throw new TypeError('The "original" argument must be of type Function');function p(){for(var y=[],P=0;P<arguments.length;P++)y.push(arguments[P]);var L=y.pop();if(typeof L!="function")throw new TypeError("The last argument must be of type Function");var R=this,C=function(){return L.apply(R,arguments)};l.apply(this,y).then(function(_){process.nextTick(C.bind(null,null,_))},function(_){process.nextTick(ge.bind(null,_,C))})}return Object.setPrototypeOf(p,Object.getPrototypeOf(l)),Object.defineProperties(p,t(l)),p}o.callbackify=M})(Lt);class Mi{constructor(){this.currentAdapter=null,this._activeController=null,this.activeController=null}renderMenuWithSystem(e,t,r="cd-sidebar"){var s,c,f,g;console.debug("Starting renderMenuWithSystem()"),console.debug("renderMenuWithSystem()/01"),this.renderPlainMenu(e,r);const n=((f=(c=(s=t==null?void 0:t.layout)==null?void 0:s.sidebar)==null?void 0:c.menu)==null?void 0:f.menuSystem)||"plain",i=this.menuAdapterFactory(n);console.debug("renderMenuWithSystem()/adapter:",JSON.stringify(i)),(g=this.currentAdapter)!=null&&g.destroy&&(console.debug("renderMenuWithSystem()/02"),this.currentAdapter.destroy()),i&&(console.debug("renderMenuWithSystem()/03"),i.initialize(r,t.id),this.currentAdapter=i),console.debug("renderMenuWithSystem()/04")}renderPlainMenu(e,t="sidebar",r){const n=document.getElementById(t);n&&(console.log("MenuService::renderPlainMenu()/menu:",this.renderMenuHtml(e)),n.innerHTML=`<ul class="cd-menu-root">${this.renderMenuHtml(e)}</ul>`,this.attachClickHandlers(n,e,r))}attachClickHandlers(e,t,r){e.querySelectorAll(".cd-menu-link").forEach(i=>{i.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const c=i.getAttribute("data-id");if(!c)return;const f=this.findMenuItemById(t,c);f&&this.onMenuClick(f,r)})})}findMenuItemById(e,t){for(const r of e){if(r.menuId===t)return r;if(r.children){const n=this.findMenuItemById(r.children,t);if(n)return n}}return null}walkMenu(e,t,r,n,i){var s;for(const c of e){const f=r[n++];f&&f.addEventListener("click",g=>{g.stopPropagation(),this.onMenuClick(c,i)}),(s=c.children)!=null&&s.length&&this.walkMenu(c.children,f,r,n,i)}}onMenuClick(e,t){var r;if(console.debug(`Menu clicked  ID: ${e.menuId}, Label: ${e.label}`),console.debug("MenuService:onMenuClick()/item:",Lt.inspect(e,{depth:2})),e.itemType==="action"&&e.action){console.debug(`[MenuService] Executing action for '${e.label}'`),e.action();return}if(e.itemType==="route"&&e.route&&e.controller){console.debug(`[MenuService] Loading route content for '${e.label}'`),this.loadResource({cdToken:t,item:e});return}if(e.itemType==="template"&&e.template&&e.controller){console.debug(`[MenuService] Loading template for '${e.label}'`),this.loadResource({cdToken:t,item:e});return}if(e.children&&e.children.length>0){console.debug(`[MenuService] Toggling menu node expansion for '${e.label}'`);const n=(r=document.querySelector(`[data-id="${e.menuId}"]`))==null?void 0:r.closest("li.cd-menu-item");if(n){n.classList.toggle("expanded");const i=n.querySelector(".cd-submenu");i&&i.classList.toggle("open")}return}console.warn(`[MenuService] Unhandled menu item type '${e.itemType}' for label '${e.label}'`)}async loadResource(e={}){console.log("MenuService::loadResource()/start..."),console.log("[MenuService][loadResource] options:",e);const{cdToken:t,item:r}=e;if(!r){console.error("MenuService.loadResource() called without a valid MenuItem.");return}const n=$e.getInstance(),i=document.getElementById("cd-main-content");let s;if(this.activeController&&typeof this.activeController.__deactivate=="function"&&(console.log("MenuService::loadResource()/01: Executing __deactivate() on active controller"),await this.activeController.__deactivate()),console.log("MenuService::loadResource()/02: Retrieving controller via cache service"),s=await n.getOrInitializeController(r.route||`${r.moduleId}-${r.label}`,r.controller),!s){console.error(`[MenuService] Failed to initialize controller for route: ${r.route}`);return}let c=0;for(;(!s.uiSystemLoader||!s.svCdAdmin)&&c<10;)console.warn(`[MenuService] Waiting for controller services to initialize... attempt ${c+1}`),await new Promise(f=>setTimeout(f,20)),c++;if(i){console.log("MenuService::loadResource()/03: Injecting template into DOM");let f="";typeof r.template=="function"?f=r.template.call(s):typeof s.__template=="function"?f=s.__template.call(s):f=r.template||"",i.innerHTML=f}typeof s.__activate=="function"&&(console.log("MenuService::loadResource()/04: Executing __activate()"),await s.__activate()),typeof s.__afterInit=="function"&&(console.log("MenuService::loadResource()/05: Executing __afterInit()"),await s.__afterInit()),this.activeController=s,console.log("MenuService::loadResource()/end")}getActiveController(){return this._activeController}setActiveController(e){this._activeController=e}renderMenuHtml(e){return e.map((t,r)=>{const n=t.children&&t.children.length>0,i=t.icon?btoa(JSON.stringify(t.icon)):"",s=t.itemType||"route",c=t.route||"",f=t.menuId||`auto-${r}-${Math.random().toString(36).slice(2,8)}`;return t.menuId=f,`
        <li
          id="menu-item-${f}"
          class="cd-menu-item"
          data-id="${f}"
          data-type="${s}"
          data-route="${c}"
          ${i?`data-icon="${i}"`:""}
          tabindex="0"
          role="button"
        >
          <a href="#" class="cd-menu-link" data-id="${f}">
            <span class="cd-menu-label">${t.label}</span>
            ${n?'<span class="cd-menu-toggle-icon fa fa-chevron-right"></span>':""}
          </a>
          ${n?`<ul class="cd-submenu">${this.renderMenuHtml(t.children)}</ul>`:""}
        </li>
      `}).join("")}menuAdapterFactory(e){switch(e){case"metismenu":return new Yr;case"plain":default:return null}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}assignMenuIds(e,t=""){return e.map(r=>{const n=r.label||r.route||"item",i=`menu-item-${t?t+"-":""}${this.toKebabCase(n)}`,s={...r,menuId:i};return r.children&&r.children.length>0&&(s.children=this.assignMenuIds(r.children,this.toKebabCase(n))),s})}prepareMenu(e){const t=this.assignMenuIds(e);return this.ensureItemTypes(t)}ensureItemTypes(e){return e.map(t=>{let r="route";t.itemType?r=t.itemType:t.action?r="action":t.template?r="template":t.route&&(r="route");const n={...t,itemType:r};return t.children&&t.children.length>0&&(n.children=this.ensureItemTypes(t.children)),n})}}class Ti{constructor(e={}){this.context=e.context||"Shell",this.level=e.level||"debug",this.silent=e.silent||!1}shouldLog(e){const t={debug:0,info:1,warn:2,error:3};return t[e]>=t[this.level]}log(e,t,...r){if(this.silent||!this.shouldLog(e))return;const n=`[${this.context.toUpperCase()}] [${e.toUpperCase()}]`;switch(e){case"debug":console.debug(n,t,...r);break;case"info":console.info(n,t,...r);break;case"warn":console.warn(n,t,...r);break;case"error":console.error(n,t,...r);break}}debug(e,...t){this.log("debug",e,...t)}info(e,...t){this.log("info",e,...t)}warn(e,...t){this.log("warn",e,...t)}error(e,...t){this.log("error",e,...t)}setContext(e){this.context=e}setLevel(e){this.level=e}silence(){this.silent=!0}unsilence(){this.silent=!1}}const be=class be{async loadThemeConfig(e="default"){console.debug(`ThemeService::loadThemeConfig(${e})`);const t=await fetch(`/themes/${e}/theme.json`);if(!t.ok)throw new Error(`Failed to load theme config: ${t.statusText}`);const r=await t.json();return be.setActiveTheme(r),r}static setActiveTheme(e){be.currentTheme=e,e!=null&&e.colors&&Object.entries(e.colors).forEach(([t,r])=>{const n=String(r);document.documentElement.style.setProperty(`--cd-${t}-color`,n)})}static get layout(){var e;return((e=be.currentTheme)==null?void 0:e.layout)||{}}static get activeTheme(){return be.currentTheme}};be.currentTheme=null;let It=be;const Oi="modulepreload",_i=function(o){return"/"+o},fr={},z=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(t.map(f=>{if(f=_i(f),f in fr)return;fr[f]=!0;const g=f.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":Oi,g||(E.as="script"),E.crossOrigin="",E.href=f,c&&E.setAttribute("nonce",c),document.head.appendChild(E),g)return new Promise((B,D)=>{E.addEventListener("load",B),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};let Pi,tt,kr;const Ci=async()=>{if(typeof window>"u")try{const[o,e,t]=await Promise.all([z(()=>import("./__vite-browser-external_fs-DU1_jvsO.js"),[]),z(()=>import("./__vite-browser-external_path-SE2pKm0_.js"),[]),z(()=>import("./url-B4wsyKZ0.js").then(r=>r.u),[])]);Pi=o,tt=e,kr=t}catch(o){console.error("[ModuleService] Failed to load Node.js modules:",o)}},X=class X{constructor(){this.modules={},console.debug("[ModuleService][constructor]: starting"),this.isViteMode?(console.debug("[ModuleService] Running under Vite (browser)."),this.modules=Object.assign({"/src/CdShell/app/cd-ai/view/index.js":()=>z(()=>Promise.resolve().then(()=>Ui),void 0),"/src/CdShell/app/cd-geo/view/index.js":()=>z(()=>import("./index-DIGhDJk_.js"),[]),"/src/CdShell/app/coops/view/index.js":()=>z(()=>import("./index-YhLg4ZnN.js"),[]),"/src/CdShell/app/ui-adaptor-port/view/index.js":()=>z(()=>Promise.resolve().then(()=>Fi),void 0),"/src/CdShell/sys/base/view/index.js":()=>z(()=>Promise.resolve().then(()=>Di),void 0),"/src/CdShell/sys/cd-admin/view/index.js":()=>z(()=>import("./index-ByO75k8h.js"),__vite__mapDeps([0,1])),"/src/CdShell/sys/cd-comm/view/index.js":()=>z(()=>import("./index-BWP2Vk9F.js"),[]),"/src/CdShell/sys/cd-guig/view/index.js":()=>z(()=>Promise.resolve().then(()=>Ni),void 0),"/src/CdShell/sys/cd-push/view/index.js":()=>z(()=>import("./index-DMjNbz6u.js"),[]),"/src/CdShell/sys/cd-scheduler/view/index.js":()=>z(()=>Promise.resolve().then(()=>xi),void 0),"/src/CdShell/sys/cd-store/view/index.js":()=>z(()=>Promise.resolve().then(()=>Vi),void 0),"/src/CdShell/sys/cd-user/view/index.js":()=>z(()=>import("./index-BEx0eJtE.js"),__vite__mapDeps([2,1])),"/src/CdShell/sys/dev-descriptor/view/index.js":()=>z(()=>Promise.resolve().then(()=>zi),void 0),"/src/CdShell/sys/dev-sync/view/index.js":()=>z(()=>import("./index-Cfy3-rsD.js"),[]),"/src/CdShell/sys/moduleman/view/index.js":()=>z(()=>Promise.resolve().then(()=>Gi),void 0),"/src/CdShell/sys/theme/view/index.js":()=>z(()=>Promise.resolve().then(()=>Wi),void 0),"/src/CdShell/sys/utils/view/index.js":()=>z(()=>Promise.resolve().then(()=>Hi),void 0)})):console.debug("[ModuleService] Running under Node (non-Vite).")}static getInstance(){return X.instance||(X.instance=new X),X.instance}get isBrowser(){return typeof window<"u"}get isViteMode(){return this.isBrowser}get baseDir(){return this.isViteMode?"/src/CdShell":tt==null?void 0:tt.resolve(process.cwd(),"dist-ts/CdShell")}static async ensureInitialized(){this.initPromise||(this.initPromise=Ci()),await this.initPromise}static async preloadModulesSequentially(){const e=X.getInstance();for(const t of this.preloadModules)try{console.debug(`[Preload] Loading ${t.moduleId}`);const n=(await e.loadModule(t.ctx,t.moduleId)).controllers.find(i=>i.name===t.component);if(n!=null&&n.instance&&typeof n.instance.__setup=="function"){const i=n.instance;console.debug(`[Preload] Setting up ${t.component}`),await i.__setup()}else console.warn(`[Preload] Controller component '${t.component}' not found in module ${t.moduleId}.`);console.debug(`[Preload] Completed ${t.component}`)}catch(r){console.error(`[Preload] Failed ${t.moduleId}: ${r}`)}}async loadModule(e,t){await X.ensureInitialized(),X.hasPreloaded||(X.hasPreloaded=!0,await X.preloadModulesSequentially()),console.debug("ModuleService::loadModule()/01:");const r=this.isViteMode,n=this.baseDir,i=r?`src/CdShell/${e}/${t}/view/index.js`:`${n}/${e}/${t}/view/index.js`;if(console.debug("[ModuleService] expectedPathFragment:",i),r){console.debug("[ModuleService] 1");const f=Object.keys(this.modules).find(g=>g.replace(/^\.?\//,"")===i);if(!f)throw console.error("[ModuleService] Available module keys:",Object.keys(this.modules)),new Error(`[ModuleService] Module not found for ctx=${e}, moduleId=${t}`);try{console.debug("[ModuleService][loadModule] pathKey:",f);const g=this.modules[f],E=(await g()).module;if(!E)throw new Error(`Missing 'module' export in: ${f}`);console.debug("[ModuleService][loadModule] moduleInfo:",E),console.debug("[ModuleService][loadModule] moduleInfo.controllers:",E.controllers);const B=E.controllers.find(N=>N.default===!0);return E.isDefault&&B||console.debug(`[ModuleService] Loaded module metadata passively: ${t}. Setup skipped.`),console.log(`[ModuleService] Loaded '${t}' (Vite mode) at ${new Date().toLocaleString()}`),E}catch(g){throw console.error("[ModuleService] Browser import failed:",g),g}}const c=`${n.replace(/\\/g,"/").replace(/\/+$/,"")}/${e}/${t}/view/index.js`;console.debug("[ModuleService] Importing (Node):",c);try{const g=await import(kr.pathToFileURL(c).href);return console.log(`[ModuleService] Loaded '${t}' (Node mode) at ${new Date().toLocaleString()}`),g.module}catch(f){throw console.error("[ModuleService] Node import failed:",f),f}}async getAllowedModules(){const e=[],t=await this.loadModule("sys","cd-user");t&&(t.isDefault=!0,e.push(t));const r=await this.loadModule("sys","cd-admin");return r&&(r.isDefault=!1,e.push(r)),e}};X.initPromise=null,X.hasPreloaded=!1,X.preloadModules=[{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentService"},{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentClientService"}];let ct=X;class $i{findControllerInfoByRoute(e,t){const r=t.split("/"),n=r[r.length-1];return console.log("[ControllerService][findControllerInfoByRoute] controllerName:",n),console.log("[ControllerService][findControllerInfoByRoute] mod:",Lt.inspect(e,{depth:2})),e.controllers.find(i=>i.name===n)}}class Ae{constructor(e){this.configService=e,this.cache=new Map}static getInstance(e){if(!Ae.instance){if(!e)throw new Error("SysCacheService must be initialized with ConfigService on first instantiation.");Ae.instance=new Ae(e)}return Ae.instance}setLoaders(e,t){this._uiSystemLoader=e,this._uiThemeLoader=t}async loadAndCacheAll(){if(!this._uiSystemLoader||!this._uiThemeLoader)throw new Error("SysCacheService: loaders must be set before load.");if(this.cache.size>0)return;console.log("[SysCacheService] 01: Starting Eager Load");const t=(await this.configService.loadConfig()).uiConfig;this.cache.set("uiConfig",t);const r=await this._uiSystemLoader.fetchAvailableSystems(t);console.log("[SysCacheService] uiSystemsData:",r);const n=r.map(m=>({id:m.id,name:m.name,version:m.version,description:m.description,cssUrl:m.cssUrl,jsUrl:m.jsUrl,assetPath:m.assetPath,stylesheets:m.stylesheets||[],scripts:m.scripts||[],themesAvailable:m.themesAvailable||[],themeActive:m.themeActive||null,conceptMappings:m.conceptMappings||{},directiveMap:m.directiveMap||{},tokenMap:m.tokenMap||{},containers:m.containers||[],components:m.components||[],renderRules:m.renderRules||{},metadata:m.metadata||{},extensions:m.extensions||{},author:m.author,license:m.license,repository:m.repository,displayName:m.displayName||m.name})),i=n.map(m=>({id:m.id,name:m.name,displayName:m.displayName,themesAvailable:m.themesAvailable}));console.log("[SysCacheService] Normalized Systems:",i);const s=await this._uiThemeLoader.fetchAvailableThemes(t),c=(s.themes||[]).map(m=>({id:m.id,name:m.name})),f=(s.variants||[]).map(m=>({id:m.id,name:m.name})),g=s.descriptors||[];this.cache.set("uiSystems",i),this.cache.set("uiSystemDescriptors",n),this.cache.set("themes",c),this.cache.set("formVariants",f),this.cache.set("themeDescriptors",g),this.cache.set("uiConfigNormalized",s.uiConfig||t),console.log(`[SysCacheService] Load complete. Systems: ${i.length}, Themes: ${c.length}`)}getUiSystems(){return this.cache.get("uiSystems")||[]}getUiSystemDescriptors(){return this.cache.get("uiSystemDescriptors")||[]}getThemes(){return this.cache.get("themes")||[]}getFormVariants(){return this.cache.get("formVariants")||[]}getThemeDescriptors(){return this.cache.get("themeDescriptors")||[]}getConfig(){return this.cache.get("uiConfigNormalized")||{}}get(e){return this.cache.get(e)}get uiSystemLoader(){return this._uiSystemLoader}get uiThemeLoader(){return this._uiThemeLoader}async ensureReady(){this.cache.size===0&&await this.loadAndCacheAll()}}function O(o,e={}){console.log(`%c[CSS-DIAG] ${o}`,"background:#222;color:#0f0;padding:2px 4px;border-radius:3px",e)}function ji(){const o=document.getElementById("cd-sidebar");if(!o)return;const e=window.getComputedStyle(o);console.warn("%c[SIDEBAR-DIAG] Sidebar State:","background:#440;color:#fff;padding:3px"),console.log("display:",e.display),console.log("position:",e.position),console.log("width:",e.width),console.log("flex-direction:",e.flexDirection),console.log("css file winning:",o)}const Nt=class Nt{static register(e,t){console.log("[UiSystemAdapterRegistry] register:",e,t),this.registry.set(e,t)}static get(e){return this.registry.get(e)||null}static list(){return Array.from(this.registry.keys())}};Nt.registry=new Map;let fe=Nt;const Ii=Object.freeze(Object.defineProperty({__proto__:null,UiSystemAdapterRegistry:fe},Symbol.toStringTag,{value:"Module"}));class Li{async activate(e){console.log(`[${this.constructor.name}] activate() descriptor.id =`,e==null?void 0:e.id),console.log(`[${this.constructor.name}] activate() descriptor.version =`,e==null?void 0:e.version)}async deactivate(){document.documentElement.removeAttribute("data-bs-theme")}async applyTheme(e){try{if(!e)return;let t;typeof e=="string"?t=e==="dark"?"dark":"light":typeof e=="object"&&(t=e.mode||(e.id==="dark"?"dark":"light")),document.documentElement.setAttribute("data-bs-theme",t==="dark"?"dark":"light"),console.log("[Bootstrap502Adapter] applied bs-theme:",t)}catch(t){console.warn("[Bootstrap502Adapter] applyTheme error",t)}}}fe.register("bootstrap-502",new Li);class Br{constructor(){this.descriptor=null,this.observer=null,this.appliedSet=new WeakSet,console.log("%c[Bootstrap538AdapterService] constructor()","color:#6cf")}async activate(e){O("[Bootstrap538Adapter] activate() START",{id:e==null?void 0:e.id}),this.descriptor=e||null,e!=null&&e.conceptMappings?console.log("%c[Bootstrap538Adapter] Loaded conceptMappings:","color:#0ff",e.conceptMappings):console.warn("%c[Bootstrap538Adapter] descriptor.conceptMappings missing!","color:orange"),O("[Bootstrap538Adapter] Initial mapAll() pass"),this.mapAll(),this.observeMutations(),O("[Bootstrap538Adapter] activate() COMPLETE",{active:e==null?void 0:e.id})}async deactivate(){O("[Bootstrap538Adapter] deactivate() START");try{document.documentElement.removeAttribute("data-bs-theme"),console.log("[Bootstrap538Adapter] removed data-bs-theme")}catch{}if(this.observer){try{this.observer.disconnect(),console.log("[Bootstrap538Adapter] MutationObserver disconnected")}catch{}this.observer=null}this.descriptor=null,this.appliedSet=new WeakSet,O("[Bootstrap538Adapter] deactivate() COMPLETE")}async applyTheme(e){O("[Bootstrap538Adapter] applyTheme()",{themeDescriptorOrId:e});try{if(!e){console.warn("[Bootstrap538Adapter] applyTheme ignored (null theme)");return}let t;typeof e=="string"?t=e==="dark"?"dark":"light":typeof e=="object"&&(t=e.mode||(e.id==="dark"?"dark":"light")),document.documentElement.setAttribute("data-bs-theme",t==="dark"?"dark":"light"),O("[Bootstrap538Adapter] applied Bootstrap theme",{mode:t})}catch(t){console.warn("[Bootstrap538Adapter] applyTheme error",t)}}getMapping(e){console.log("[Bootstrap538Adapter] getMapping() this.descriptor:",this.descriptor);const t=this.descriptor&&this.descriptor.conceptMappings&&this.descriptor.conceptMappings[e]||void 0;return console.log(`%c[Bootstrap538Adapter] getMapping('${e}') =`,"color:#9f9",t),t}applyMappingToElement(e,t){if(t){if(this.appliedSet.has(e)){t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n));return}console.log("%c[Bootstrap538Adapter] Applying mapping to element:","color:#7ff;",{tag:e.tagName,mapping:t}),t.class&&t.class.split(/\s+/).forEach(r=>{r&&e.classList.add(r)}),t.attrs&&Object.entries(t.attrs).forEach(([r,n])=>e.setAttribute(r,n)),this.appliedSet.add(e)}}mapButtons(){const e=this.getMapping("button");if(!e)return;const r=document.querySelectorAll("button[cdButton], button.cd-button");O("[Bootstrap538Adapter] mapButtons()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapInputs(){const e=this.getMapping("input");if(!e)return;const r=document.querySelectorAll("input[cdFormControl], textarea[cdFormControl], select[cdFormControl]");O("[Bootstrap538Adapter] mapInputs()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapFormGroups(){const e=this.getMapping("formGroup");if(!e)return;const r=document.querySelectorAll(".cd-form-field");O("[Bootstrap538Adapter] mapFormGroups()",{count:r.length}),r.forEach(n=>this.applyMappingToElement(n,e))}mapOtherConcepts(){const e=this.descriptor&&this.descriptor.conceptMappings||{},t=Object.keys(e).filter(r=>!["button","input","formGroup"].includes(r));O("[Bootstrap538Adapter] mapOtherConcepts()",{concepts:t}),t.forEach(r=>{const n=e[r],i=`[data-cd-${r}], .cd-${r}`;document.querySelectorAll(i).forEach(c=>this.applyMappingToElement(c,n))})}mapAll(){console.log("%c[Bootstrap538Adapter] mapAll()  START","background:#444;color:#aaf;padding:2px");try{this.mapButtons(),this.mapInputs(),this.mapFormGroups(),this.mapOtherConcepts()}catch(e){console.warn("[Bootstrap538Adapter] mapAll error",e)}console.log("%c[Bootstrap538Adapter] mapAll()  END","background:#444;color:#aaf;padding:2px")}observeMutations(){if(!this.observer){O("[Bootstrap538Adapter] MutationObserver ATTACH"),this.observer=new MutationObserver(e=>{console.log("%c[Bootstrap538Adapter] Mutation detected  scheduling mapAll()","color:#ffa;"),"requestIdleCallback"in window?window.requestIdleCallback(()=>this.mapAll()):setTimeout(()=>this.mapAll(),16)});try{this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1})}catch(e){console.warn("[Bootstrap538Adapter] observer failed to attach",e),this.observer=null}}}}fe.register("bootstrap-538",new Br);class Ri{async activate(e){console.log(`[${this.constructor.name}] activate() descriptor.id =`,e==null?void 0:e.id),console.log(`[${this.constructor.name}] activate() descriptor.version =`,e==null?void 0:e.version)}async deactivate(){document.documentElement.removeAttribute("data-md-theme")}async applyTheme(e){if(!e)return;const t=typeof e=="string"?e:e.mode;t==="dark"?(document.documentElement.classList.add("md-dark"),document.documentElement.classList.remove("md-light")):(document.documentElement.classList.remove("md-dark"),document.documentElement.classList.add("md-light")),console.log("[MaterialAdapter] applyTheme:",t)}}fe.register("material-design",new Ri);class ki{async activate(e){console.log(`[${this.constructor.name}] activate() descriptor.id =`,e==null?void 0:e.id),console.log(`[${this.constructor.name}] activate() descriptor.version =`,e==null?void 0:e.version)}async deactivate(){document.documentElement.removeAttribute("data-md-theme")}async applyTheme(e){if(!e)return;const t=typeof e=="string"?e:e.mode;t==="dark"?(document.documentElement.classList.add("md-dark"),document.documentElement.classList.remove("md-light")):(document.documentElement.classList.remove("md-dark"),document.documentElement.classList.add("md-light")),console.log("[MaterialAdapter] applyTheme:",t)}}fe.register("plain",new ki);new Br;const Et={id:"bootstrap-538",version:"5.3.8",themeActive:"light"},Se=class Se{constructor(e){this.activeSystem=null,this.sysCache=e}static getInstance(e){if(!Se.instance){if(!e)throw new Error("UiSystemLoaderService.getInstance requires SysCacheService on first call.");Se.instance=new Se(e)}return Se.instance}async fetchAvailableSystems(e){const t=e.uiSystemBasePath||"/public/assets/ui-systems/",r=fe.list();console.log("[UiSystemLoaderService] Registered UI Systems:",r);const n=[];for(const i of r){const s=`${t}${i}/descriptor.json`;try{console.log(`[UiSystemLoaderService] Loading descriptor: ${s}`);const c=await fetch(s);if(!c.ok)throw new Error(`HTTP ${c.status}`);const f=await c.json(),g=`${t}${i}/`;n.push({...f,id:i,cssUrl:f.cssUrl?g+f.cssUrl:void 0,jsUrl:f.jsUrl?g+f.jsUrl:void 0,stylesheets:(f.stylesheets||[]).map(m=>g+m),scripts:(f.scripts||[]).map(m=>g+m),themesAvailable:f.themesAvailable||[],themeActive:f.themeActive||null,conceptMappings:f.conceptMappings||{},directiveMap:f.directiveMap||{}})}catch(c){console.warn(`[UiSystemLoaderService] Failed to load ${s}`,c);const f=`${t}${i}/`;n.push({id:i,name:i,version:"unknown",cssUrl:`${f}${i}.min.css`,jsUrl:`${f}${i}.min.js`,stylesheets:[],scripts:[],conceptMappings:{},themesAvailable:[],themeActive:null})}}return n}list(){return this.sysCache.get("uiSystems")||[]}getSystemById(e){return(this.sysCache.get("uiSystems")||[]).find(r=>r.id===e)}async activate(e){var f;if(O("[UiSystemLoaderService.activate] START",{id:e}),await this.sysCache.ensureReady(),!e){const g=(f=this.detectUiSystem)==null?void 0:f.call(this);g!=null&&g.id&&(e=g.id)}const t=this.getFullDescriptor(e);console.log("[UiSystemLoaderService.activate] descriptorFromCache:",t);const r={id:e,cssUrl:`/assets/ui-systems/${e}/${e}.min.css`,jsUrl:`/assets/ui-systems/${e}/${e}.min.js`,assetPath:`/assets/ui-systems/${e}`,stylesheets:[],scripts:[],conceptMappings:{},directiveMap:{},metadata:{},extensions:{}},n=t||r;this.activeSystem=n;try{window.CdActiveUiDescriptor=n,window.CD_ACTIVE_UISYSTEM=e,window.CdShellActiveUiSystem=e}catch(g){console.warn("[UiSystemLoaderService.activate] Could not set global descriptor",g)}document.querySelectorAll("link[data-cd-uisystem], script[data-cd-uisystem]").forEach(g=>g.remove()),O("[UiSystemLoaderService.activate] REMOVED OLD SYSTEM ASSETS",{});const i=n.cssUrl||`${n.assetPath||`/assets/ui-systems/${e}`}/bootstrap.min.css`,s=n.jsUrl||`${n.assetPath||`/assets/ui-systems/${e}`}/${e}.min.js`,c=`${n.assetPath||`/assets/ui-systems/${e}`}/bridge.css`;O("[UiSystemLoaderService.activate] RESOLVED PATHS",{cssPath:i,jsPath:s,bridgeCssPath:c});try{await this.loadCSS(i,e),O("[UiSystemLoaderService.activate] CSS LOADED",{cssPath:i})}catch(g){O("[UiSystemLoaderService.activate] CSS LOAD FAILED",{cssPath:i,err:g})}try{await this.loadCSS(c,`${e}-bridge`),O("[UiSystemLoaderService.activate] BRIDGE CSS LOADED",{bridgeCssPath:c})}catch(g){console.log(`[UiSystemLoaderService.activate] bridge.css not found for ${e} (optional)`),O("[UiSystemLoaderService.activate] BRIDGE CSS LOAD FAILED",{bridgeCssPath:c,err:g})}try{await this.loadScript(s,e),O("[UiSystemLoaderService.activate] SCRIPT LOADED",{jsPath:s})}catch(g){console.warn("[UiSystemLoaderService.activate] script load failed",g),O("[UiSystemLoaderService.activate] SCRIPT LOAD FAILED",{jsPath:s,err:g})}try{const{UiSystemAdapterRegistry:g}=await z(async()=>{const{UiSystemAdapterRegistry:E}=await Promise.resolve().then(()=>Ii);return{UiSystemAdapterRegistry:E}},[]),m=g.get(e);m&&typeof m.activate=="function"?(await m.activate(n),O("[UiSystemLoaderService.activate] ADAPTER ACTIVATED",{id:e})):console.log(`[UiSystemLoaderService.activate] No in-app adapter registered for ${e} (skipping)`)}catch(g){console.warn("[UiSystemLoaderService.activate] adapter activation failed",g)}O("[UiSystemLoaderService.activate] COMPLETE",{activeSystem:e})}async applyTheme(e,t){O("[UiSystemLoaderService.applyTheme] start",{systemId:e,themeId:t});const r=fe.get(e);if(console.log("[UiSystemLoaderService.applyTheme] adapter received:",r),!r){console.warn("[UiSystemLoaderService.applyTheme] no adapter for",e);return}const n=this.sysCache.get("themeDescriptors")||[];console.log("[UiSystemLoaderService][applyTheme] descriptors:",n);const i=n.find(s=>s.id===t);console.log("[UiSystemLoaderService][applyTheme] descriptors:",i),await r.applyTheme(i||t),O("[UiSystemLoaderService.applyTheme] done",{systemId:e,themeId:t})}async loadCSS(e,t){return O("[UiSystemLoaderService.loadCSS] REQUEST",{path:e,id:t}),new Promise((r,n)=>{try{const i=document.head||document.getElementsByTagName("head")[0];if(!i)return n(new Error("document.head missing"));const s=document.createElement("link");s.rel="stylesheet",s.href=e,s.setAttribute("data-cd-uisystem",t),s.setAttribute("data-cd-origin","ui-system"),s.onload=()=>{const c=s.href;O("[UiSystemLoaderService.loadCSS] LOADED",{path:e,id:t,resolved:c,order:Array.from(i.querySelectorAll("link")).map(f=>f.href)}),r(c)},s.onerror=c=>{O("[UiSystemLoaderService.loadCSS] ERROR",{path:e,id:t,ev:c}),n(new Error(`Failed to load CSS: ${e}`))},i.insertAdjacentElement("beforeend",s)}catch(i){O("[UiSystemLoaderService.loadCSS] EXCEPTION",{path:e,id:t,err:i}),n(i)}})}async loadScript(e,t){return new Promise((r,n)=>{try{const i=document.createElement("script");i.src=e,i.async=!0,i.setAttribute("data-cd-uisystem",t),i.setAttribute("data-cd-origin","ui-system"),i.onload=()=>r(),i.onerror=c=>n(c);const s=document.body||document.getElementsByTagName("body")[0];if(!s)return n(new Error("document.body missing"));s.appendChild(i)}catch(i){n(i)}})}getActive(){return console.log("[UiSystemLoaderService][getActive] start."),this.activeSystem}detectFromRuntime(){return window.CdShellActiveUiSystem||window.CD_ACTIVE_UISYSTEM||null}detectFromMeta(){const e=document.querySelector('meta[name="cd-uiform"]');return(e==null?void 0:e.content)||null}detectUiSystem(){const e=this.detectFromRuntime();if(e)return{...Et,id:e};const t=this.detectFromMeta();return t?{...Et,id:t}:Et}getFullDescriptor(e){return(this.sysCache.get("uiSystemDescriptors")||[]).find(r=>r.id===e)}};Se.instance=null;let lt=Se;const we=class we{constructor(){this.config=null,this.CONFIG_PATH="/shell.config.json"}static getInstance(){return we.instance||(we.instance=new we),we.instance}async loadConfig(){if(this.config)return this.config;try{const e=await fetch(this.CONFIG_PATH);if(!e.ok)throw new Error(`Failed to load config ${e.status}`);return this.config=await e.json(),console.log("[ConfigService] loaded config:",this.config),this.config}catch(e){return console.error("[ConfigService] loadConfig error:",e),this.config={appName:"Corpdesk",fallbackTitle:"Corpdesk",appVersion:"0.0.0",appDescription:"",themeConfig:{currentThemePath:"/themes/default/theme.json",accessibleThemes:["default","dark"]},defaultModulePath:"sys/cd-user",logLevel:"debug",uiConfig:{defaultUiSystemId:"bootstrap-538",defaultThemeId:"default",defaultFormVariant:"standard",uiSystemBasePath:"/public/assets/ui-systems/"}},this.config}}getUiConfig(){if(!this.config)throw new Error("ConfigService: config not loaded; call loadConfig()");return this.config.uiConfig}};we.instance=null;let Le=we;const oe=class oe{constructor(e){this.configService=Le.getInstance(),this.sysCache=e}static getInstance(e){if(!oe.instance){if(!e)throw new Error("UiThemeLoaderService.getInstance requires SysCacheService on first call.");oe.instance=new oe(e)}return oe.instance}async fetchAvailableThemes(e){var s,c;console.log("[UiThemeLoaderService][fetchAvailableThemes] start",e);const t=e&&e.accessibleThemes||((c=(s=this.configService.config)==null?void 0:s.themeConfig)==null?void 0:c.accessibleThemes)||["default","dark"],r=[];for(const f of t){const g=`/themes/${f}/theme.json`;try{const m=await fetch(g);if(!m.ok){console.warn(`[UiThemeLoaderService] theme descriptor not found: ${g}`);continue}const E=await m.json();r.push(E)}catch(m){console.warn(`[UiThemeLoaderService] error fetching theme descriptor ${g}`,m)}}return{themes:r.map(f=>({id:f.id,name:f.name})),variants:[{id:"standard",name:"Standard"},{id:"compact",name:"Compact"},{id:"floating",name:"Floating"}],descriptors:r,uiConfig:e}}async loadThemeById(e){O("[UiThemeLoaderService.loadThemeById] start",{themeId:e}),document.querySelectorAll("link[data-cd-theme]").forEach(n=>n.remove());const t=this.getThemeDescriptor(e);if(!t){O("[UiThemeLoaderService.loadThemeById] descriptor not found",{themeId:e});const n=`/themes/${e}/theme.css`;await this.injectStyle(n,e,"theme");return}const r=t.css||t.cssPath||`/themes/${e}/theme.css`;await this.injectStyle(r,e,"theme"),O("[UiThemeLoaderService.loadThemeById] loaded",{themeId:e,cssPath:r})}getThemeDescriptor(e){return(this.sysCache.get("themeDescriptors")||[]).find(r=>r.id===e)}async loadFormVariant(e="standard"){document.querySelectorAll("link[data-cd-form]").forEach(r=>r.remove());const t=`/themes/common/forms/variants/cd-form-${e}.css`;await this.injectStyle(t,e,"form")}async injectStyle(e,t,r="theme"){return new Promise((n,i)=>{try{const s=document.head||document.getElementsByTagName("head")[0];if(!s)return i(new Error("document.head missing"));const c=document.createElement("link");c.rel="stylesheet",c.href=e,r==="theme"?c.setAttribute("data-cd-theme",t):c.setAttribute("data-cd-form",t),c.onload=()=>n(),c.onerror=f=>i(new Error(`failed to load ${e}`)),s.insertAdjacentElement("beforeend",c)}catch(s){i(s)}})}getActiveThemeId(){return console.log("[UiThemeLoaderService][getActiveThemeId] start."),localStorage.getItem(oe.ACTIVE_THEME_KEY)||""}getActiveFormVariantId(){return localStorage.getItem(oe.ACTIVE_FORM_VARIANT_KEY)||"standard"}};oe.ACTIVE_THEME_KEY="cd-active-theme-id",oe.ACTIVE_FORM_VARIANT_KEY="cd-active-form-variant",oe.instance=null;let ut=oe;class Bi{constructor(){this.logger=new Ti,this.svConfig=new Le,this.svSysCache=new Ae(this.svConfig)}async init(){this.logger.debug("[Main] init(): starting"),typeof window>"u"?(this.logger.debug("[Main] Running in Node  awaiting ensureInitialized()"),await ct.ensureInitialized()):this.logger.debug("[Main] Running in browser  skipping ensureInitialized()"),this.svConfig=new Le,this.svSysCache=new Ae(this.svConfig),this.svModule=new ct,this.svMenu=new Mi,this.svController=new $i,this.svTheme=new It;const e=await this.loadShellConfig();e.logLevel&&this.logger.setLevel(e.logLevel),this.logger.debug("[Main] init(): completed")}async run(){var N,G;this.logger.setLevel("debug"),this.logger.debug("starting bootstrapShell()"),O("Main.run() started");const e=await this.loadShellConfig();e.logLevel&&this.logger.setLevel(e.logLevel),this.svUiSystemLoader=lt.getInstance(this.svSysCache),this.svUiThemeLoader=ut.getInstance(this.svSysCache),this.svSysCache.setLoaders(this.svUiSystemLoader,this.svUiThemeLoader),await this.svSysCache.loadAndCacheAll(),O("Cache loaded"),await this.applyStartupUiSettings(),O("UI-System + Theme applied");const t=await this.svTheme.loadThemeConfig();O("ThemeConfig loaded",t),document.title=e.appName||e.fallbackTitle||"Corpdesk";const r=document.getElementById("cd-logo");r&&t.logo&&(r.src=t.logo);const n=await this.svModule.getAllowedModules(),i=n.find(U=>U.isDefault),s=(N=i==null?void 0:i.controllers.find(U=>U.default))==null?void 0:N.name;O("Modules Loaded",{allowedModules:n});const c=n.flatMap(U=>{const Z=Y=>Y.map(W=>{if(W.itemType==="route"&&W.route){const K=this.svController.findControllerInfoByRoute(U,W.route);K&&(W.controller=K.instance,W.template=typeof K.template=="function"?K.template:()=>K.template,W.moduleId=U.moduleId,U.isDefault&&K.name===s&&(W.moduleDefault=!0))}return W.children&&(W.children=Z(W.children)),W});return Z(U.menu||[])}),f=this.svMenu.prepareMenu(c);O("Menu prepared",f);try{const Z=await(await fetch(e.themeConfig.currentThemePath)).json();this.svMenu.renderMenuWithSystem(f,Z);const Y=document.getElementById("cd-sidebar");Y&&(!Y.innerHTML||Y.innerHTML.trim()==="")&&this.svMenu.renderPlainMenu(f,"cd-sidebar"),O("Sidebar rendered"),ji()}catch(U){console.error("[Main] Failed rendering menu",U)}try{const U=f.find(Y=>Y.label===(i==null?void 0:i.moduleId)),Z=(G=U==null?void 0:U.children)==null?void 0:G.find(Y=>Y.moduleDefault);Z&&await this.svMenu.loadResource({item:Z}),O("Default controller loaded")}catch(U){console.warn("[Main] auto-load default view failed",U)}const g=document.getElementById("cd-burger"),m=document.getElementById("cd-sidebar"),E=document.getElementById("cd-overlay"),B=()=>window.matchMedia("(max-width: 900px)").matches,D=()=>{B()||(m.classList.remove("open"),E.classList.add("hidden"),g.classList.remove("open"))};g&&m&&E&&(g.addEventListener("click",()=>{g.classList.toggle("open"),m.classList.toggle("open"),E.classList.toggle("hidden")}),E.addEventListener("click",()=>{g.classList.remove("open"),m.classList.remove("open"),E.classList.add("hidden")}),window.addEventListener("resize",D),D()),this.logger.debug("bootstrapShell(): run() complete"),O("Main.run() complete")}async applyStartupUiSettings(){Le.getInstance(),await this.svSysCache.ensureReady();const e=this.svSysCache.get("uiConfig");if(!e){console.warn("[Main.applyStartupUiSettings] uiConfig missing");return}const t=e.defaultUiSystemId,r=e.defaultThemeId;O("[MAIN.applyStartupUiSettings] start",{systemId:t,themeId:r});const n=lt.getInstance(this.svSysCache),i=ut.getInstance(this.svSysCache);try{await n.activate(t),O("[MAIN.applyStartupUiSettings] ui-system activated",{systemId:t})}catch(s){console.warn("[MAIN.applyStartupUiSettings] activate failed",s),O("[MAIN.applyStartupUiSettings] activate failed",{err:s})}try{await n.loadCSS("/themes/common/base.css","shell-base"),await n.loadCSS("/assets/css/index.css","shell-index"),O("[MAIN.applyStartupUiSettings] shell CSS loaded",{})}catch(s){console.warn("[MAIN.applyStartupUiSettings] shell CSS load failed",s)}try{await i.loadThemeById(r),O("[MAIN.applyStartupUiSettings] theme css injected",{themeId:r})}catch(s){console.warn("[MAIN.applyStartupUiSettings] theme load failed",s)}try{await n.applyTheme(t,r),O("[MAIN.applyStartupUiSettings] system applyTheme complete",{})}catch(s){console.warn("[MAIN.applyStartupUiSettings] applyTheme failed",s)}O("[MAIN.applyStartupUiSettings] done",{})}async loadShellConfig(){const e=await fetch("/shell.config.json");if(!e.ok)throw new Error(`Failed to load shell config: ${e.statusText}`);return await e.json()}}console.log("start 1");const Ur=new Bi;Ur.init();Ur.run().catch(o=>{console.error("[BOOTSTRAP ERROR]",o)});const Ui=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Fi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Di=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ni=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),xi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Vi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),zi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Gi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Wi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Hi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Ae as S,lt as U,Mr as a,ze as b,rt as c,qi as g,De as t,Lt as u};
