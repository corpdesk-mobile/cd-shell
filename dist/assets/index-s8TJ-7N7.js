const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-lndpYtwa.js","assets/cd-directive-binder.service-Ct7e55LB.js","assets/index-NLnjrZUJ.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ht(E){if(E.__esModule)return E;var e=E.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(E).forEach(function(i){var s=Object.getOwnPropertyDescriptor(E,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return E[i]}})}),n}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var he;(function(E){(function(e){var n=typeof globalThis=="object"?globalThis:typeof fe=="object"?fe:typeof self=="object"?self:typeof this=="object"?this:l(),i=s(E);typeof n.Reflect<"u"&&(i=s(n.Reflect,i)),e(i,n),typeof n.Reflect>"u"&&(n.Reflect=E);function s(g,b){return function(p,M){Object.defineProperty(g,p,{configurable:!0,writable:!0,value:M}),b&&b(p,M)}}function u(){try{return Function("return this;")()}catch{}}function h(){try{return(0,eval)("(function() { return this; })()")}catch{}}function l(){return u()||h()}})(function(e,n){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",u=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",h=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",l=typeof Object.create=="function",g={__proto__:[]}instanceof Array,b=!l&&!g,p={create:l?function(){return Z(Object.create(null))}:g?function(){return Z({__proto__:null})}:function(){return Z({})},has:b?function(t,r){return i.call(t,r)}:function(t,r){return r in t},get:b?function(t,r){return i.call(t,r)?t[r]:void 0}:function(t,r){return t[r]}},M=Object.getPrototypeOf(Function),O=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ze(),x=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Be(),A=typeof WeakMap=="function"?WeakMap:Fe(),T=s?Symbol.for("@reflect-metadata:registry"):void 0,D=Re(),z=De(D);function ye(t,r,o,a){if(y(o)){if(!ie(t))throw new TypeError;if(!oe(r))throw new TypeError;return Pe(t,r)}else{if(!ie(t))throw new TypeError;if(!C(r))throw new TypeError;if(!C(a)&&!y(a)&&!V(a))throw new TypeError;return V(a)&&(a=void 0),o=R(o),Ce(t,r,o,a)}}e("decorate",ye);function we(t,r){function o(a,v){if(!C(a))throw new TypeError;if(!y(v)&&!Ae(v))throw new TypeError;K(t,r,a,v)}return o}e("metadata",we);function _e(t,r,o,a){if(!C(o))throw new TypeError;return y(a)||(a=R(a)),K(t,r,o,a)}e("defineMetadata",_e);function be(t,r,o){if(!C(r))throw new TypeError;return y(o)||(o=R(o)),Q(t,r,o)}e("hasMetadata",be);function Ee(t,r,o){if(!C(r))throw new TypeError;return y(o)||(o=R(o)),U(t,r,o)}e("hasOwnMetadata",Ee);function Me(t,r,o){if(!C(r))throw new TypeError;return y(o)||(o=R(o)),X(t,r,o)}e("getMetadata",Me);function Se(t,r,o){if(!C(r))throw new TypeError;return y(o)||(o=R(o)),Y(t,r,o)}e("getOwnMetadata",Se);function Te(t,r){if(!C(t))throw new TypeError;return y(r)||(r=R(r)),ee(t,r)}e("getMetadataKeys",Te);function Oe(t,r){if(!C(t))throw new TypeError;return y(r)||(r=R(r)),te(t,r)}e("getOwnMetadataKeys",Oe);function Le(t,r,o){if(!C(r))throw new TypeError;if(y(o)||(o=R(o)),!C(r))throw new TypeError;y(o)||(o=R(o));var a=B(r,o,!1);return y(a)?!1:a.OrdinaryDeleteMetadata(t,r,o)}e("deleteMetadata",Le);function Pe(t,r){for(var o=t.length-1;o>=0;--o){var a=t[o],v=a(r);if(!y(v)&&!V(v)){if(!oe(v))throw new TypeError;r=v}}return r}function Ce(t,r,o,a){for(var v=t.length-1;v>=0;--v){var L=t[v],j=L(r,o,a);if(!y(j)&&!V(j)){if(!C(j))throw new TypeError;a=j}}return a}function Q(t,r,o){var a=U(t,r,o);if(a)return!0;var v=J(r);return V(v)?!1:Q(t,v,o)}function U(t,r,o){var a=B(r,o,!1);return y(a)?!1:re(a.OrdinaryHasOwnMetadata(t,r,o))}function X(t,r,o){var a=U(t,r,o);if(a)return Y(t,r,o);var v=J(r);if(!V(v))return X(t,v,o)}function Y(t,r,o){var a=B(r,o,!1);if(!y(a))return a.OrdinaryGetOwnMetadata(t,r,o)}function K(t,r,o,a){var v=B(o,a,!0);v.OrdinaryDefineOwnMetadata(t,r,o,a)}function ee(t,r){var o=te(t,r),a=J(t);if(a===null)return o;var v=ee(a,r);if(v.length<=0)return o;if(o.length<=0)return v;for(var L=new x,j=[],w=0,c=o;w<c.length;w++){var d=c[w],f=L.has(d);f||(L.add(d),j.push(d))}for(var m=0,_=v;m<_.length;m++){var d=_[m],f=L.has(d);f||(L.add(d),j.push(d))}return j}function te(t,r){var o=B(t,r,!1);return o?o.OrdinaryOwnMetadataKeys(t,r):[]}function ne(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function y(t){return t===void 0}function V(t){return t===null}function je(t){return typeof t=="symbol"}function C(t){return typeof t=="object"?t!==null:typeof t=="function"}function ke(t,r){switch(ne(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var o="string",a=se(t,u);if(a!==void 0){var v=a.call(t,o);if(C(v))throw new TypeError;return v}return xe(t)}function xe(t,r){var o,a,v;{var L=t.toString;if(F(L)){var a=L.call(t);if(!C(a))return a}var o=t.valueOf;if(F(o)){var a=o.call(t);if(!C(a))return a}}throw new TypeError}function re(t){return!!t}function Ie(t){return""+t}function R(t){var r=ke(t);return je(r)?r:Ie(r)}function ie(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function F(t){return typeof t=="function"}function oe(t){return typeof t=="function"}function Ae(t){switch(ne(t)){case 3:return!0;case 4:return!0;default:return!1}}function W(t,r){return t===r||t!==t&&r!==r}function se(t,r){var o=t[r];if(o!=null){if(!F(o))throw new TypeError;return o}}function ae(t){var r=se(t,h);if(!F(r))throw new TypeError;var o=r.call(t);if(!C(o))throw new TypeError;return o}function le(t){return t.value}function ce(t){var r=t.next();return r.done?!1:r}function ue(t){var r=t.return;r&&r.call(t)}function J(t){var r=Object.getPrototypeOf(t);if(typeof t!="function"||t===M||r!==M)return r;var o=t.prototype,a=o&&Object.getPrototypeOf(o);if(a==null||a===Object.prototype)return r;var v=a.constructor;return typeof v!="function"||v===t?r:v}function $e(){var t;!y(T)&&typeof n.Reflect<"u"&&!(T in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(t=Ve(n.Reflect));var r,o,a,v=new A,L={registerProvider:j,getProvider:c,setProvider:f};return L;function j(m){if(!Object.isExtensible(L))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===m:break;case y(r):r=m;break;case r===m:break;case y(o):o=m;break;case o===m:break;default:a===void 0&&(a=new x),a.add(m);break}}function w(m,_){if(!y(r)){if(r.isProviderFor(m,_))return r;if(!y(o)){if(o.isProviderFor(m,_))return r;if(!y(a))for(var S=ae(a);;){var P=ce(S);if(!P)return;var $=le(P);if($.isProviderFor(m,_))return ue(S),$}}}if(!y(t)&&t.isProviderFor(m,_))return t}function c(m,_){var S=v.get(m),P;return y(S)||(P=S.get(_)),y(P)&&(P=w(m,_),y(P)||(y(S)&&(S=new O,v.set(m,S)),S.set(_,P))),P}function d(m){if(y(m))throw new TypeError;return r===m||o===m||!y(a)&&a.has(m)}function f(m,_,S){if(!d(S))throw new Error("Metadata provider not registered.");var P=c(m,_);if(P!==S){if(!y(P))return!1;var $=v.get(m);y($)&&($=new O,v.set(m,$)),$.set(_,S)}return!0}}function Re(){var t;return!y(T)&&C(n.Reflect)&&Object.isExtensible(n.Reflect)&&(t=n.Reflect[T]),y(t)&&(t=$e()),!y(T)&&C(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function De(t){var r=new A,o={isProviderFor:function(d,f){var m=r.get(d);return y(m)?!1:m.has(f)},OrdinaryDefineOwnMetadata:j,OrdinaryHasOwnMetadata:v,OrdinaryGetOwnMetadata:L,OrdinaryOwnMetadataKeys:w,OrdinaryDeleteMetadata:c};return D.registerProvider(o),o;function a(d,f,m){var _=r.get(d),S=!1;if(y(_)){if(!m)return;_=new O,r.set(d,_),S=!0}var P=_.get(f);if(y(P)){if(!m)return;if(P=new O,_.set(f,P),!t.setProvider(d,f,o))throw _.delete(f),S&&r.delete(d),new Error("Wrong provider for target.")}return P}function v(d,f,m){var _=a(f,m,!1);return y(_)?!1:re(_.has(d))}function L(d,f,m){var _=a(f,m,!1);if(!y(_))return _.get(d)}function j(d,f,m,_){var S=a(m,_,!0);S.set(d,f)}function w(d,f){var m=[],_=a(d,f,!1);if(y(_))return m;for(var S=_.keys(),P=ae(S),$=0;;){var de=ce(P);if(!de)return m.length=$,m;var He=le(de);try{m[$]=He}catch(Ne){try{ue(P)}finally{throw Ne}}$++}}function c(d,f,m){var _=a(f,m,!1);if(y(_)||!_.delete(d))return!1;if(_.size===0){var S=r.get(f);y(S)||(S.delete(m),S.size===0&&r.delete(S))}return!0}}function Ve(t){var r=t.defineMetadata,o=t.hasOwnMetadata,a=t.getOwnMetadata,v=t.getOwnMetadataKeys,L=t.deleteMetadata,j=new A,w={isProviderFor:function(c,d){var f=j.get(c);return!y(f)&&f.has(d)?!0:v(c,d).length?(y(f)&&(f=new x,j.set(c,f)),f.add(d),!0):!1},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:o,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:v,OrdinaryDeleteMetadata:L};return w}function B(t,r,o){var a=D.getProvider(t,r);if(!y(a))return a;if(o){if(D.setProvider(t,r,z))return z;throw new Error("Illegal state.")}}function ze(){var t={},r=[],o=function(){function w(c,d,f){this._index=0,this._keys=c,this._values=d,this._selector=f}return w.prototype["@@iterator"]=function(){return this},w.prototype[h]=function(){return this},w.prototype.next=function(){var c=this._index;if(c>=0&&c<this._keys.length){var d=this._selector(this._keys[c],this._values[c]);return c+1>=this._keys.length?(this._index=-1,this._keys=r,this._values=r):this._index++,{value:d,done:!1}}return{value:void 0,done:!0}},w.prototype.throw=function(c){throw this._index>=0&&(this._index=-1,this._keys=r,this._values=r),c},w.prototype.return=function(c){return this._index>=0&&(this._index=-1,this._keys=r,this._values=r),{value:c,done:!0}},w}(),a=function(){function w(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(w.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),w.prototype.has=function(c){return this._find(c,!1)>=0},w.prototype.get=function(c){var d=this._find(c,!1);return d>=0?this._values[d]:void 0},w.prototype.set=function(c,d){var f=this._find(c,!0);return this._values[f]=d,this},w.prototype.delete=function(c){var d=this._find(c,!1);if(d>=0){for(var f=this._keys.length,m=d+1;m<f;m++)this._keys[m-1]=this._keys[m],this._values[m-1]=this._values[m];return this._keys.length--,this._values.length--,W(c,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},w.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},w.prototype.keys=function(){return new o(this._keys,this._values,v)},w.prototype.values=function(){return new o(this._keys,this._values,L)},w.prototype.entries=function(){return new o(this._keys,this._values,j)},w.prototype["@@iterator"]=function(){return this.entries()},w.prototype[h]=function(){return this.entries()},w.prototype._find=function(c,d){if(!W(this._cacheKey,c)){this._cacheIndex=-1;for(var f=0;f<this._keys.length;f++)if(W(this._keys[f],c)){this._cacheIndex=f;break}}return this._cacheIndex<0&&d&&(this._cacheIndex=this._keys.length,this._keys.push(c),this._values.push(void 0)),this._cacheIndex},w}();return a;function v(w,c){return w}function L(w,c){return c}function j(w,c){return[w,c]}}function Be(){var t=function(){function r(){this._map=new O}return Object.defineProperty(r.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),r.prototype.has=function(o){return this._map.has(o)},r.prototype.add=function(o){return this._map.set(o,o),this},r.prototype.delete=function(o){return this._map.delete(o)},r.prototype.clear=function(){this._map.clear()},r.prototype.keys=function(){return this._map.keys()},r.prototype.values=function(){return this._map.keys()},r.prototype.entries=function(){return this._map.entries()},r.prototype["@@iterator"]=function(){return this.keys()},r.prototype[h]=function(){return this.keys()},r}();return t}function Fe(){var t=16,r=p.create(),o=a();return function(){function c(){this._key=a()}return c.prototype.has=function(d){var f=v(d,!1);return f!==void 0?p.has(f,this._key):!1},c.prototype.get=function(d){var f=v(d,!1);return f!==void 0?p.get(f,this._key):void 0},c.prototype.set=function(d,f){var m=v(d,!0);return m[this._key]=f,this},c.prototype.delete=function(d){var f=v(d,!1);return f!==void 0?delete f[this._key]:!1},c.prototype.clear=function(){this._key=a()},c}();function a(){var c;do c="@@WeakMap@@"+w();while(p.has(r,c));return r[c]=!0,c}function v(c,d){if(!i.call(c,o)){if(!d)return;Object.defineProperty(c,o,{value:p.create()})}return c[o]}function L(c,d){for(var f=0;f<d;++f)c[f]=Math.random()*255|0;return c}function j(c){if(typeof Uint8Array=="function"){var d=new Uint8Array(c);return typeof crypto<"u"?crypto.getRandomValues(d):typeof msCrypto<"u"?msCrypto.getRandomValues(d):L(d,c),d}return L(new Array(c),c)}function w(){var c=j(t);c[6]=c[6]&79|64,c[8]=c[8]&191|128;for(var d="",f=0;f<t;++f){var m=c[f];(f===4||f===6||f===8)&&(d+="-"),m<16&&(d+="0"),d+=m.toString(16).toLowerCase()}return d}}function Z(t){return t.__=void 0,delete t.__,t}})})(he||(he={}));/*!
* metismenujs - v1.4.0
* MetisMenu: Collapsible menu plugin with Vanilla-JS
* https://github.com/onokumus/metismenujs#readme
*
* Made by Osman Nuri Okumus <onokumus@gmail.com> (https://github.com/onokumus)
* Under MIT License
*/const qe={parentTrigger:"li",subMenu:"ul",toggle:!0,triggerElement:"a"},H={ACTIVE:"mm-active",COLLAPSE:"mm-collapse",COLLAPSED:"mm-collapsed",COLLAPSING:"mm-collapsing",METIS:"metismenu",SHOW:"mm-show"};class q{constructor(e,n){this.element=q.isElement(e)?e:document.querySelector(e),this.config=Object.assign(Object.assign({},qe),n),this.disposed=!1,this.triggerArr=[],this.boundEventHandler=this.clickEvent.bind(this),this.init()}static attach(e,n){return new q(e,n)}init(){const{METIS:e,ACTIVE:n,COLLAPSE:i}=H;this.element.classList.add(e);const s=[...this.element.querySelectorAll(this.config.subMenu)];s.length!==0&&s.forEach(u=>{u.classList.add(i);const h=u.closest(this.config.parentTrigger);h!=null&&h.classList.contains(n)?this.show(u):this.hide(u);const l=h==null?void 0:h.querySelector(this.config.triggerElement);(l==null?void 0:l.getAttribute("aria-disabled"))!=="true"&&(l==null||l.setAttribute("aria-expanded","false"),l==null||l.addEventListener("click",this.boundEventHandler),this.triggerArr.push(l))})}clickEvent(e){if(!this.disposed){const n=e==null?void 0:e.currentTarget;n&&n.tagName==="A"&&e.preventDefault();const i=n.closest(this.config.parentTrigger),s=i==null?void 0:i.querySelector(this.config.subMenu);this.toggle(s)}}update(){this.disposed=!1,this.init()}dispose(){this.triggerArr.forEach(e=>{e.removeEventListener("click",this.boundEventHandler)}),this.disposed=!0}on(e,n,i){return this.element.addEventListener(e,n,i),this}off(e,n,i){return this.element.removeEventListener(e,n,i),this}emit(e,n,i=!1){const s=new CustomEvent(e,{bubbles:i,detail:n});this.element.dispatchEvent(s)}toggle(e){const n=e.closest(this.config.parentTrigger);n!=null&&n.classList.contains(H.ACTIVE)?this.hide(e):this.show(e)}show(e){var n;const i=e,{ACTIVE:s,COLLAPSE:u,COLLAPSED:h,COLLAPSING:l,SHOW:g}=H;if(this.isTransitioning||i.classList.contains(l))return;const b=()=>{i.classList.remove(l),i.style.height="",i.removeEventListener("transitionend",b),this.setTransitioning(!1),this.emit("shown.metisMenu",{shownElement:i})},p=i.closest(this.config.parentTrigger);p==null||p.classList.add(s);const M=p==null?void 0:p.querySelector(this.config.triggerElement);M==null||M.setAttribute("aria-expanded","true"),M==null||M.classList.remove(h),i.style.height="0px",i.classList.remove(u),i.classList.remove(g),i.classList.add(l);const O=[].slice.call((n=p==null?void 0:p.parentNode)===null||n===void 0?void 0:n.children).filter(x=>x!==p);this.config.toggle&&O.length>0&&O.forEach(x=>{const A=x.querySelector(this.config.subMenu);A&&this.hide(A)}),this.setTransitioning(!0),i.classList.add(u),i.classList.add(g),i.style.height=`${i.scrollHeight}px`,this.emit("show.metisMenu",{showElement:i}),i.addEventListener("transitionend",b)}hide(e){const{ACTIVE:n,COLLAPSE:i,COLLAPSED:s,COLLAPSING:u,SHOW:h}=H,l=e;if(this.isTransitioning||!l.classList.contains(h))return;this.emit("hide.metisMenu",{hideElement:l});const g=l.closest(this.config.parentTrigger);g==null||g.classList.remove(n);const b=()=>{l.classList.remove(u),l.classList.add(i),l.style.height="",l.removeEventListener("transitionend",b),this.setTransitioning(!1),this.emit("hidden.metisMenu",{hiddenElement:l})};l.style.height=`${l.getBoundingClientRect().height}px`,l.style.height=`${l.offsetHeight}px`,l.classList.add(u),l.classList.remove(i),l.classList.remove(h),this.setTransitioning(!0),l.addEventListener("transitionend",b),l.style.height="0px";const p=g==null?void 0:g.querySelector(this.config.triggerElement);p==null||p.setAttribute("aria-expanded","false"),p==null||p.classList.add(s)}setTransitioning(e){this.isTransitioning=e}static isElement(e){return!!e.classList}}function me(E){return new Promise((e,n)=>{if(document.querySelector(`link[href="${E}"]`))return e();const i=document.createElement("link");i.rel="stylesheet",i.href=E,i.onload=()=>e(),i.onerror=()=>n(new Error(`Failed to load CSS: ${E}`)),document.head.appendChild(i)})}function Ge(E){return new Promise((e,n)=>{if(document.querySelector(`script[src="${E}"]`))return e();const i=document.createElement("script");i.src=E,i.async=!0,i.onload=()=>e(),i.onerror=()=>n(new Error(`Failed to load script: ${E}`)),document.head.appendChild(i)})}class Ue{constructor(){this.instance=null}async initialize(e,n){await me("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.css"),await Ge("https://cdn.jsdelivr.net/npm/metismenujs/dist/metismenujs.min.js"),await me(`/themes/${n}/menu-systems/metismenu.css`);const i=document.getElementById(e);if(!i)return;const s=i.querySelector("ul.cd-menu-root");s&&(this.transformForMetisMenu(s),this.instance=new q("#menu"))}destroy(){}transformForMetisMenu(e){e.classList.remove("cd-menu-root"),e.classList.add("metismenu"),e.setAttribute("id","menu"),e.querySelectorAll(".cd-menu-item").forEach(n=>{const i=n.querySelector(".cd-menu-label"),s=n.getAttribute("data-route")||"#",u=n.getAttribute("data-icon"),h=n.querySelector("ul");let l=null;if(u)try{const g=atob(u);l=JSON.parse(g)}catch(g){console.warn("Failed to decode or parse icon metadata",g)}if(i){const g=document.createElement("a");if(g.href=h?"#":`/${s}`,g.classList.add("menu-link"),l){const p=this.createIconElement(l);p&&(p.classList.add("menu-icon"),g.appendChild(p))}const b=document.createElement("span");if(b.textContent=i.textContent||"",g.appendChild(b),h){g.classList.add("has-arrow"),g.setAttribute("aria-expanded","false");const p=document.createElement("i");p.classList.add("menu-arrow","fa-solid","fa-chevron-right"),g.appendChild(p)}i.replaceWith(g)}n.classList.remove("cd-menu-item")}),e.querySelectorAll("ul.cd-submenu").forEach(n=>{n.classList.remove("cd-submenu")})}createIconElement(e){if(!e.iconType)return null;const n=this.getCurrentThemeMenu(),i=(n==null?void 0:n.iconSize)??14,s=(n==null?void 0:n.iconColor)??"#444";switch(e.iconType){case"fontawesome":{const u=document.createElement("i");return u.className=e.icon,u.style.color=s,u.style.fontSize=`${i}px`,u}case"svg":{const u=document.createElement("span");u.innerHTML=e.icon;const h=u.firstElementChild;return h&&(h.style.color=s,h.style.width=`${i}px`,h.style.height=`${i}px`),h}case"string":{const u=document.createElement("span");return u.textContent=e.icon,u.style.color=s,u.style.fontSize=`${i}px`,u}default:return null}}getCurrentThemeMenu(){var e,n;try{const i=localStorage.getItem("cd-theme"),s=i?JSON.parse(i):null;return(n=(e=s==null?void 0:s.layout)==null?void 0:e.sidebar)==null?void 0:n.menu}catch{return}}}class We{constructor(){this.currentAdapter=null}renderMenuWithSystem(e,n,i="cd-sidebar"){var h,l,g,b;this.renderPlainMenu(e,i);const s=((g=(l=(h=n==null?void 0:n.layout)==null?void 0:h.sidebar)==null?void 0:l.menu)==null?void 0:g.menuSystem)||"plain",u=this.menuAdapterFactory(s);(b=this.currentAdapter)!=null&&b.destroy&&this.currentAdapter.destroy(),u&&(u.initialize(i,n.id),this.currentAdapter=u)}renderPlainMenu(e,n="sidebar",i){const s=document.getElementById(n);s&&(s.innerHTML=`<ul class="cd-menu-root">${this.renderMenuHtml(e)}</ul>`,this.attachClickHandlers(s,e,i))}attachClickHandlers(e,n,i){const s=e.querySelectorAll(".cd-menu-item");this.walkMenu(n,e,s,0,i)}walkMenu(e,n,i,s,u){var h;for(const l of e){const g=i[s++];g&&g.addEventListener("click",b=>{b.stopPropagation(),this.onMenuClick(l,u)}),(h=l.children)!=null&&h.length&&this.walkMenu(l.children,g,i,s,u)}}onMenuClick(e,n){if(e.itemType==="action"&&e.action){e.action();return}if(e.itemType==="template"&&e.template){this.loadResource({cdToken:n,item:e});return}e.itemType==="route"&&e.route&&e.route&&(window.location.hash=e.route)}loadResource(e={}){var s,u;const{cdToken:n,item:i}=e;if(i!=null&&i.template){const h=typeof i.template=="function"?i.template():i.template,l=document.getElementById("cd-main-content");if(l){l.innerHTML=h;const g=i.controller;g!=null&&g.__setup&&typeof g.__setup=="function"&&g.__setup()}}(u=(s=window.cdShell)==null?void 0:s.lifecycle)!=null&&u.onViewLoaded&&window.cdShell.lifecycle.onViewLoaded(i,n)}renderMenuHtml(e){return e.map(n=>{const i=n.children&&n.children.length>0,s=n.route||"",u=n.icon?btoa(JSON.stringify(n.icon)):"";return`
        <li 
          class="cd-menu-item" 
          data-route="${s}" 
          ${u?`data-icon="${u}"`:""}
        >
          <span class="cd-menu-label">${n.label}</span>
          ${i?`<ul class="cd-submenu">${this.renderMenuHtml(n.children)}</ul>`:""}
        </li>
      `}).join("")}menuAdapterFactory(e){switch(e){case"metismenu":return new Ue;case"plain":default:return null}}}class Je{constructor(e={}){this.context=e.context||"Shell",this.level=e.level||"debug",this.silent=e.silent||!1}shouldLog(e){const n={debug:0,info:1,warn:2,error:3};return n[e]>=n[this.level]}log(e,n,...i){if(this.silent||!this.shouldLog(e))return;const s=`[${this.context.toUpperCase()}] [${e.toUpperCase()}]`;switch(e){case"debug":console.debug(s,n,...i);break;case"info":console.info(s,n,...i);break;case"warn":console.warn(s,n,...i);break;case"error":console.error(s,n,...i);break}}debug(e,...n){this.log("debug",e,...n)}info(e,...n){this.log("info",e,...n)}warn(e,...n){this.log("warn",e,...n)}error(e,...n){this.log("error",e,...n)}setContext(e){this.context=e}setLevel(e){this.level=e}silence(){this.silent=!0}unsilence(){this.silent=!1}}class Ze{static setActiveTheme(e){this.currentTheme=e}static get layout(){var e;return((e=this.currentTheme)==null?void 0:e.layout)||{}}async loadThemeConfig(){console.debug("ThemeService::loadThemeConfig(): 01");const e=await fetch("/themes/default/theme.json");if(console.debug("ThemeService::loadThemeConfig(): 01"),console.debug("ThemeService::loadThemeConfig()/res:",e),!e.ok)throw console.debug("ThemeService::loadThemeConfig(): 02"),new Error(`ThemeService::loadThemeConfig:Failed to load shell config: ${e.statusText}`);return console.debug("ThemeService::loadThemeConfig(): 03"),e.json()}}const Qe={accessibleThemes:["default","dark","contrast"]},Xe={themeConfig:Qe};class Ye{async loadTheme(e="default"){console.debug("loadTheme(): loading theme ID:",e);const n=`/themes/${e}/theme.json`,i=await fetch(n);if(!i.ok){const h=await i.text();throw new Error(`Theme fetch failed: ${i.status} ${i.statusText}. Body: ${h}`)}const s=await i.json();if(!Xe.themeConfig.accessibleThemes.includes(e))throw new Error(`Theme "${e}" is not accessible as per shell configuration.`);if(s.authorizationGuid&&!this.isAuthorized(s.authorizationGuid))throw new Error(`User is not authorized to use theme: ${s.name}`);this.applyTheme("default",s),console.debug("Theme loaded successfully:",e)}isAuthorized(e){return!0}applyTheme(e,n){var h;if(!((h=n.layout.sidebar)!=null&&h.visible)){const l=document.getElementById("cd-sidebar");l&&(l.style.display="none")}Object.entries(n.colors).forEach(([l,g])=>{document.documentElement.style.setProperty(`--cd-${l}-color`,g)}),document.body.style.fontFamily=n.font||"sans-serif";const i=document.getElementById("cd-logo");i&&n.logo&&(i.src=n.logo);const s=document.getElementById("theme-css"),u=`/themes/${e}/theme.css`;if(s)s.href=u;else{const l=document.createElement("link");l.id="theme-css",l.rel="stylesheet",l.href=u,document.head.appendChild(l)}document.body.className="",document.body.classList.add(`theme-${e}`)}}const Ke="modulepreload",et=function(E){return"/"+E},ge={},k=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),l=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(n.map(g=>{if(g=et(g),g in ge)return;ge[g]=!0;const b=g.endsWith(".css"),p=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${p}`))return;const M=document.createElement("link");if(M.rel=b?"stylesheet":Ke,b||(M.as="script"),M.crossOrigin="",M.href=g,l&&M.setAttribute("nonce",l),document.head.appendChild(M),b)return new Promise((O,x)=>{M.addEventListener("load",O),M.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=h,window.dispatchEvent(l),!l.defaultPrevented)throw h}return s.then(h=>{for(const l of h||[])l.status==="rejected"&&u(l.reason);return e().catch(u)})};let tt,N,ve;const nt=async()=>{if(typeof window>"u")try{const[E,e,n]=await Promise.all([k(()=>import("./__vite-browser-external_fs-DU1_jvsO.js"),[]),k(()=>import("./__vite-browser-external_path-SE2pKm0_.js"),[]),k(()=>import("./url-Cky2eeOq.js").then(i=>i.u),[])]);tt=E,N=e,ve=n}catch(E){console.error("[ModuleService] Failed to load Node.js modules:",E)}},I=class I{constructor(){this.modules={},console.debug("[ModuleService][constructor]: starting"),this.isViteMode?(console.debug("[ModuleService] Running under Vite (browser)."),this.modules=Object.assign({"/src/CdShell/app/cd-ai/view/index.js":()=>k(()=>Promise.resolve().then(()=>it),void 0),"/src/CdShell/app/cd-geo/view/index.js":()=>k(()=>import("./index-DIGhDJk_.js"),[]),"/src/CdShell/app/coops/view/index.js":()=>k(()=>import("./index-YhLg4ZnN.js"),[]),"/src/CdShell/sys/base/view/index.js":()=>k(()=>Promise.resolve().then(()=>ot),void 0),"/src/CdShell/sys/cd-admin/view/index.js":()=>k(()=>import("./index-lndpYtwa.js"),__vite__mapDeps([0,1])),"/src/CdShell/sys/cd-comm/view/index.js":()=>k(()=>import("./index-DLx_Tjx9.js"),[]),"/src/CdShell/sys/cd-guig/view/index.js":()=>k(()=>Promise.resolve().then(()=>st),void 0),"/src/CdShell/sys/cd-push/view/index.js":()=>k(()=>import("./index-DMjNbz6u.js"),[]),"/src/CdShell/sys/cd-scheduler/view/index.js":()=>k(()=>Promise.resolve().then(()=>at),void 0),"/src/CdShell/sys/cd-store/view/index.js":()=>k(()=>Promise.resolve().then(()=>lt),void 0),"/src/CdShell/sys/cd-user/view/index.js":()=>k(()=>import("./index-NLnjrZUJ.js"),__vite__mapDeps([2,1])),"/src/CdShell/sys/dev-descriptor/view/index.js":()=>k(()=>Promise.resolve().then(()=>ct),void 0),"/src/CdShell/sys/dev-sync/view/index.js":()=>k(()=>import("./index-DvGMnDDL.js"),[]),"/src/CdShell/sys/moduleman/view/index.js":()=>k(()=>Promise.resolve().then(()=>ut),void 0),"/src/CdShell/sys/theme/view/index.js":()=>k(()=>Promise.resolve().then(()=>dt),void 0),"/src/CdShell/sys/utils/view/index.js":()=>k(()=>Promise.resolve().then(()=>ft),void 0)})):console.debug("[ModuleService] Running under Node (non-Vite).")}static getInstance(){return I.instance||(I.instance=new I),I.instance}get isBrowser(){return typeof window<"u"}get isViteMode(){return this.isBrowser}get baseDir(){return this.isViteMode?"/src/CdShell":N==null?void 0:N.resolve(process.cwd(),"dist-ts/CdShell")}static async ensureInitialized(){this.initPromise||(this.initPromise=nt()),await this.initPromise}static async preloadModulesSequentially(){const e=I.getInstance();for(const n of this.preloadModules)try{console.debug(`[Preload] Loading ${n.moduleId}`);const i=await e.loadModule(n.ctx,n.moduleId);i!=null&&i.controller&&typeof i.controller.__setup=="function"&&(console.debug(`[Preload] Setting up ${n.component}`),await i.controller.__setup()),console.debug(`[Preload] Completed ${n.component}`)}catch(i){console.error(`[Preload] Failed ${n.moduleId}: ${i}`)}}async loadModule(e,n){var g;await I.ensureInitialized(),I.hasPreloaded||(I.hasPreloaded=!0,await I.preloadModulesSequentially()),console.debug("ModuleService::loadModule()/01:");const i=this.isViteMode,s=this.baseDir,u=i?`src/CdShell/${e}/${n}/view/index.js`:`${s}/${e}/${n}/view/index.js`;if(console.debug("[ModuleService] expectedPathFragment:",u),i){console.debug("[ModuleService] 1");const b=Object.keys(this.modules).find(p=>p.replace(/^\.?\//,"")===u);if(!b)throw console.error("[ModuleService] Available module keys:",Object.keys(this.modules)),new Error(`[ModuleService] Module not found for ctx=${e}, moduleId=${n}`);try{const p=this.modules[b],O=(await p()).module;if(!O)throw new Error(`Missing 'module' export in: ${b}`);const x=document.getElementById("cd-main-content");return x&&(x.innerHTML=O.template),(g=O.controller)!=null&&g.__setup&&O.controller.__setup(),console.log(`[ModuleService] Loaded '${n}' (Vite mode) at ${new Date().toLocaleString()}`),O}catch(p){throw console.error("[ModuleService] Browser import failed:",p),p}}const l=`${s.replace(/\\/g,"/").replace(/\/+$/,"")}/${e}/${n}/view/index.js`;console.debug("[ModuleService] Importing (Node):",l);try{const p=await import(ve.pathToFileURL(l).href);return console.log(`[ModuleService] Loaded '${n}' (Node mode) at ${new Date().toLocaleString()}`),p.module}catch(b){throw console.error("[ModuleService] Node import failed:",b),b}}async getAllowedModules(){const e=[],n=await this.loadModule("sys","cd-user");n&&(n.isDefault=!0,e.push(n));const i=await this.loadModule("sys","cd-admin");return i&&(i.isDefault=!1,e.push(i)),e}};I.initPromise=null,I.hasPreloaded=!1,I.preloadModules=[{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentService"},{ctx:"sys",moduleId:"dev-sync",component:"IdeAgentClientService"}];let G=I;class rt{constructor(){this.logger=new Je}async init(){this.logger.debug("[Main] init(): starting"),typeof window>"u"?(this.logger.debug("[Main] Running in Node → awaiting ensureInitialized()"),await G.ensureInitialized()):this.logger.debug("[Main] Running in browser → skipping ensureInitialized()"),this.svModule=new G,this.svMenu=new We,this.svTheme=new Ze,this.svThemeLoader=new Ye;const e=await this.loadShellConfig();e.logLevel&&this.logger.setLevel(e.logLevel),this.logger.debug("[Main] init(): completed")}async run(){var l;this.logger.setLevel("debug"),this.logger.debug("starting bootstrapShell()"),this.logger.debug("bootstrapShell()/01:");const e=await this.loadShellConfig();this.logger.debug("bootstrapShell()/02:"),e.logLevel&&this.logger.setLevel(e.logLevel),this.logger.debug("bootstrapShell()/03:");const n=await this.svTheme.loadThemeConfig();this.logger.debug("bootstrapShell()/04:"),this.logger.debug("bootstrapShell()/themeConfig:",n),document.title=e.appName||e.fallbackTitle||"Corpdesk",this.logger.debug("bootstrapShell()/05:");const i=document.getElementById("cd-logo");if(this.logger.debug("bootstrapShell()/06:"),i&&n.logo&&(i.src=n.logo),this.logger.debug("bootstrapShell()/07:"),n.colors.primary&&document.documentElement.style.setProperty("--theme-color",n.colors.primary),this.logger.debug("bootstrapShell()/08:"),e.defaultModulePath){this.logger.debug("bootstrapShell()/09:");const[g,b]=e.defaultModulePath.split("/");this.logger.debug("bootstrapShell()/ctx:",g),this.logger.debug("bootstrapShell()/moduleId:",b),this.logger.debug("bootstrapShell()/10:");const p=await this.svModule.getAllowedModules();this.logger.debug("Main::allowedModules",p);const M=p.map(T=>{var z;const D=((z=T.menu)==null?void 0:z.length)===1?T.menu[0]:null;return D&&D.label.toLowerCase()===T.moduleId.replace(/^cd-/,"").toLowerCase()?{...D,route:`${T.ctx}/${T.moduleId}`,children:D.children||[]}:{label:T.moduleId.replace(/^cd-/,"").toUpperCase(),itemType:"route",route:`${T.ctx}/${T.moduleId}`,icon:{iconType:"fontawesome",icon:"fa-folder"},children:T.menu||[]}});this.logger.debug("Main::mergedMenu",JSON.stringify(M,null,2));const O=await fetch(e.themeConfig.currentThemePath);if(!O.ok){const T=await O.text();throw new Error(`Theme fetch failed: ${O.status} ${O.statusText}. Body: ${T}`)}const x=await O.json();this.svMenu.renderMenuWithSystem(M,x);const A=p.find(T=>T.isDefault);if(A&&A.template){const T=document.getElementById("cd-main-content");T&&(T.innerHTML=A.template),(l=A.controller)!=null&&l.__setup&&A.controller.__setup()}this.logger.debug("bootstrapShell()/11:")}this.svThemeLoader.loadTheme("default");const s=document.getElementById("cd-burger"),u=document.getElementById("cd-sidebar"),h=document.getElementById("cd-overlay");s.addEventListener("click",()=>{u.classList.toggle("open"),h.classList.toggle("hidden")}),h.addEventListener("click",()=>{u.classList.remove("open"),h.classList.add("hidden")})}async loadShellConfig(){const e=await fetch("/shell.config.json");if(!e.ok)throw new Error(`Failed to load shell config: ${e.statusText}`);return await e.json()}}console.log("start 1");const pe=new rt;pe.init();pe.run().catch(E=>{console.error("[BOOTSTRAP ERROR]",E)});const it=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ot=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),st=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),at=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),lt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ct=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ut=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),dt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ft=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{fe as c,ht as g};
