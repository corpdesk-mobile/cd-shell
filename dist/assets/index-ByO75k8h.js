import{C as u,a as m,b as r,c as p}from"./cd-directive-binder.service-DGbLY5eG.js";import{U as g,S as l,u as c}from"./index-B35E8Ip-.js";const h={defaultUiConfig:{defaultUiSystemId:"bootstrap-538"}};class S{constructor(e){var o;this.activeUiSystemId=(o=h.defaultUiConfig)==null?void 0:o.defaultUiSystemId,this.activeThemePath="/themes/bootstrap-502/default.json",this.logLevel="debug",Object.assign(this,e)}}const y=[{id:"standard",name:"Standard"},{id:"compact",name:"Compact"},{id:"floating",name:"Floating Labels"}];class f{constructor(e){this.sysCache=e,this.config=new S,this.uiSystemLoader=new g(this.sysCache)}getConfig(){return this.config}saveConfig(e){return console.log("[AdminService] Attempting to save configuration:",e),Object.assign(this.config,e),Promise.resolve()}generateUiSystemOptions(e){console.log("[CdAdminService][generateUiSystemOptions] start");const o=this.uiSystemLoader.list();let t='<option value="">-- Select UI System --</option>';return console.log("[CdAdminService][generateUiSystemOptions] optionsHtml",t),!o||o.length===0?'<option value="">-- No UI Systems Available --</option>':(o.forEach(i=>{const s=i.id===e?"selected":"";t+=`<option value="${i.id}" ${s}>${i.name||i.id}</option>`}),console.log("[CdAdminService][generateUiSystemOptions] optionsHtml",t),t)}generateThemeOptions(e,o){const t=this.uiSystemLoader.getSystemById(e),i=t==null?void 0:t.themesAvailable;if(!t||!i||i.length===0)return'<option value="">-- No Themes Available --</option>';let s='<option value="">-- Select Theme --</option>';return i.forEach(a=>{const d=a.id===o?"selected":"";s+=`<option value="${a.id}" ${d}>${a.name}</option>`}),s}generateFormVariantOptions(e){const o=y;let t='<option value="">-- Select Form Variant --</option>';return o.forEach(i=>{const s=i.id===e?"selected":"";t+=`<option value="${i.id}" ${s}>${i.name}</option>`}),t}}const v={form:null,binder:null,uiSystemLoader:null,uiThemeLoader:null,svCdAdmin:null,currentUiSystemId:"",__init(){console.log("[ctlCdAdminSettings][__init] start...");const n=l.getInstance();this.uiSystemLoader=n.uiSystemLoader??null,this.uiThemeLoader=n.uiThemeLoader??null,this.svCdAdmin=new f(n),this.form=new u({uiSystem:new m("",[r.required("Select UI System")]),theme:new m("",[r.required("Select Theme")]),formType:new m("",[r.required("Select Form Type")])}),this.binder=new p(this.form,"#settingsForm",this)},__template(){return console.log("[ctlCdAdminSettings][__template] start..."),`
      <form id="settingsForm" class="cd-form">
        <div class="cd-form-field">
          <label for="uiSystem">UI System</label>
          <select id="uiSystem" name="uiSystem" cdFormControl (change)="onUiSystemChange($event)">
            ${this.uiSystemOptionsHtml}
          </select>
        </div>

        <div class="cd-form-field">
          <label for="theme">Theme</label>
          <select id="theme" name="theme" cdFormControl (change)="onThemeChange($event)">
            ${this.themeOptionsHtml}
          </select>
        </div>

        <div class="cd-form-field">
          <label for="formType">Form Variant</label>
          <select id="formType" name="formType" cdFormControl (change)="onFormVariantChange($event)">
            ${this.formVariantOptionsHtml}
          </select>
        </div>

        <button type="submit">Apply Settings</button>
      </form>
    `},get uiSystemOptionsHtml(){console.log("[ctlCdAdminSettings][uiSystemOptionsHtml] start...");const e=l.getInstance().getUiSystems();return console.log("[ctlCdAdminSettings][uiSystemOptionsHtml] uiSystems:",c.inspect(e,{depth:2})),e.length?`<option value="">-- Select UI System --</option>${e.map(t=>`<option value="${t.id}">${t.displayName??t.name}</option>`).join("")}`:'<option value="">-- No Systems Found --</option>'},get themeOptionsHtml(){console.log("[ctlCdAdminSettings][themeOptionsHtml] start...");const e=l.getInstance().getThemes();console.log("[ctlCdAdminSettings][themeOptionsHtml] themes:",c.inspect(e,{depth:2}));const o=Array.isArray(e)?e:(e==null?void 0:e.themes)||[];return o.length?`<option value="">-- Select Theme --</option>${o.map(i=>`<option value="${i.id}">${i.displayName??i.name}</option>`).join("")}`:'<option value="">-- No Themes Available --</option>'},get formVariantOptionsHtml(){console.log("[ctlCdAdminSettings][formVariantOptionsHtml] start...");const e=l.getInstance().getFormVariants();return console.log("[ctlCdAdminSettings][formVariantOptionsHtml] variants:",c.inspect(e,{depth:2})),e.length?`<option value="">-- Select Variant --</option>${e.map(t=>`<option value="${t.id}">${t.displayName??t.name}</option>`).join("")}`:'<option value="">-- No Variants --</option>'},async __setup(){console.log("[ctlCdAdminSettings][__setup] start..."),await l.getInstance().ensureReady()},async __activate(){var n;console.log("[ctlCdAdminSettings][__activate] start..."),(n=this.binder)!=null&&n.bindToDom&&await this.binder.bindToDom()},async __afterInit(){var a;console.log("[ctlCdAdminSettings][__afterInit] start...");const n=this.form.controls,e=l.getInstance(),o=e.getUiSystems(),t=e.getThemes(),i=Array.isArray(t)?t:(t==null?void 0:t.themes)||[],s=e.getFormVariants();o.length&&n.uiSystem.setValue(o[0].id),i.length&&n.theme.setValue(i[0].id),s.length&&n.formType.setValue(s[0].id),(a=this.binder)!=null&&a.refreshView&&this.binder.refreshView(),console.log("[ctlCdAdminSettings][__afterInit] end.")},__deactivate(){var n;console.log("[ctlCdAdminSettings][__deactivate]"),(n=this.binder)!=null&&n.unbindAllDomEvents&&this.binder.unbindAllDomEvents()},async onUiSystemChange(n){console.log("ðŸ§© UI System changed:",n.target.value),this.currentUiSystemId=n.target.value},async onThemeChange(n){console.log("ðŸŽ¨ Theme changed:",n.target.value)},async onFormVariantChange(n){console.log("ðŸ§± Form Variant changed:",n.target.value)}},C={ctx:"sys",moduleId:"cd-admin",moduleName:"cd-admin",moduleGuid:"aaaa-bbbb-cccc-dddd",controllers:[{name:"settings",instance:v,template:function(){return typeof this.__template=="function"?this.__template():(console.warn("[cdAdminModule] Missing __template() on controller:",this),"<div>Template not available.</div>")},default:!1}],menu:[{label:"cd-admin",route:"sys/cd-admin",children:[{label:"settings",itemType:"route",route:"sys/cd-admin/settings",template:function(){return typeof this.__template=="function"?this.__template():(console.warn("[Menu][cd-admin/settings] Missing __template()"),"<div>Template missing for cd-admin/settings.</div>")}}]}]},A=C;export{C as cdAdminModule,A as module};
