import{a as G,g as $t}from"./index-BRIKc63m.js";import{u as lt,s as Dt,b as Ft}from"./index-D3nHpiIA.js";import{a as Kt}from"./url-kJZEVK88.js";function Wt(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in t)){const a=Object.getOwnPropertyDescriptor(n,l);a&&Object.defineProperty(t,l,a.get?a:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var H={};const Gt=new Proxy({},{get(t,e){throw new Error(`Module "net" has been externalized for browser compatibility. Cannot access "net.${e}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Yt=G(Qt),Ht=new Proxy({},{get(t,e){throw new Error(`Module "tls" has been externalized for browser compatibility. Cannot access "tls.${e}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Zt=G(Xt);function Jt(t){if(t.length===0||!(t instanceof Array))return null;for(var e={},r=0;r<t.length;r+=2)e[t[r].toString("binary")]=t[r+1];return e}function xt(t){if(t instanceof Buffer)return t.toString();if(t instanceof Array){for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=xt(t[r]);return e}return t}function Vt(t,e){console.log(t?t.toString():"Reply: "+e)}var nt;function it(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;r++)e[r]=it(t[r]);return e}if(Object.prototype.toString.call(t)==="[object Object]"){e={};for(var n=Object.keys(t),l;l=n.pop();){if(l==="tls"){e[l]=t[l];continue}var a=l.replace(/[A-Z][^A-Z]/g,"_$&").toLowerCase();a!==l.toLowerCase()&&(nt=!0),e[a]=it(t[l])}return e}return t}function jt(t){return nt=!1,t=it(t)||{},nt&&(t.camel_case=!0),t}function F(t,e,r,n){e?e(r,n):r&&t.emit("error",r)}function te(t,e,r,n,l){var a;if(l?a=l.peekBack():a=t.offline_queue.peekBack()||t.command_queue.peekBack(),!a)process.nextTick(function(){F(t,e,r,n)});else{var f=a.callback;a.callback=f?function(h,u){f(h,u),F(t,e,r,n)}:function(h,u){h&&t.emit("error",h),F(t,e,r,n)}}}var M={reply_to_strings:xt,reply_to_object:Jt,print:Vt,err_code:/^([A-Z]+)\s+(.+)$/,monitor_regex:/^[0-9]{10,11}\.[0-9]+ \[[0-9]+ .+\].*"$/,clone:jt,callback_or_emit:F,reply_in_order:te},ee={},re=/development/i.test("development")||/\bredis\b/i.test(ee.NODE_DEBUG);function se(t,e,r,n){this.command=t,this.args=e,this.buffer_args=!1,this.callback=r,this.call_on_write=n,re&&(this.error=new Error)}var U=se;function C(t,r){var r=r||{};this._head=0,this._tail=0,this._capacity=r.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}C.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};C.prototype.get=function(e){return this.peekAt(e)};C.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};C.prototype.peekFront=function(){return this.peek()};C.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(C.prototype,"length",{get:function(){return this.size()}});C.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};C.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};C.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};C.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};C.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};C.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),l=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var a=this._list[r],f;if(e<n/2){for(f=e;f>0;f--)this._list[r]=this._list[r=r-1+l&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+l&this._capacityMask}else{for(f=n-1-e;f>0;f--)this._list[r]=this._list[r=r+1+l&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+l&this._capacityMask}return a}}};C.prototype.remove=function(e,r){var n=e,l,a=r;if(n===(n|0)&&this._head!==this._tail){var f=this.size(),h=this._list.length;if(!(n>=f||n<-f||r<1)){if(n<0&&(n+=f),r===1||!r)return l=new Array(1),l[0]=this.removeOne(n),l;if(n===0&&n+r>=f)return l=this.toArray(),this.clear(),l;n+r>f&&(r=f-n);var u;for(l=new Array(r),u=0;u<r;u++)l[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===f){for(this._tail=this._tail-r+h&this._capacityMask,u=r;u>0;u--)this._list[n=n+1+h&this._capacityMask]=void 0;return l}if(e===0){for(this._head=this._head+r+h&this._capacityMask,u=r-1;u>0;u--)this._list[n=n+1+h&this._capacityMask]=void 0;return l}if(n<f/2){for(this._head=this._head+e+r+h&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+h&this._capacityMask]);for(n=this._head-1+h&this._capacityMask;a>0;)this._list[n=n-1+h&this._capacityMask]=void 0,a--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+h&this._capacityMask,u=f-(r+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;a>0;)this._list[n=n+1+h&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=h>>>2&&this._shrinkArray(),l}}};C.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var l=this.size();if(n<0&&(n+=l),!(n>l))if(arguments.length>2){var a,f,h,u=arguments.length,y=this._list.length,_=2;if(!l||n<l/2){for(f=new Array(n),a=0;a<n;a++)f[a]=this._list[this._head+a&this._capacityMask];for(r===0?(h=[],n>0&&(this._head=this._head+n+y&this._capacityMask)):(h=this.remove(n,r),this._head=this._head+n+y&this._capacityMask);u>_;)this.unshift(arguments[--u]);for(a=n;a>0;a--)this.unshift(f[a-1])}else{f=new Array(l-(n+r));var g=f.length;for(a=0;a<g;a++)f[a]=this._list[this._head+n+r+a&this._capacityMask];for(r===0?(h=[],n!=l&&(this._tail=this._head+n+y&this._capacityMask)):(h=this.remove(n,r),this._tail=this._tail-g+y&this._capacityMask);_<u;)this.push(arguments[_++]);for(a=0;a<g;a++)this.push(f[a])}return h}else return this.remove(n,r)}};C.prototype.clear=function(){this._head=0,this._tail=0};C.prototype.isEmpty=function(){return this._head===this._tail};C.prototype.toArray=function(){return this._copyArray(!1)};C.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};C.prototype._copyArray=function(e){var r=[],n=this._list,l=n.length,a;if(e||this._head>this._tail){for(a=this._head;a<l;a++)r.push(n[a]);for(a=0;a<this._tail;a++)r.push(n[a])}else for(a=this._head;a<this._tail;a++)r.push(n[a]);return r};C.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};C.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};var qt=C;const ne=new Proxy({},{get(t,e){throw new Error(`Module "assert" has been externalized for browser compatibility. Cannot access "assert.${e}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),ft=G(ie);var X,gt;function ae(){if(gt)return X;gt=1;const t=ft,e=lt;function r(h){Object.defineProperty(this,"message",{value:h||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}e.inherits(r,Error),Object.defineProperty(r.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function n(h,u,y){t(u),t.strictEqual(typeof y,"number"),Object.defineProperty(this,"message",{value:h||"",configurable:!0,writable:!0});const _=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=_,this.offset=y,this.buffer=u}e.inherits(n,r),Object.defineProperty(n.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function l(h){Object.defineProperty(this,"message",{value:h||"",configurable:!0,writable:!0});const u=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=u}e.inherits(l,r),Object.defineProperty(l.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function a(h){Object.defineProperty(this,"message",{value:h||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}e.inherits(a,r),Object.defineProperty(a.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function f(h){Object.defineProperty(this,"message",{value:h||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}return e.inherits(f,a),Object.defineProperty(f.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),X={RedisError:r,ParserError:n,ReplyError:l,AbortError:a,InterruptError:f},X}var Z,mt;function oe(){if(mt)return Z;mt=1;const t=ft;class e extends Error{get name(){return this.constructor.name}}class r extends e{constructor(h,u,y){t(u),t.strictEqual(typeof y,"number");const _=Error.stackTraceLimit;Error.stackTraceLimit=2,super(h),Error.stackTraceLimit=_,this.offset=y,this.buffer=u}get name(){return this.constructor.name}}class n extends e{constructor(h){const u=Error.stackTraceLimit;Error.stackTraceLimit=2,super(h),Error.stackTraceLimit=u}get name(){return this.constructor.name}}class l extends e{get name(){return this.constructor.name}}class a extends l{get name(){return this.constructor.name}}return Z={RedisError:e,ParserError:r,ReplyError:n,AbortError:l,InterruptError:a},Z}const le=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?ae():oe();var ut=le,zt=lt,K=ft,fe=ut.RedisError,ue=!1;function R(t,e){K(t,"The options argument is required"),K.strictEqual(typeof t,"object","The options argument has to be of type object"),Object.defineProperty(this,"message",{value:t.message||"",configurable:!0,writable:!0}),(e||e===void 0)&&Error.captureStackTrace(this,R);for(var r=Object.keys(t),n=r.pop();n;n=r.pop())this[n]=t[n]}function Q(t){K(t,"The options argument is required"),K.strictEqual(typeof t,"object","The options argument has to be of type object"),R.call(this,t,ue),Object.defineProperty(this,"message",{value:t.message||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,Q);for(var e=Object.keys(t),r=e.pop();r;r=e.pop())this[r]=t[r]}zt.inherits(R,fe);zt.inherits(Q,R);Object.defineProperty(R.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});Object.defineProperty(Q.prototype,"name",{value:"AggregateError",configurable:!0,writable:!0});var ce={AbortError:R,AggregateError:Q};const ye=new Proxy({},{get(t,e){throw new Error(`Module "events" has been externalized for browser compatibility. Cannot access "events.${e}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),he=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),pe=G(he);var Ot={},ct=Dt.Buffer,_t=ct.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function de(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function ge(t){var e=de(t);if(typeof e!="string"&&(ct.isEncoding===_t||!_t(t)))throw new Error("Unknown encoding: "+t);return e||t}Ot.StringDecoder=I;function I(t){this.encoding=ge(t);var e;switch(this.encoding){case"utf16le":this.text=ve,this.end=we,e=4;break;case"utf8":this.fillLast=ke,e=4;break;case"base64":this.text=Ee,this.end=Ae,e=3;break;default:this.write=Ce,this.end=xe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ct.allocUnsafe(e)}I.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};I.prototype.end=be;I.prototype.text=Se;I.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function J(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function me(t,e,r){var n=e.length-1;if(n<r)return 0;var l=J(e[n]);return l>=0?(l>0&&(t.lastNeed=l-1),l):--n<r||l===-2?0:(l=J(e[n]),l>=0?(l>0&&(t.lastNeed=l-2),l):--n<r||l===-2?0:(l=J(e[n]),l>=0?(l>0&&(l===2?l=0:t.lastNeed=l-3),l):0))}function _e(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function ke(t){var e=this.lastTotal-this.lastNeed,r=_e(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Se(t,e){var r=me(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function be(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function ve(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function we(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Ee(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Ae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ce(t){return t.toString(this.encoding)}function xe(t){return t&&t.length?this.write(t):""}const yt=Ft.Buffer,qe=Ot.StringDecoder,V=new qe,Tt=ut,ze=Tt.ReplyError,Oe=Tt.ParserError;var z=yt.allocUnsafe(32*1024),x=0,W=null,P=0,j=0;function Te(t){const e=t.buffer.length-1;var r=t.offset,n=0,l=1;for(t.buffer[r]===45&&(l=-1,r++);r<e;){const a=t.buffer[r++];if(a===13)return t.offset=r+1,l*n;n=n*10+(a-48)}}function Re(t){const e=t.buffer.length-1;var r=t.offset,n=0,l="";for(t.buffer[r]===45&&(l+="-",r++);r<e;){var a=t.buffer[r++];if(a===13)return t.offset=r+1,n!==0&&(l+=n),l;n>429496728?(l+=n*10+(a-48),n=0):a===48&&n===0?l+=0:n=n*10+(a-48)}}function Rt(t){const e=t.offset,r=t.buffer,n=r.length-1;for(var l=e;l<n;)if(r[l++]===13)return t.offset=l+1,t.optionReturnBuffers===!0?t.buffer.slice(e,l-1):t.buffer.toString("utf8",e,l-1)}function Nt(t){const e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){const l=t.buffer[r++];if(l===13)return t.offset=r+1,n;n=n*10+(l-48)}}function Ne(t){return t.optionStringNumbers===!0?Re(t):Te(t)}function Be(t){const e=Nt(t);if(e===void 0)return;if(e<0)return null;const r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}const n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function Pe(t){var e=Rt(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new ze(e)}function Me(t,e){const r=new Oe("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function Ue(t){const e=Nt(t);if(e===void 0)return;if(e<0)return null;const r=new Array(e);return Bt(t,r,0)}function at(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function ot(t){const e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){const n=ot(t);if(n===void 0){at(t,e,r);return}e[r++]=n}return Bt(t,e,r)}function Bt(t,e,r){const n=t.buffer.length;for(;r<e.length;){const l=t.offset;if(t.offset>=n){at(t,e,r);return}const a=Pt(t,t.buffer[t.offset++]);if(a===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=l),at(t,e,r);return}e[r]=a,r++}return e}function Pt(t,e){switch(e){case 36:return Be(t);case 43:return Rt(t);case 42:return Ue(t);case 58:return Ne(t);case 45:return Pe(t);default:return Me(t,e)}}function Ie(){if(z.length>50*1024)if(P===1||j>P*2){const t=Math.floor(z.length/10),e=t<x?x:t;x=0,z=z.slice(e,z.length)}else j++,P--;else clearInterval(W),P=0,j=0,W=null}function Le(t){if(z.length<t+x){const e=t>78643200?2:3;x>1024*1024*111&&(x=1024*1024*50),z=yt.allocUnsafe(t*e+x),x=0,P++,W===null&&(W=setInterval(Ie,50))}}function $e(t){const e=t.bufferCache,r=t.offset;var n=e.length,l=t.bigStrSize-t.totalChunkSize;if(t.offset=l,l<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+l-2);n--,l=e[e.length-2].length+l}for(var a=V.write(e[0].slice(r)),f=1;f<n-1;f++)a+=V.write(e[f]);return a+=V.end(e[f].slice(0,l-2)),a}function De(t){const e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var l=e.length,a=t.bigStrSize-t.totalChunkSize;if(t.offset=a,a<=2){if(l===2)return e[0].slice(r,e[0].length+a-2);l--,a=e[e.length-2].length+a}Le(n);const f=x;e[0].copy(z,f,r,e[0].length),x+=e[0].length-r;for(var h=1;h<l-1;h++)e[h].copy(z,x),x+=e[h].length;return e[h].copy(z,x,0,a-2),x+=a-2,z.slice(f,x)}class Fe{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){const n=this.buffer.length,l=n-this.offset,a=yt.allocUnsafe(l+e.length);if(this.buffer.copy(a,0,this.offset,n),e.copy(a,l,0,e.length),this.buffer=a,this.offset=0,this.arrayCache.length){const f=ot(this);if(f===void 0)return;this.returnReply(f)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?De(this):$e(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=ot(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){const n=this.offset,l=this.buffer[this.offset++],a=Pt(this,l);if(a===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}l===45?this.returnError(a):this.returnReply(a)}this.buffer=null}}var Ke=Fe,We=Ke,ht={};const Ge={arity:-2,flags:["admin","noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},Qe={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Ye={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},He={arity:-2,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},Xe={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},Ze={arity:-1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},Je={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},Ve={arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},je={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},tr={arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},er={arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},rr={arity:6,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},sr={arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},nr={arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},ir={arity:4,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},ar={arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},or={arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},lr={arity:-2,flags:["admin","noscript","random","loading","stale"],keyStart:0,keyStop:0,step:0},fr={arity:-2,flags:["admin","random","stale"],keyStart:0,keyStop:0,step:0},ur={arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},cr={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},yr={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},hr={arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},pr={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},dr={arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},gr={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},mr={arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},_r={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},kr={arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Sr={arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},br={arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},vr={arity:1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog"],keyStart:0,keyStop:0,step:0},wr={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},Er={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Ar={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Cr={arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},xr={arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},qr={arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},zr={arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},Or={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Tr={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},Rr={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},Nr={arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},Br={arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},Pr={arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},Mr={arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},Ur={arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},Ir={arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},Lr={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},$r={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Dr={arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Fr={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Kr={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Wr={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Gr={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Qr={arity:-1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},Yr={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Hr={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Xr={arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Zr={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Jr={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Vr={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},jr={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},ts={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},es={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rs={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},ss={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},ns={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},is={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},as={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},os={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},ls={arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},fs={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},us={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},cs={arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},ys={arity:2,flags:["readonly","sort_for_script"],keyStart:0,keyStop:0,step:0},hs={arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},ps={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},ds={arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},gs={arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ms={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},_s={arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},ks={arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},Ss={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},bs={arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},vs={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},ws={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Es={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},As={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},Cs={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},xs={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},qs={arity:-2,flags:["readonly","random","movablekeys"],keyStart:0,keyStop:0,step:0},zs={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},Os={arity:-6,flags:["write","random","movablekeys"],keyStart:0,keyStop:0,step:0},Ts={arity:-2,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},Rs={arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},Ns={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Bs={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},Ps={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},Ms={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},Us={arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},Is={arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Ls={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},$s={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Ds={arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Fs={arity:-2,flags:["readonly","may_replicate"],keyStart:1,keyStop:-1,step:1},Ks={arity:-3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},Ws={arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},Gs={arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},Qs={arity:-1,flags:["stale","fast"],keyStart:0,keyStop:0,step:0},Ys={arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},Hs={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},Xs={arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},Zs={arity:-3,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},Js={arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},Vs={arity:3,flags:["pubsub","loading","stale","fast","may_replicate"],keyStart:0,keyStop:0,step:0},js={arity:-2,flags:["pubsub","random","loading","stale"],keyStart:0,keyStop:0,step:0},tn={arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},en={arity:1,flags:["loading","stale","readonly"],keyStart:0,keyStop:0,step:0},rn={arity:1,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},sn={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},nn={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},an={arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},on={arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},ln={arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},fn={arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},un={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},cn={arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},yn={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},hn={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pn={arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dn={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},gn={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},mn={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},_n={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},kn={arity:-2,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},Sn={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bn={arity:-2,flags:["noscript","may_replicate"],keyStart:0,keyStop:0,step:0},vn={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},wn={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},En={arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},An={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},Cn={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},xn={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},qn={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zn={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},On={arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},Tn={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},Rn={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},Nn={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Bn={arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},Pn={arity:-2,flags:["admin","random","loading","stale"],keyStart:0,keyStop:0,step:0},Mn={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},Un={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},In={arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},Ln={arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},$n={arity:-2,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},Dn={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Fn={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Kn={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Wn={arity:-2,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},Gn={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Qn={arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},Yn={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Hn={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},Xn={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},Zn={arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},Jn={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},Vn={arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},jn={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ti={arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},ei={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},ri={arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},si={arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},ni={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},ii={arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},ai={arity:-2,flags:["noscript","loading","stale","fast"],keyStart:1,keyStop:-1,step:1},oi={arity:-4,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},li={arity:-5,flags:["write","denyoom","random","fast"],keyStart:1,keyStop:1,step:1},fi={arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},ui={arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},ci={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},yi={arity:-2,flags:["write","denyoom"],keyStart:2,keyStop:2,step:1},hi={arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},pi={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},di={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},gi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},mi={arity:-4,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},_i={arity:-7,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},ki={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Si={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},bi={arity:-2,flags:["write","random"],keyStart:1,keyStop:1,step:1},vi={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},wi={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Ei={arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Ai={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},Ci={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},xi={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},qi={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zi={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},Oi={arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Ti={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Ri={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Ni={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Bi={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Pi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Mi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Ui={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Ii={arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},Li={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},$i={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Di={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},Fi={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},Ki={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},Wi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Gi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Qi={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Yi={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Hi={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Xi={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Zi={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},Ji={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},Vi={acl:Ge,append:Qe,asking:Ye,auth:He,bgrewriteaof:Xe,bgsave:Ze,bitcount:Je,bitfield:Ve,bitfield_ro:je,bitop:tr,bitpos:er,blmove:rr,blpop:sr,brpop:nr,brpoplpush:ir,bzpopmax:ar,bzpopmin:or,client:lr,cluster:fr,command:ur,config:cr,copy:yr,dbsize:hr,debug:pr,decr:dr,decrby:gr,del:mr,discard:_r,dump:kr,echo:Sr,eval:{arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:br,exec:vr,exists:wr,expire:Er,expireat:Ar,failover:Cr,flushall:xr,flushdb:qr,geoadd:zr,geodist:Or,geohash:Tr,geopos:Rr,georadius:Nr,georadius_ro:Br,georadiusbymember:Pr,georadiusbymember_ro:Mr,geosearch:Ur,geosearchstore:Ir,get:Lr,getbit:$r,getdel:Dr,getex:Fr,getrange:Kr,getset:Wr,hdel:Gr,hello:Qr,hexists:Yr,hget:Hr,hgetall:Xr,hincrby:Zr,hincrbyfloat:Jr,hkeys:Vr,hlen:jr,hmget:ts,hmset:es,"host:":{arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},hrandfield:rs,hscan:ss,hset:ns,hsetnx:is,hstrlen:as,hvals:os,incr:ls,incrby:fs,incrbyfloat:us,info:cs,keys:ys,lastsave:hs,latency:ps,lindex:ds,linsert:gs,llen:ms,lmove:_s,lolwut:ks,lpop:Ss,lpos:bs,lpush:vs,lpushx:ws,lrange:Es,lrem:As,lset:Cs,ltrim:xs,memory:qs,mget:zs,migrate:Os,module:Ts,monitor:Rs,move:Ns,mset:Bs,msetnx:Ps,multi:Ms,object:Us,persist:Is,pexpire:Ls,pexpireat:$s,pfadd:Ds,pfcount:Fs,pfdebug:Ks,pfmerge:Ws,pfselftest:Gs,ping:Qs,post:Ys,psetex:Hs,psubscribe:Xs,psync:Zs,pttl:Js,publish:Vs,pubsub:js,punsubscribe:tn,quit:en,randomkey:rn,readonly:sn,readwrite:nn,rename:an,renamenx:on,replconf:ln,replicaof:fn,reset:un,restore:cn,"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:yn,rpop:hn,rpoplpush:pn,rpush:dn,rpushx:gn,sadd:mn,save:_n,scan:kn,scard:Sn,script:bn,sdiff:vn,sdiffstore:wn,select:En,set:An,setbit:Cn,setex:xn,setnx:qn,setrange:zn,shutdown:On,sinter:Tn,sinterstore:Rn,sismember:Nn,slaveof:Bn,slowlog:Pn,smembers:Mn,smismember:Un,smove:In,sort:Ln,spop:$n,srandmember:Dn,srem:Fn,sscan:Kn,stralgo:Wn,strlen:Gn,subscribe:Qn,substr:Yn,sunion:Hn,sunionstore:Xn,swapdb:Zn,sync:Jn,time:Vn,touch:jn,ttl:ti,type:ei,unlink:ri,unsubscribe:si,unwatch:ni,wait:ii,watch:ai,xack:oi,xadd:li,xautoclaim:fi,xclaim:ui,xdel:ci,xgroup:yi,xinfo:hi,xlen:pi,xpending:di,xrange:gi,xread:mi,xreadgroup:_i,xrevrange:ki,xsetid:Si,xtrim:bi,zadd:vi,zcard:wi,zcount:Ei,zdiff:Ai,zdiffstore:Ci,zincrby:xi,zinter:qi,zinterstore:zi,zlexcount:Oi,zmscore:Ti,zpopmax:Ri,zpopmin:Ni,zrandmember:Bi,zrange:Pi,zrangebylex:Mi,zrangebyscore:Ui,zrangestore:Ii,zrank:Li,zrem:$i,zremrangebylex:Di,zremrangebyrank:Fi,zremrangebyscore:Ki,zrevrange:Wi,zrevrangebylex:Gi,zrevrangebyscore:Qi,zrevrank:Yi,zscan:Hi,zscore:Xi,zunion:Zi,zunionstore:Ji};(function(t){var e=Vi;t.list=Object.keys(e);var r={};t.list.forEach(function(l){r[l]=e[l].flags.reduce(function(a,f){return a[f]=!0,a},{})}),t.exists=function(l){return!!e[l]},t.hasFlag=function(l,a){if(!r[l])throw new Error("Unknown command "+l);return!!r[l][a]},t.getKeyIndexes=function(l,a,f){var h=e[l];if(!h)throw new Error("Unknown command "+l);if(!Array.isArray(a))throw new Error("Expect args to be an array");var u=[],y,_,g,o;switch(l){case"zunionstore":case"zinterstore":u.push(0);case"eval":case"evalsha":for(g=Number(a[1])+2,y=2;y<g;y++)u.push(y);break;case"sort":for(o=f&&f.parseExternalKey,u.push(0),y=1;y<a.length-1;y++)if(typeof a[y]=="string"){var i=a[y].toUpperCase();i==="GET"?(y+=1,a[y]!=="#"&&(o?u.push([y,n(a[y])]):u.push(y))):i==="BY"?(y+=1,o?u.push([y,n(a[y])]):u.push(y)):i==="STORE"&&(y+=1,u.push(y))}break;case"migrate":if(a[2]===""){for(y=5;y<a.length-1;y++)if(a[y].toUpperCase()==="KEYS"){for(var d=y+1;d<a.length;d++)u.push(d);break}}else u.push(2);break;case"xreadgroup":case"xread":for(y=l==="xread"?0:3;y<a.length-1;y++)if(String(a[y]).toUpperCase()==="STREAMS"){for(d=y+1;d<=y+(a.length-1-y)/2;d++)u.push(d);break}break;default:if(h.step>0)for(_=h.keyStart-1,g=h.keyStop>0?h.keyStop:a.length+h.keyStop+1,y=_;y<g;y+=h.step)u.push(y);break}return u};function n(l){typeof l!="string"&&(l=String(l));var a=l.indexOf("->");return a===-1?l.length:a}})(ht);var tt,kt;function pt(){if(kt)return tt;kt=1;var t=L();function e(){if(t.debug_mode){var r=Array.prototype.slice.call(arguments);r.unshift(new Date().toISOString()),console.error.apply(null,r)}}return tt=e,tt}var et=M,ji=Kt,ta=function(e,r,n){if(typeof e=="number"||typeof e=="string"&&/^\d+$/.test(e)){var l;if(typeof r=="string")l=r;else{if(n&&r)throw new TypeError("Unknown type of connection in createClient()");n=n||r}n=et.clone(n),n.host=l||n.host,n.port=e}else if(typeof e=="string"||e&&e.url){n=et.clone(e.url?e:r||n);var a=e.url||e,f=ji.parse(a,!0,!0);if(f.slashes){if(f.auth){var h=f.auth.indexOf(":");n.password=f.auth.slice(h+1),h>0&&(n.user=f.auth.slice(0,h))}if(f.protocol&&(f.protocol==="rediss:"?n.tls=n.tls||{}:f.protocol!=="redis:"&&console.warn('node_redis: WARNING: You passed "'+f.protocol.substring(0,f.protocol.length-1)+'" as protocol instead of the "redis" protocol!')),f.pathname&&f.pathname!=="/"&&(n.db=f.pathname.substr(1)),f.hostname&&(n.host=f.hostname),f.port&&(n.port=f.port),f.search!==""){var u;for(u in f.query){if(u in n)if(n[u]===f.query[u])console.warn("node_redis: WARNING: You passed the "+u+" option twice!");else throw new RangeError("The "+u+" option is added twice and does not match");n[u]=f.query[u]}}}else{if(f.hostname)throw new RangeError('The redis url must begin with slashes "//" or contain slashes after the redis protocol');n.path=a}}else if((typeof e=="object"||e===void 0)&&(n=et.clone(e||n),n.host=n.host||r,e&&arguments.length!==1))throw new TypeError("Too many arguments passed to createClient. Please only pass the options object");if(!n)throw new TypeError("Unknown type of connection in createClient()");return n},rt,St;function dt(){if(St)return rt;St=1;var t=qt,e=M,r=U;function n(h,u){this._client=h,this.queue=new t;var y,_;if(u)for(var g=0;g<u.length;g++)y=u[g][0],_=u[g].slice(1),Array.isArray(y)?this[y[0]].apply(this,y.slice(1).concat(_)):this[y].apply(this,_)}function l(h,u,y){var _=u.callback;u.callback=function(g,o){g&&y!==-1&&(_&&_(g),g.position=y,h.errors.push(g)),h.wants_buffers[y]=u.buffer_args,u.callback=_},h._client.internal_send_command(u)}n.prototype.exec_atomic=n.prototype.EXEC_ATOMIC=n.prototype.execAtomic=function(u){return this.queue.length<2?this.exec_batch(u):this.exec(u)};function a(h,u,y){var _=0,g;if(u){u.errors=h.errors,h.callback?h.callback(u):u.code!=="CONNECTION_BROKEN"&&h._client.emit("error",u);return}if(y)for(;g=h.queue.shift();){if(y[_]instanceof Error){var o=y[_].message.match(e.err_code);o&&(y[_].code=o[1]),y[_].command=g.command.toUpperCase(),typeof g.callback=="function"&&g.callback(y[_])}else y[_]=h._client.handle_reply(y[_],g.command,h.wants_buffers[_]),typeof g.callback=="function"&&g.callback(null,y[_]);_++}h.callback&&h.callback(null,y)}n.prototype.exec_transaction=function(u){if(this.monitoring||this._client.monitoring){var y=new RangeError("Using transaction with a client that is in monitor mode does not work due to faulty return values of Redis.");return y.command="EXEC",y.code="EXECABORT",e.reply_in_order(this._client,u,y)}var _=this,g=_.queue.length;_.errors=[],_.callback=u,_._client.cork(),_.wants_buffers=new Array(g),l(_,new r("multi",[]),-1);for(var o=0;o<g;o++)l(_,_.queue.get(o),o);return _._client.internal_send_command(new r("exec",[],function(i,d){a(_,i,d)})),_._client.uncork(),!_._client.should_buffer};function f(h,u,y){return function(g,o){g?(h.results[y]=g,h.results[y].position=y):h.results[y]=o,u(g,o)}}return n.prototype.exec=n.prototype.EXEC=n.prototype.exec_batch=function(u){var y=this,_=y.queue.length,g=0,o;if(_===0)return e.reply_in_order(y._client,u,null,[]),!y._client.should_buffer;if(y._client.cork(),!u){for(;o=y.queue.shift();)y._client.internal_send_command(o);return y._client.uncork(),!y._client.should_buffer}var i=function(p,S){if(p){y.results.push(p);var E=y.results.length-1;y.results[E].position=E}else y.results.push(S)},d=function(p){return function(S,E){p(S,E),u(null,y.results)}};for(y.results=[];o=y.queue.shift();)typeof o.callback=="function"?o.callback=f(y,o.callback,g):o.callback=i,typeof u=="function"&&g===_-1&&(o.callback=d(o.callback)),this._client.internal_send_command(o),g++;return y._client.uncork(),!y._client.should_buffer},rt=n,rt}var bt={},vt;function ea(){if(vt)return bt;vt=1;var t=M,e=pt(),r=dt(),n=U,l=/no password is set|called without any password configured/,a=/LOADING/,f=L().RedisClient;f.prototype.multi=f.prototype.MULTI=function(o){var i=new r(this,o);return i.exec=i.EXEC=i.exec_transaction,i},f.prototype.batch=f.prototype.BATCH=function(o){return new r(this,o)};function h(g,o,i){return function(d,p){d===null&&(g.selected_db=o),t.callback_or_emit(g,i,d,p)}}f.prototype.select=f.prototype.SELECT=function(o,i){return this.internal_send_command(new n("select",[o],h(this,o,i)))},r.prototype.select=r.prototype.SELECT=function(o,i){return this.queue.push(new n("select",[o],h(this._client,o,i))),this},f.prototype.monitor=f.prototype.MONITOR=function(o){var i=this,d=function(){i.monitoring=!0};return this.internal_send_command(new n("monitor",[],o,d))},r.prototype.monitor=r.prototype.MONITOR=function(o){if(this.exec!==this.exec_transaction){var i=this,d=function(){i._client.monitoring=!0};return this.queue.push(new n("monitor",[],o,d)),this}return this.monitoring=!0,this};function u(g,o){return function(i,d){i&&i.code==="NR_CLOSED"&&(i=null,d="OK"),t.callback_or_emit(g,o,i,d),g.stream.writable&&g.stream.destroy()}}f.prototype.QUIT=f.prototype.quit=function(o){var i=this.internal_send_command(new n("quit",[],u(this,o)));return this.closing=!0,this.ready=!1,i},r.prototype.QUIT=r.prototype.quit=function(o){var i=this._client,d=function(){i.closing=!0,i.ready=!1};return this.queue.push(new n("quit",[],u(i,o),d)),this};function y(g,o){return function(i,d){if(d){for(var p={},S=d.toString().split(`\r
`),E,b,$,N=0;N<S.length;N++)if(b=S[N].split(":"),b[1])if(b[0].indexOf("db")===0)for($=b[1].split(","),p[b[0]]={};E=$.pop();)E=E.split("="),p[b[0]][E[0]]=+E[1];else p[b[0]]=b[1];p.versions=[],p.redis_version&&p.redis_version.split(".").forEach(function(B){p.versions.push(+B)}),g.server_info=p}else g.server_info={};t.callback_or_emit(g,o,i,d)}}f.prototype.info=f.prototype.INFO=function(o,i){var d=[];return typeof o=="function"?i=o:o!==void 0&&(d=Array.isArray(o)?o:[o]),this.internal_send_command(new n("info",d,y(this,i)))},r.prototype.info=r.prototype.INFO=function(o,i){var d=[];return typeof o=="function"?i=o:o!==void 0&&(d=Array.isArray(o)?o:[o]),this.queue.push(new n("info",d,y(this._client,i))),this};function _(g,o,i,d){return function(p,S){if(p){if(l.test(p.message))g.warn("Warning: Redis server does not require a password, but a password was supplied."),p=null,S="OK";else if(a.test(p.message)){e("Redis still loading, trying to authenticate later"),setTimeout(function(){g.auth(o,i,d)},100);return}}t.callback_or_emit(g,d,p,S)}}return f.prototype.auth=f.prototype.AUTH=function(o,i,d){e("Sending auth to "+this.address+" id "+this.connection_id),i instanceof Function&&(d=i,i=null),this.auth_pass=o,this.auth_user=i;var p=this.ready;this.ready=p||this.offline_queue.length===0;var S=this.internal_send_command(new n("auth",i?[i,o]:[o],_(this,o,i,d)));return this.ready=p,S},r.prototype.auth=r.prototype.AUTH=function(o,i,d){return e("Sending auth to "+this.address+" id "+this.connection_id),i instanceof Function&&(d=i,i=null),this.auth_pass=o,this.auth_user=i,this.queue.push(new n("auth",i?[i,o]:[o],_(this._client,o,i,d))),this},f.prototype.client=f.prototype.CLIENT=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0],d=arguments[1];else if(Array.isArray(arguments[1]))for(i===3&&(d=arguments[2]),i=arguments[1].length,o=new Array(i+1),o[0]=arguments[0];p<i;p+=1)o[p+1]=arguments[1][p];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this,E=void 0;if(o.length===2&&o[0].toString().toUpperCase()==="REPLY"){var b=o[1].toString().toUpperCase();(b==="ON"||b==="OFF"||b==="SKIP")&&(E=function(){S.reply=b})}return this.internal_send_command(new n("client",o,d,E))},r.prototype.client=r.prototype.CLIENT=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0],d=arguments[1];else if(Array.isArray(arguments[1]))for(i===3&&(d=arguments[2]),i=arguments[1].length,o=new Array(i+1),o[0]=arguments[0];p<i;p+=1)o[p+1]=arguments[1][p];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this._client,E=void 0;if(o.length===2&&o[0].toString().toUpperCase()==="REPLY"){var b=o[1].toString().toUpperCase();(b==="ON"||b==="OFF"||b==="SKIP")&&(E=function(){S.reply=b})}return this.queue.push(new n("client",o,d,E)),this},f.prototype.hmset=f.prototype.HMSET=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0],d=arguments[1];else if(Array.isArray(arguments[1]))for(i===3&&(d=arguments[2]),i=arguments[1].length,o=new Array(i+1),o[0]=arguments[0];p<i;p+=1)o[p+1]=arguments[1][p];else if(typeof arguments[1]=="object"&&(arguments.length===2||arguments.length===3&&(typeof arguments[2]=="function"||typeof arguments[2]>"u"))){o=[arguments[0]];for(var S in arguments[1])o.push(S,arguments[1][S]);d=arguments[2]}else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];return this.internal_send_command(new n("hmset",o,d))},r.prototype.hmset=r.prototype.HMSET=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0],d=arguments[1];else if(Array.isArray(arguments[1]))for(i===3&&(d=arguments[2]),i=arguments[1].length,o=new Array(i+1),o[0]=arguments[0];p<i;p+=1)o[p+1]=arguments[1][p];else if(typeof arguments[1]=="object"&&(arguments.length===2||arguments.length===3&&(typeof arguments[2]=="function"||typeof arguments[2]>"u"))){o=[arguments[0]];for(var S in arguments[1])o.push(S,arguments[1][S]);d=arguments[2]}else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];return this.queue.push(new n("hmset",o,d)),this},f.prototype.subscribe=f.prototype.SUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.internal_send_command(new n("subscribe",o,d,E))},r.prototype.subscribe=r.prototype.SUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this._client,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.queue.push(new n("subscribe",o,d,E)),this},f.prototype.unsubscribe=f.prototype.UNSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.internal_send_command(new n("unsubscribe",o,d,E))},r.prototype.unsubscribe=r.prototype.UNSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this._client,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.queue.push(new n("unsubscribe",o,d,E)),this},f.prototype.psubscribe=f.prototype.PSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.internal_send_command(new n("psubscribe",o,d,E))},r.prototype.psubscribe=r.prototype.PSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this._client,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.queue.push(new n("psubscribe",o,d,E)),this},f.prototype.punsubscribe=f.prototype.PUNSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.internal_send_command(new n("punsubscribe",o,d,E))},r.prototype.punsubscribe=r.prototype.PUNSUBSCRIBE=function(){var o,i=arguments.length,d,p=0;if(Array.isArray(arguments[0]))o=arguments[0].slice(0),d=arguments[1];else for(i=arguments.length,i!==0&&(typeof arguments[i-1]=="function"||typeof arguments[i-1]>"u")&&(i--,d=arguments[i]),o=new Array(i);p<i;p+=1)o[p]=arguments[p];var S=this._client,E=function(){S.pub_sub_mode=S.pub_sub_mode||S.command_queue.length+1};return this.queue.push(new n("punsubscribe",o,d,E)),this},bt}var wt={},Et;function ra(){if(Et)return wt;Et=1;var t=M,e=pt(),r=L().RedisClient,n=U,l=function(){};return r.prototype.send_command=r.prototype.sendCommand=function(a,f,h){if(typeof a!="string")throw new TypeError('Wrong input type "'+(a!=null?a.constructor.name:a)+'" for command name');if(a=a.toLowerCase(),!Array.isArray(f))if(f==null)f=[];else if(typeof f=="function"&&h===void 0)h=f,f=[];else throw new TypeError('Wrong input type "'+f.constructor.name+'" for args');if(typeof h!="function"&&h!==void 0)throw new TypeError('Wrong input type "'+(h!==null?h.constructor.name:"null")+'" for callback function');return a==="multi"||typeof this[a]!="function"?this.internal_send_command(new n(a,f,h)):(typeof h=="function"&&(f=f.concat([h])),this[a].apply(this,f))},r.prototype.end=function(a){return a?this.flush_and_error({message:"Connection forcefully ended and command aborted.",code:"NR_CLOSED"}):arguments.length===0&&this.warn(`Using .end() without the flush parameter is deprecated and throws from v.3.0.0 on.
Please check the doku (https://github.com/NodeRedis/node_redis) and explictly use flush.`),this.retry_timer&&(clearTimeout(this.retry_timer),this.retry_timer=null),this.stream.removeAllListeners(),this.stream.on("error",l),this.connected=!1,this.ready=!1,this.closing=!0,this.stream.destroySoon()},r.prototype.unref=function(){this.connected?(e("Unref'ing the socket connection"),this.stream.unref()):(e("Not connected yet, will unref later"),this.once("connect",function(){this.unref()}))},r.prototype.duplicate=function(a,f){typeof a=="function"&&(f=a,a=null);var h=t.clone(this.options);a=t.clone(a);for(var u in a)h[u]=a[u];var y=new r(h);if(y.selected_db=a.db||this.selected_db,typeof f=="function"){var _=function(){f(null,y),y.removeAllListeners(g)},g=function(o){f(o),y.end(!0)};y.once("ready",_),y.once("error",g);return}return y},wt}var st,At;function sa(){if(At)return st;At=1;var t=ht,e=dt(),r=L().RedisClient,n=U,l=function(a){var f=a.replace(/(?:^([0-9])|[^a-zA-Z0-9_$])/g,"_$1");r.prototype[a]||(r.prototype[a.toUpperCase()]=r.prototype[a]=function(){var h,u=arguments.length,y,_=0;if(Array.isArray(arguments[0]))h=arguments[0],u===2&&(y=arguments[1]);else if(u>1&&Array.isArray(arguments[1]))for(u===3&&(y=arguments[2]),u=arguments[1].length,h=new Array(u+1),h[0]=arguments[0];_<u;_+=1)h[_+1]=arguments[1][_];else for(u!==0&&(typeof arguments[u-1]=="function"||typeof arguments[u-1]>"u")&&(u--,y=arguments[u]),h=new Array(u);_<u;_+=1)h[_]=arguments[_];return this.internal_send_command(new n(a,h,y))},f!==a&&(r.prototype[f.toUpperCase()]=r.prototype[f]=r.prototype[a]),Object.defineProperty(r.prototype[a],"name",{value:f})),e.prototype[a]||(e.prototype[a.toUpperCase()]=e.prototype[a]=function(){var h,u=arguments.length,y,_=0;if(Array.isArray(arguments[0]))h=arguments[0],u===2&&(y=arguments[1]);else if(u>1&&Array.isArray(arguments[1]))for(u===3&&(y=arguments[2]),u=arguments[1].length,h=new Array(u+1),h[0]=arguments[0];_<u;_+=1)h[_+1]=arguments[1][_];else for(u!==0&&(typeof arguments[u-1]=="function"||typeof arguments[u-1]>"u")&&(u--,y=arguments[u]),h=new Array(u);_<u;_+=1)h[_]=arguments[_];return this.queue.push(new n(a,h,y)),this},f!==a&&(e.prototype[f.toUpperCase()]=e.prototype[f]=e.prototype[a]),Object.defineProperty(e.prototype[a],"name",{value:f}))};return t.list.forEach(l),st=l,st}var Ct;function L(){return Ct||(Ct=1,function(t){var e={},r=Yt,n=Zt,l=lt,a=M,f=U,h=qt,u=ce,y=pe,_=We,g=ut,o=ht,i=pt(),d=ta,p={subscribe:!0,unsubscribe:!0,psubscribe:!0,punsubscribe:!0};function S(){}function E(s,c,m){return(m===!1||this.message_buffers)&&(s=a.reply_to_strings(s)),c==="hgetall"&&(s=a.reply_to_object(s)),s}t.debug_mode=/\bredis\b/i.test(e.NODE_DEBUG);function b(s,c){s=a.clone(s),y.call(this);var m={},k=this;for(var w in s.tls)m[w]=s.tls[w],(w==="port"||w==="host"||w==="path"||w==="family")&&(s[w]=s.tls[w]);c?(s.stream=c,this.address='"Private stream"'):s.path?(m.path=s.path,this.address=s.path):(m.port=+s.port||6379,m.host=s.host||"127.0.0.1",m.family=!s.family&&r.isIP(m.host)||(s.family==="IPv6"?6:4),this.address=m.host+":"+m.port),this.connection_options=m,this.connection_id=b.connection_id++,this.connected=!1,this.ready=!1,s.socket_keepalive===void 0&&(s.socket_keepalive=!0),s.socket_initial_delay===void 0&&(s.socket_initial_delay=0);for(var v in s.rename_commands)s.rename_commands[v.toLowerCase()]=s.rename_commands[v];s.return_buffers=!!s.return_buffers,s.detect_buffers=!!s.detect_buffers,s.return_buffers&&s.detect_buffers&&(k.warn("WARNING: You activated return_buffers and detect_buffers at the same time. The return value is always going to be a buffer."),s.detect_buffers=!1),s.detect_buffers&&(this.handle_reply=E),this.should_buffer=!1,this.command_queue=new h,this.offline_queue=new h,this.pipeline_queue=new h,this.connect_timeout=+s.connect_timeout||36e5,this.enable_offline_queue=s.enable_offline_queue!==!1,this.initialize_retry_vars(),this.pub_sub_mode=0,this.subscription_set={},this.monitoring=!1,this.message_buffers=!1,this.closing=!1,this.server_info={},this.auth_pass=s.auth_pass||s.password,this.auth_user=s.auth_user||s.user,this.selected_db=s.db,this.fire_strings=!0,this.pipeline=!1,this.sub_commands_left=0,this.times_connected=0,this.buffers=s.return_buffers||s.detect_buffers,this.options=s,this.reply="ON",this.create_stream(),this.on("newListener",function(A){(A==="message_buffer"||A==="pmessage_buffer"||A==="messageBuffer"||A==="pmessageBuffer")&&!this.buffers&&!this.message_buffers&&(this.reply_parser.optionReturnBuffers=!0,this.message_buffers=!0,this.handle_reply=E)})}l.inherits(b,y),b.connection_id=0;function $(s){return new _({returnReply:function(c){s.return_reply(c)},returnError:function(c){s.return_error(c)},returnFatalError:function(c){c.message+=". Please report this.",s.ready=!1,s.flush_and_error({message:"Fatal error encountered. Command aborted.",code:"NR_FATAL"},{error:c,queues:["command_queue"]}),s.emit("error",c),s.create_stream()},returnBuffers:s.buffers||s.message_buffers,stringNumbers:s.options.string_numbers||!1})}b.prototype.create_stream=function(){var s=this;if(this.reply_parser=$(this),this.options.stream){if(this.stream)return;this.stream=this.options.stream}else this.stream&&(this.stream.removeAllListeners(),this.stream.destroy()),this.options.tls?this.stream=n.connect(this.connection_options):this.stream=r.createConnection(this.connection_options);this.options.connect_timeout&&this.stream.setTimeout(this.connect_timeout,function(){s.retry_totaltime=s.connect_timeout,s.connection_gone("timeout")});var c=this.options.tls?"secureConnect":"connect";this.stream.once(c,function(){this.removeAllListeners("timeout"),s.times_connected++,s.on_connect()}),this.stream.on("data",function(m){i("Net read "+s.address+" id "+s.connection_id),s.reply_parser.execute(m)}),this.stream.on("error",function(m){s.on_error(m)}),this.stream.once("close",function(m){s.connection_gone("close")}),this.stream.once("end",function(){s.connection_gone("end")}),this.stream.on("drain",function(){s.drain()}),this.stream.setNoDelay(),this.auth_pass!==void 0&&(this.ready=!0,this.auth(this.auth_pass,this.auth_user,function(m){m&&m.code!=="UNCERTAIN_STATE"&&s.emit("error",m)}),this.ready=!1)},b.prototype.handle_reply=function(s,c){return c==="hgetall"&&(s=a.reply_to_object(s)),s},b.prototype.cork=S,b.prototype.uncork=S,b.prototype.initialize_retry_vars=function(){this.retry_timer=null,this.retry_totaltime=0,this.retry_delay=200,this.retry_backoff=1.7,this.attempts=1},b.prototype.warn=function(s){var c=this;process.nextTick(function(){c.listeners("warning").length!==0?c.emit("warning",s):console.warn("node_redis:",s)})},b.prototype.flush_and_error=function(s,c){c=c||{};for(var m=[],k=c.queues||["command_queue","offline_queue"],w=0;w<k.length;w++){k[w]==="command_queue"?s.message+=" It might have been processed.":s.message=s.message.replace(" It might have been processed.","");for(var v=this[k[w]].shift();v;v=this[k[w]].shift()){var A=new u.AbortError(s);v.error&&(A.stack=A.stack+v.error.stack.replace(/^Error.*?\n/,`
`)),A.command=v.command.toUpperCase(),v.args&&v.args.length&&(A.args=v.args),c.error&&(A.origin=c.error),typeof v.callback=="function"?v.callback(A):m.push(A)}}if(t.debug_mode&&m.length){var q;m.length===1?q=m[0]:(s.message=s.message.replace("It","They").replace(/command/i,"$&s"),q=new u.AggregateError(s),q.errors=m),this.emit("error",q)}},b.prototype.on_error=function(s){this.closing||(s.message="Redis connection to "+this.address+" failed - "+s.message,i(s.message),this.connected=!1,this.ready=!1,this.options.retry_strategy||this.emit("error",s),this.connection_gone("error",s))},b.prototype.on_connect=function(){i("Stream connected "+this.address+" id "+this.connection_id),this.connected=!0,this.ready=!1,this.emitted_end=!1,this.stream.setKeepAlive(this.options.socket_keepalive,this.options.socket_initial_delay),this.stream.setTimeout(0),this.emit("connect"),this.initialize_retry_vars(),this.options.no_ready_check?this.on_ready():this.ready_check()},b.prototype.on_ready=function(){var s=this;i("on_ready called "+this.address+" id "+this.connection_id),this.ready=!0,this.cork=function(){s.pipeline=!0,s.stream.cork&&s.stream.cork()},this.uncork=function(){s.fire_strings?s.write_strings():s.write_buffers(),s.pipeline=!1,s.fire_strings=!0,s.stream.uncork&&s.stream.uncork()},this.selected_db!==void 0&&this.internal_send_command(new f("select",[this.selected_db])),this.monitoring&&this.internal_send_command(new f("monitor",[]));var c=Object.keys(this.subscription_set).length;if(!this.options.disable_resubscribing&&c){var m=function(){c--,c===0&&s.emit("ready")};i("Sending pub/sub on_ready commands");for(var k in this.subscription_set){var w=k.slice(0,k.indexOf("_")),v=this.subscription_set[k];this[w]([v],m)}this.send_offline_queue();return}this.send_offline_queue(),this.emit("ready")},b.prototype.on_info_cmd=function(s,c){if(s){if(s.message==="ERR unknown command 'info'"){this.on_ready();return}s.message="Ready check failed: "+s.message,this.emit("error",s);return}if(!c){i("The info command returned without any data."),this.on_ready();return}if(!this.server_info.loading||this.server_info.loading==="0")if(this.server_info.master_link_status&&this.server_info.master_link_status!=="up")this.server_info.loading_eta_seconds=.05;else{i("Redis server ready."),this.on_ready();return}var m=+this.server_info.loading_eta_seconds*1e3;m>1e3&&(m=1e3),i("Redis server still loading, trying again in "+m),setTimeout(function(k){k.ready_check()},m,this)},b.prototype.ready_check=function(){var s=this;i("Checking server ready state..."),this.ready=!0,this.info(function(c,m){s.on_info_cmd(c,m)}),this.ready=!1},b.prototype.send_offline_queue=function(){for(var s=this.offline_queue.shift();s;s=this.offline_queue.shift())i("Sending offline command: "+s.command),this.internal_send_command(s);this.drain()};var N=function(s,c){i("Retrying connection...");var m={delay:s.retry_delay,attempt:s.attempts,error:c};s.options.camel_case?(m.totalRetryTime=s.retry_totaltime,m.timesConnected=s.times_connected):(m.total_retry_time=s.retry_totaltime,m.times_connected=s.times_connected),s.emit("reconnecting",m),s.retry_totaltime+=s.retry_delay,s.attempts+=1,s.retry_delay=Math.round(s.retry_delay*s.retry_backoff),s.create_stream(),s.retry_timer=null};b.prototype.connection_gone=function(s,c){if(!this.retry_timer){if(c=c||null,i("Redis connection is gone from "+s+" event."),this.connected=!1,this.ready=!1,this.cork=S,this.uncork=S,this.pipeline=!1,this.pub_sub_mode=0,this.emitted_end||(this.emit("end"),this.emitted_end=!0),this.closing){i("Connection ended by quit / end command, not retrying."),this.flush_and_error({message:"Stream connection ended and command aborted.",code:"NR_CLOSED"},{error:c});return}if(typeof this.options.retry_strategy=="function"){var m={attempt:this.attempts,error:c};if(this.options.camel_case?(m.totalRetryTime=this.retry_totaltime,m.timesConnected=this.times_connected):(m.total_retry_time=this.retry_totaltime,m.times_connected=this.times_connected),this.retry_delay=this.options.retry_strategy(m),typeof this.retry_delay!="number"){this.retry_delay instanceof Error&&(c=this.retry_delay);var k="Redis connection in broken state: retry aborted.";this.flush_and_error({message:k,code:"CONNECTION_BROKEN"},{error:c});var w=new Error(k);w.code="CONNECTION_BROKEN",c&&(w.origin=c),this.end(!1),this.emit("error",w);return}}if(this.retry_totaltime>=this.connect_timeout){var v="Redis connection in broken state: connection timeout exceeded.";this.flush_and_error({message:v,code:"CONNECTION_BROKEN"},{error:c});var A=new Error(v);A.code="CONNECTION_BROKEN",c&&(A.origin=c),this.end(!1),this.emit("error",A);return}this.options.retry_unfulfilled_commands?(this.offline_queue.unshift.apply(this.offline_queue,this.command_queue.toArray()),this.command_queue.clear()):this.command_queue.length!==0&&this.flush_and_error({message:"Redis connection lost and command aborted.",code:"UNCERTAIN_STATE"},{error:c,queues:["command_queue"]}),this.retry_totaltime+this.retry_delay>this.connect_timeout&&(this.retry_delay=this.connect_timeout-this.retry_totaltime),i("Retry connection in "+this.retry_delay+" ms"),this.retry_timer=setTimeout(N,this.retry_delay,this,c)}},b.prototype.return_error=function(s){var c=this.command_queue.shift();c.error&&(s.stack=c.error.stack.replace(/^Error.*?\n/,"ReplyError: "+s.message+`
`)),s.command=c.command.toUpperCase(),c.args&&c.args.length&&(s.args=c.args),this.pub_sub_mode>1&&this.pub_sub_mode--;var m=s.message.match(a.err_code);m&&(s.code=m[1]),a.callback_or_emit(this,c.callback,s)},b.prototype.drain=function(){this.should_buffer=!1};function B(s,c){var m=s.command_queue.shift();typeof m.callback=="function"?(m.command!=="exec"&&(c=s.handle_reply(c,m.command,m.buffer_args)),m.callback(null,c)):i("No callback for reply")}function Ut(s,c,m){var k=s.command_queue.get(0),w=s.options.return_buffers||s.options.detect_buffers&&k.buffer_args,v=w||c[1]===null?c[1]:c[1].toString(),A=+c[2];if(i(m,v),v!==null&&(s.emit(m,v,A),m==="subscribe"||m==="psubscribe"?s.subscription_set[m+"_"+v]=v:(m=m==="unsubscribe"?"subscribe":"psubscribe",delete s.subscription_set[m+"_"+v])),k.args.length===1||s.sub_commands_left===1||k.args.length===0&&(A===0||v===null)){if(A===0){var q,T=1;for(s.pub_sub_mode=0;q=s.command_queue.get(T);){if(p[q.command]){s.pub_sub_mode=T;break}T++}}s.command_queue.shift(),typeof k.callback=="function"&&k.callback(null,v),s.sub_commands_left=0}else s.sub_commands_left!==0?s.sub_commands_left--:s.sub_commands_left=k.args.length?k.args.length-1:A}function It(s,c){var m=c[0].toString();m==="message"?!s.options.return_buffers||s.message_buffers?(s.emit("message",c[1].toString(),c[2].toString()),s.emit("message_buffer",c[1],c[2]),s.emit("messageBuffer",c[1],c[2])):s.emit("message",c[1],c[2]):m==="pmessage"?!s.options.return_buffers||s.message_buffers?(s.emit("pmessage",c[1].toString(),c[2].toString(),c[3].toString()),s.emit("pmessage_buffer",c[1],c[2],c[3]),s.emit("pmessageBuffer",c[1],c[2],c[3])):s.emit("pmessage",c[1],c[2],c[3]):Ut(s,c,m)}b.prototype.return_reply=function(s){if(this.monitoring){var c;if(this.buffers&&Buffer.isBuffer(s)?c=s.toString():c=s,typeof c=="string"&&a.monitor_regex.test(c)){var m=c.slice(0,c.indexOf(" ")),k=c.slice(c.indexOf('"')+1,-1).split('" "').map(function(w){return w.replace(/\\"/g,'"')});this.emit("monitor",m,k,c);return}}this.pub_sub_mode===0?B(this,s):this.pub_sub_mode!==1?(this.pub_sub_mode--,B(this,s)):!(s instanceof Array)||s.length<=2?B(this,s):It(this,s)};function Lt(s,c){var m=c.command,k,w;s.closing||!s.enable_offline_queue?(m=m.toUpperCase(),s.closing?w="The connection is already closed.":s.stream.writable?w="The connection is not yet established and the offline queue is deactivated.":w="Stream not writeable.",k=new u.AbortError({message:m+" can't be processed. "+w,code:"NR_CLOSED",command:m}),c.args.length&&(k.args=c.args),a.reply_in_order(s,c.callback,k)):(i("Queueing "+m+" for next server connection."),s.offline_queue.push(c)),s.should_buffer=!0}b.prototype.internal_send_command=function(s){var c,m,k=0,w="",v=s.args,A=s.command,q=v.length,T=!1,O=new Array(q);if(process.domain&&s.callback&&(s.callback=process.domain.bind(s.callback)),this.ready===!1||this.stream.writable===!1)return Lt(this,s),!1;for(k=0;k<q;k+=1)if(typeof v[k]=="string")v[k].length>3e4?(T=!0,O[k]=Buffer.from(v[k],"utf8")):O[k]=v[k];else if(typeof v[k]=="object")if(v[k]instanceof Date)O[k]=v[k].toString();else if(Buffer.isBuffer(v[k]))O[k]=v[k],s.buffer_args=!0,T=!0;else{var D=new Error("node_redis: The "+A.toUpperCase()+` command contains a invalid argument type.
Only strings, dates and buffers are accepted. Please update your code to use valid argument types.`);if(D.command=s.command.toUpperCase(),s.args&&s.args.length&&(D.args=s.args),s.callback)return s.callback(D),!1;throw D}else if(typeof v[k]>"u"){var Y=new Error("node_redis: The "+A.toUpperCase()+` command contains a invalid argument type of "undefined".
Only strings, dates and buffers are accepted. Please update your code to use valid argument types.`);return Y.command=s.command.toUpperCase(),s.args&&s.args.length&&(Y.args=s.args),s.callback(Y),!1}else O[k]=""+v[k];if(this.options.prefix)for(m=o.getKeyIndexes(A,O),k=m.pop();k!==void 0;k=m.pop())O[k]=this.options.prefix+O[k];if(this.options.rename_commands&&this.options.rename_commands[A]&&(A=this.options.rename_commands[A]),w="*"+(q+1)+`\r
$`+A.length+`\r
`+A+`\r
`,T===!1){for(k=0;k<q;k+=1)c=O[k],w+="$"+Buffer.byteLength(c)+`\r
`+c+`\r
`;i("Send "+this.address+" id "+this.connection_id+": "+w),this.write(w)}else for(i("Send command ("+w+") has Buffer arguments"),this.fire_strings=!1,this.write(w),k=0;k<q;k+=1)c=O[k],typeof c=="string"?this.write("$"+Buffer.byteLength(c)+`\r
`+c+`\r
`):(this.write("$"+c.length+`\r
`),this.write(c),this.write(`\r
`)),i("send_command: buffer send "+c.length+" bytes");return s.call_on_write&&s.call_on_write(),this.reply==="ON"?this.command_queue.push(s):(s.callback&&a.reply_in_order(this,s.callback,null,void 0,this.command_queue),this.reply==="SKIP"?this.reply="SKIP_ONE_MORE":this.reply==="SKIP_ONE_MORE"&&(this.reply="ON")),!this.should_buffer},b.prototype.write_strings=function(){for(var s="",c=this.pipeline_queue.shift();c;c=this.pipeline_queue.shift())s.length+c.length>4*1024*1024&&(this.should_buffer=!this.stream.write(s),s=""),s+=c;s!==""&&(this.should_buffer=!this.stream.write(s))},b.prototype.write_buffers=function(){for(var s=this.pipeline_queue.shift();s;s=this.pipeline_queue.shift())this.should_buffer=!this.stream.write(s)},b.prototype.write=function(s){if(this.pipeline===!1){this.should_buffer=!this.stream.write(s);return}this.pipeline_queue.push(s)},Object.defineProperty(t,"debugMode",{get:function(){return this.debug_mode},set:function(s){this.debug_mode=s}}),Object.defineProperty(b.prototype,"command_queue_length",{get:function(){return this.command_queue.length}}),Object.defineProperty(b.prototype,"offline_queue_length",{get:function(){return this.offline_queue.length}}),Object.defineProperty(b.prototype,"retryDelay",{get:function(){return this.retry_delay}}),Object.defineProperty(b.prototype,"retryBackoff",{get:function(){return this.retry_backoff}}),Object.defineProperty(b.prototype,"commandQueueLength",{get:function(){return this.command_queue.length}}),Object.defineProperty(b.prototype,"offlineQueueLength",{get:function(){return this.offline_queue.length}}),Object.defineProperty(b.prototype,"shouldBuffer",{get:function(){return this.should_buffer}}),Object.defineProperty(b.prototype,"connectionId",{get:function(){return this.connection_id}}),Object.defineProperty(b.prototype,"serverInfo",{get:function(){return this.server_info}}),t.createClient=function(){return new b(d.apply(null,arguments))},t.RedisClient=b,t.print=a.print,t.Multi=dt(),t.AbortError=u.AbortError,t.RedisError=g.RedisError,t.ParserError=g.ParserError,t.ReplyError=g.ReplyError,t.AggregateError=u.AggregateError,ea(),ra(),t.addCommand=t.add_command=sa()}(H)),H}var Mt=L();const na=$t(Mt),la=Wt({__proto__:null,default:na},[Mt]);export{la as i};
