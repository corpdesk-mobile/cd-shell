/* ============================================================
   CORPDESK BRIDGE FOR MATERIAL COMPONENTS WEB (MDC)
   Purpose:
   - Provide Corpdesk theme tokens for MDC
   - Preserve MDC native filled-text-field behaviour
   - Fix light & dark mode contrast
   - Make MDC select controls span 100% width (POC default)
   - Adjust spacing without breaking MDC layout engine
   ============================================================ */

/* ------------------------------------------------------------
   ROOT TOKENS — LIGHT DEFAULT
------------------------------------------------------------ */
:root {
  --cd-bridge-body-font-family: "Roboto", "Helvetica", Arial, sans-serif;
  --cd-bridge-body-font-size: 1rem;

  --cd-color-bg: #ffffff;
  --cd-color-surface: #f5f5f7;
  --cd-color-text: #111;

  --cd-primary-color: #1976d2;
  --cd-primary-color-contrast: #fff;

  --cd-input-text-color: #212121;
  --cd-input-placeholder: rgba(0,0,0,0.54);
  --cd-color-invalid: #e53935;

  --cd-input-bg: #f4f6f8; /* MDC filled bg */

  --cd-menu-bg: #ffffff;
  --cd-menu-text: #222;
  --cd-menu-active-bg: #f1f3f5;
  --cd-menu-active-text: #000;
  --cd-menu-hover-bg: rgba(0,0,0,0.05);
}

/* ------------------------------------------------------------
   DARK MODE OVERRIDES
   Covers: shell background, text, menu, buttons, MDC components
------------------------------------------------------------ */
html[data-md-theme="dark"] {
  --cd-color-bg: #0e0e0f;
  --cd-color-surface: #1c1c1e;
  --cd-color-text: #e4e4e4;

  --cd-menu-bg: #121212;
  --cd-menu-text: #dcdcdc;
  --cd-menu-active-bg: #1f1f1f;
  --cd-menu-active-text: #ffffff;
  --cd-menu-hover-bg: rgba(255,255,255,0.08);

  /* MDC textfield */
  --cd-input-bg: #1b1f23;
  --cd-input-text-color: #eaeaea;
  --cd-input-placeholder: rgba(255,255,255,0.6);

  /* primary tint for dark mode */
  --cd-primary-color: #90caf9;
}

/* ------------------------------------------------------------
   TYPOGRAPHY
------------------------------------------------------------ */
body, input, textarea, select, button {
  font-family: var(--cd-bridge-body-font-family);
  font-size: var(--cd-bridge-body-font-size);
  color: var(--cd-color-text);
}

/* Page background */
body {
  background-color: var(--cd-color-bg);
}

/* ------------------------------------------------------------
   SIDEBAR / MENU
------------------------------------------------------------ */
#cd-sidebar {
  background: var(--cd-menu-bg);
  color: var(--cd-menu-text);
}

#cd-sidebar a.cd-menu-link {
  color: var(--cd-menu-text);
}

#cd-sidebar a.cd-menu-link:hover {
  background: var(--cd-menu-hover-bg);
  color: var(--cd-menu-active-text);
}

#cd-sidebar .mm-active > a {
  background: var(--cd-menu-active-bg) !important;
  color: var(--cd-menu-active-text) !important;
}

/* ------------------------------------------------------------
   MDC TEXT FIELD BRIDGE (SAFE OVERRIDES ONLY)
------------------------------------------------------------ */

/* Wrapper keeps MDC geometry intact */
.cd-md-text-field {
  position: relative;
  width: 100%;
  margin: 0;
  padding: 0;
  background: none !important;
  box-shadow: none;

  margin-bottom: 18px !important; /* spacing between controls */
}

/* Filled background visually */
.cd-md-text-field.mdc-text-field--filled {
  background-color: var(--cd-input-bg) !important;
  border-radius: 4px;
}

/* Input text color + padding FIX (safe) */
.cd-md-text-field .mdc-text-field__input {
  color: var(--cd-input-text-color);

  /* These padding values DO NOT break MDC line-ripple */
  padding-left: 15px !important;
  padding-right: 15px !important;
}

.cd-md-text-field .mdc-text-field__input::placeholder {
  color: var(--cd-input-placeholder);
}

/* Floating label colors */
.cd-md-text-field .mdc-floating-label {
  color: var(--cd-input-placeholder);
}

.cd-md-text-field.mdc-text-field--focused .mdc-floating-label {
  color: var(--cd-primary-color);
}

/* Line ripple color */
.cd-md-text-field .mdc-line-ripple {
  background-color: transparent;
}

.cd-md-text-field.mdc-text-field--focused .mdc-line-ripple {
  background-color: var(--cd-primary-color);
}

/* Invalid state */
.cd-md-text-field.mdc-text-field--invalid .mdc-floating-label {
  color: var(--cd-color-invalid);
}

.cd-md-text-field.mdc-text-field--invalid .mdc-line-ripple {
  background-color: var(--cd-color-invalid);
}

/* Force correct text color in both light & dark themes */
.cd-md-text-field.mdc-text-field--filled .mdc-text-field__input {
  color: var(--cd-input-text-color) !important;
}

/* ------------------------------------------------------------
   MDC SELECT (Model-A) — sizing + POC defaults
   Goal: make selects 100% width like inputs (POC)
------------------------------------------------------------ */

/* Wrapper used by adapter — ensure full width & block layout */
.cd-md-select-wrapper,
.mdc-select {
  display: block;
  width: 100%;
  box-sizing: border-box;
  margin-bottom: 18px !important; /* match text-fields */
}

/* Anchor (the visible trigger) must fill available width */
.mdc-select__anchor {
  width: 100% !important;     /* IMPORTANT: force full width for POC */
  min-width: 0;               /* allow shrinking inside flex containers */
  display: flex;
  align-items: center;
  box-sizing: border-box;
  padding-left: 12px;         /* slightly reduced padding so text lines up with inputs */
  padding-right: 12px;
  height: 56px;               /* match filled text-field height */
  cursor: pointer;
}

/* Keep ripple inside anchor and allow full-width area for ripple */
.mdc-select__ripple {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

/* Make selected-text container use remaining space and ellipsis overflow */
.mdc-select__selected-text-container {
  display: block;
  width: 100%;
  overflow: hidden;
}

.mdc-select__selected-text {
  display: block;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 28px;
  padding-left: 4px;
}

/* Floating label behavior — ensure it doesn't overlap badly with selected text */
.mdc-select__anchor .mdc-floating-label {
  margin-left: 0;
  transform-origin: left center;
}

/* Dropdown icon on the right (keep it visually aligned) */
.mdc-select__dropdown-icon {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  padding-left: 12px;
}

/* Menu surface: make it at least as wide as anchor and prefer 100% on open */
.mdc-select__menu.mdc-menu-surface,
.mdc-menu-surface.cd-md-select-menu {
  min-width: 100% !important; /* ensures menu is not narrower than anchor */
  box-sizing: border-box;
  z-index: 1200;
}

/* Ensure list items wrap behaviour is consistent */
.mdc-list-item .mdc-list-item__text {
  white-space: normal;
  word-break: break-word;
}

/* If a select is inside a grid or inline layout, force the wrapper to stack—safe for POC */
.cd-form .cd-md-select-wrapper,
form .cd-md-select-wrapper {
  display: block;
  width: 100%;
}

/* If adapter keeps a fallback button trigger (legacy), make it full width too */
.cd-md-select-trigger,
.cd-md-select-display {
  display: block;
  width: 100%;
  box-sizing: border-box;
  text-align: left;
  padding-left: 12px;
  padding-right: 12px;
  min-height: 36px;
}

.mdc-select--filled:not(.mdc-select--disabled) .mdc-select__anchor {
  background-color: #1b1f23;
}

/* ------------------------------------------------------------
   BUTTON SPACING
------------------------------------------------------------ */
button[cdButton],
.cd-button {
  margin-top: 12px !important;
  margin-bottom: 12px !important;
  display: inline-block;
}

/* If a button appears next to selects inside same form, encourage stacking
   (POC behaviour: make buttons full width where they are in flow) */
form .cd-button,
form button[type="submit"] {
  width: 100%;
  box-sizing: border-box;
  margin-top: 10px !important;
}

/* ------------------------------------------------------------
   FIX: Floating label contrast in dark & light modes
------------------------------------------------------------ */

/* Non-focused floating label */
.cd-md-text-field.mdc-text-field--filled .mdc-floating-label,
.mdc-select__anchor .mdc-floating-label {
  color: var(--cd-input-placeholder) !important;
}

/* Floating label AFTER it has floated (not focused) */
.cd-md-text-field.mdc-text-field--filled .mdc-floating-label--float-above,
.mdc-select__anchor .mdc-floating-label--float-above {
  color: var(--cd-input-text-color) !important;
  opacity: 0.92; /* light contrast boost */
}

/* ------------------------------------------------------------
   Small adjustments to avoid layout jumps
------------------------------------------------------------ */
.mdc-line-ripple {
  transition: background-color 150ms ease, transform 150ms ease;
}

/* ensure selects and inputs have consistent left alignment */
.cd-md-text-field .mdc-text-field__input,
.mdc-select__selected-text {
  padding-left: 12px;
}

/* END bridge.css */
